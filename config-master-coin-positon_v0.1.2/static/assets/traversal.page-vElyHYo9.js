import{c as u,o,b as e,M as re,aZ as pt,J as $l,U as Ye,K as Vl,L as Ae,m as _,a,I as B,N as Il,w as b,i as y,a_ as Qe,a$ as dt,O as Ll,n as Bl,f as et,b0 as Dl,V as Sl,Q as Ol,a3 as Vt,b1 as zl,a5 as Nl,b2 as Fl,d as yt,a9 as xt,ak as zt,r as m,b3 as Pt,b4 as Wt,g as qe,F as D,j as g,k as R,am as He,ar as Re,T as bt,v as ce,e as ve,q as K,t as J,ap as vt,as as At,at as Tl,au as Mt,b5 as _t,ax as Nt,aE as It,b6 as tt,ay as lt,aG as Ul,az as Zt,b7 as jl,aN as Kt,aC as Ne,aP as Pl,b8 as St,B as Gt,aI as Al,b9 as Ht,ba as Rt,bb as Ml,bc as Hl,bd as Rl,be as Lt,bf as ql,bg as El,bh as Jl,bi as Wl,aO as Bt,aK as Zl,aL as Kl,bj as Gl,H as Xl,aa as Yl,bk as Ql,aW as ea,bl as ta,bm as la}from"./index-Cv2LNyEG.js";import{F as aa}from"./index-hDXmpcNX.js";import{u as qt,q as sa,e as Ft,f as oa,a as Xt,g as Yt,h as Tt,b as ia,c as na,d as ra,j as Qt,m as ht,i as el,_ as Ot,k as tl,o as ua,U as ca,p as da}from"./uploadConfigDialog.tmpl-Bi0Oybpw.js";import{c as ma}from"./index-CwOru6b6.js";import{s as ll,_ as Dt,b as al,c as De,d as pa,e as Et,t as sl,a as fa,f as ol,h as il,i as nl,m as va,g as ga,n as _a,p as ya,o as xa,q as ba,r as ha}from"./copyConfigDialog.tmpl.vue_vue_type_script_setup_true_lang-726M93Z_.js";import{s as wt,a as kt,b as Ct}from"./index-CNIEfIyN.js";import{a as Ut}from"./index-Dsf4UdYs.js";import"./index-Ck3g0x5w.js";var rl={name:"EyeIcon",extends:pt};function wa(r,c,O,z,se,x){return o(),u("svg",re({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.pti()),c[0]||(c[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z",fill:"currentColor"},null,-1)]),16)}rl.render=wa;var ul={name:"RefreshIcon",extends:pt};function ka(r,c,O,z,se,x){return o(),u("svg",re({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.pti()),c[0]||(c[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77051 5.96336C6.84324 5.99355 6.92127 6.00891 7.00002 6.00854C7.07877 6.00891 7.1568 5.99355 7.22953 5.96336C7.30226 5.93317 7.36823 5.88876 7.42357 5.83273L9.82101 3.43529C9.93325 3.32291 9.99629 3.17058 9.99629 3.01175C9.99629 2.85292 9.93325 2.70058 9.82101 2.5882L7.42357 0.190763C7.3687 0.131876 7.30253 0.0846451 7.22901 0.0518865C7.15549 0.019128 7.07612 0.00151319 6.99564 9.32772e-05C6.91517 -0.00132663 6.83523 0.0134773 6.7606 0.0436218C6.68597 0.0737664 6.61817 0.118634 6.56126 0.175548C6.50435 0.232462 6.45948 0.300257 6.42933 0.374888C6.39919 0.449519 6.38439 0.529456 6.38581 0.609933C6.38722 0.690409 6.40484 0.769775 6.4376 0.843296C6.47036 0.916817 6.51759 0.982986 6.57647 1.03786L7.95103 2.41241H6.99998C5.46337 2.41241 3.98969 3.02283 2.90314 4.10938C1.81659 5.19593 1.20618 6.66961 1.20618 8.20622C1.20618 9.74283 1.81659 11.2165 2.90314 12.3031C3.98969 13.3896 5.46337 14 6.99998 14C8.53595 13.9979 10.0084 13.3868 11.0945 12.3007C12.1806 11.2146 12.7917 9.74218 12.7938 8.20622C12.7938 8.04726 12.7306 7.89481 12.6182 7.78241C12.5058 7.67001 12.3534 7.60686 12.1944 7.60686C12.0355 7.60686 11.883 7.67001 11.7706 7.78241C11.6582 7.89481 11.5951 8.04726 11.5951 8.20622C11.5951 9.11504 11.3256 10.0035 10.8207 10.7591C10.3157 11.5148 9.59809 12.1037 8.75845 12.4515C7.9188 12.7993 6.99489 12.8903 6.10353 12.713C5.21217 12.5357 4.3934 12.0981 3.75077 11.4554C3.10813 10.8128 2.67049 9.99404 2.49319 9.10268C2.31589 8.21132 2.40688 7.2874 2.75468 6.44776C3.10247 5.60811 3.69143 4.89046 4.44709 4.38554C5.20275 3.88063 6.09116 3.61113 6.99998 3.61113H7.95098L6.57647 4.98564C6.46423 5.09802 6.40119 5.25035 6.40119 5.40918C6.40119 5.56801 6.46423 5.72035 6.57647 5.83273C6.63181 5.88876 6.69778 5.93317 6.77051 5.96336Z",fill:"currentColor"},null,-1)]),16)}ul.render=ka;var cl={name:"SearchMinusIcon",extends:pt};function Ca(r,c,O,z,se,x){return o(),u("svg",re({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.pti()),c[0]||(c[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.0208 12.0411C4.83005 12.0411 3.66604 11.688 2.67596 11.0265C1.68589 10.3649 0.914216 9.42464 0.458534 8.32452C0.00285271 7.22441 -0.116374 6.01388 0.11593 4.84601C0.348235 3.67813 0.921637 2.60537 1.76363 1.76338C2.60562 0.921393 3.67838 0.34799 4.84625 0.115686C6.01412 -0.116618 7.22466 0.00260857 8.32477 0.45829C9.42488 0.913972 10.3652 1.68564 11.0267 2.67572C11.6883 3.66579 12.0414 4.8298 12.0414 6.02056C12.0395 7.41563 11.5542 8.76029 10.6783 9.8305L13.8244 12.9765C13.9367 13.089 13.9997 13.2414 13.9997 13.4003C13.9997 13.5592 13.9367 13.7116 13.8244 13.8241C13.769 13.8801 13.703 13.9245 13.6302 13.9548C13.5575 13.985 13.4794 14.0003 13.4006 14C13.3218 14.0003 13.2437 13.985 13.171 13.9548C13.0982 13.9245 13.0322 13.8801 12.9768 13.8241L9.83082 10.678C8.76059 11.5539 7.4159 12.0393 6.0208 12.0411ZM6.0208 1.20731C5.07199 1.20731 4.14449 1.48867 3.35559 2.0158C2.56669 2.54292 1.95181 3.29215 1.58872 4.16874C1.22562 5.04532 1.13062 6.00989 1.31572 6.94046C1.50083 7.87104 1.95772 8.72583 2.62863 9.39674C3.29954 10.0676 4.15433 10.5245 5.0849 10.7096C6.01548 10.8947 6.98005 10.7997 7.85663 10.4367C8.73322 10.0736 9.48244 9.45868 10.0096 8.66978C10.5367 7.88088 10.8181 6.95337 10.8181 6.00457C10.8181 4.73226 10.3126 3.51206 9.41297 2.6124C8.51331 1.71274 7.29311 1.20731 6.0208 1.20731ZM4.00591 6.60422H8.00362C8.16266 6.60422 8.31518 6.54104 8.42764 6.42859C8.5401 6.31613 8.60328 6.1636 8.60328 6.00456C8.60328 5.84553 8.5401 5.693 8.42764 5.58054C8.31518 5.46809 8.16266 5.40491 8.00362 5.40491H4.00591C3.84687 5.40491 3.69434 5.46809 3.58189 5.58054C3.46943 5.693 3.40625 5.84553 3.40625 6.00456C3.40625 6.1636 3.46943 6.31613 3.58189 6.42859C3.69434 6.54104 3.84687 6.60422 4.00591 6.60422Z",fill:"currentColor"},null,-1)]),16)}cl.render=Ca;var dl={name:"SearchPlusIcon",extends:pt};function $a(r,c,O,z,se,x){return o(),u("svg",re({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.pti()),c[0]||(c[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67596 11.0265C3.66604 11.688 4.83005 12.0411 6.0208 12.0411C6.81143 12.0411 7.59432 11.8854 8.32477 11.5828C8.86999 11.357 9.37802 11.0526 9.83311 10.6803L12.9768 13.8241C13.0322 13.8801 13.0982 13.9245 13.171 13.9548C13.2437 13.985 13.3218 14.0003 13.4006 14C13.4794 14.0003 13.5575 13.985 13.6302 13.9548C13.703 13.9245 13.769 13.8801 13.8244 13.8241C13.9367 13.7116 13.9997 13.5592 13.9997 13.4003C13.9997 13.2414 13.9367 13.089 13.8244 12.9765L10.6806 9.8328C11.0529 9.37773 11.3572 8.86972 11.5831 8.32452C11.8856 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0267 2.67572C10.3652 1.68564 9.42488 0.913972 8.32477 0.45829C7.22466 0.00260857 6.01412 -0.116618 4.84625 0.115686C3.67838 0.34799 2.60562 0.921393 1.76363 1.76338C0.921637 2.60537 0.348235 3.67813 0.11593 4.84601C-0.116374 6.01388 0.00285271 7.22441 0.458534 8.32452C0.914216 9.42464 1.68589 10.3649 2.67596 11.0265ZM3.35559 2.0158C4.14449 1.48867 5.07199 1.20731 6.0208 1.20731C7.29311 1.20731 8.51331 1.71274 9.41297 2.6124C10.3126 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5367 7.88088 10.0096 8.66978C9.48244 9.45868 8.73322 10.0736 7.85663 10.4367C6.98005 10.7997 6.01548 10.8947 5.0849 10.7096C4.15433 10.5245 3.29954 10.0676 2.62863 9.39674C1.95772 8.72583 1.50083 7.87104 1.31572 6.94046C1.13062 6.00989 1.22562 5.04532 1.58872 4.16874C1.95181 3.29215 2.56669 2.54292 3.35559 2.0158ZM6.00481 8.60309C5.84641 8.60102 5.69509 8.53718 5.58308 8.42517C5.47107 8.31316 5.40722 8.16183 5.40515 8.00344V6.60422H4.00591C3.84687 6.60422 3.69434 6.54104 3.58189 6.42859C3.46943 6.31613 3.40625 6.1636 3.40625 6.00456C3.40625 5.84553 3.46943 5.693 3.58189 5.58054C3.69434 5.46809 3.84687 5.40491 4.00591 5.40491H5.40515V4.00572C5.40515 3.84668 5.46833 3.69416 5.58079 3.5817C5.69324 3.46924 5.84577 3.40607 6.00481 3.40607C6.16385 3.40607 6.31637 3.46924 6.42883 3.5817C6.54129 3.69416 6.60447 3.84668 6.60447 4.00572V5.40491H8.00362C8.16266 5.40491 8.31518 5.46809 8.42764 5.58054C8.5401 5.693 8.60328 5.84553 8.60328 6.00456C8.60328 6.1636 8.5401 6.31613 8.42764 6.42859C8.31518 6.54104 8.16266 6.60422 8.00362 6.60422H6.60447V8.00344C6.60239 8.16183 6.53855 8.31316 6.42654 8.42517C6.31453 8.53718 6.1632 8.60102 6.00481 8.60309Z",fill:"currentColor"},null,-1)]),16)}dl.render=$a;var ml={name:"UndoIcon",extends:pt};function Va(r,c,O,z,se,x){return o(),u("svg",re({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.pti()),c[0]||(c[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77042 5.96336C6.84315 5.99355 6.92118 6.00891 6.99993 6.00854C7.07868 6.00891 7.15671 5.99355 7.22944 5.96336C7.30217 5.93317 7.36814 5.88876 7.42348 5.83273C7.53572 5.72035 7.59876 5.56801 7.59876 5.40918C7.59876 5.25035 7.53572 5.09802 7.42348 4.98564L6.04897 3.61113H6.99998C7.9088 3.61113 8.79722 3.88063 9.55288 4.38554C10.3085 4.89046 10.8975 5.60811 11.2453 6.44776C11.5931 7.2874 11.6841 8.21132 11.5068 9.10268C11.3295 9.99404 10.8918 10.8128 10.2492 11.4554C9.60657 12.0981 8.7878 12.5357 7.89644 12.713C7.00508 12.8903 6.08116 12.7993 5.24152 12.4515C4.40188 12.1037 3.68422 11.5148 3.17931 10.7591C2.67439 10.0035 2.4049 9.11504 2.4049 8.20622C2.4049 8.04726 2.34175 7.89481 2.22935 7.78241C2.11695 7.67001 1.9645 7.60686 1.80554 7.60686C1.64658 7.60686 1.49413 7.67001 1.38172 7.78241C1.26932 7.89481 1.20618 8.04726 1.20618 8.20622C1.20829 9.74218 1.81939 11.2146 2.90548 12.3007C3.99157 13.3868 5.46402 13.9979 6.99998 14C8.5366 14 10.0103 13.3896 11.0968 12.3031C12.1834 11.2165 12.7938 9.74283 12.7938 8.20622C12.7938 6.66961 12.1834 5.19593 11.0968 4.10938C10.0103 3.02283 8.5366 2.41241 6.99998 2.41241H6.04892L7.42348 1.03786C7.48236 0.982986 7.5296 0.916817 7.56235 0.843296C7.59511 0.769775 7.61273 0.690409 7.61415 0.609933C7.61557 0.529456 7.60076 0.449519 7.57062 0.374888C7.54047 0.300257 7.49561 0.232462 7.43869 0.175548C7.38178 0.118634 7.31398 0.0737664 7.23935 0.0436218C7.16472 0.0134773 7.08478 -0.00132663 7.00431 9.32772e-05C6.92383 0.00151319 6.84447 0.019128 6.77095 0.0518865C6.69742 0.0846451 6.63126 0.131876 6.57638 0.190763L4.17895 2.5882C4.06671 2.70058 4.00366 2.85292 4.00366 3.01175C4.00366 3.17058 4.06671 3.32291 4.17895 3.43529L6.57638 5.83273C6.63172 5.88876 6.69769 5.93317 6.77042 5.96336Z",fill:"currentColor"},null,-1)]),16)}ml.render=Va;var Ia=`
    .p-image-mask {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .p-image-preview {
        position: relative;
        display: inline-flex;
        line-height: 0;
    }

    .p-image-preview-mask {
        position: absolute;
        inset-inline-start: 0;
        inset-block-start: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s;
        border: 0 none;
        padding: 0;
        cursor: pointer;
        background: transparent;
        color: dt('image.preview.mask.color');
        transition: background dt('image.transition.duration');
    }

    .p-image-preview:hover > .p-image-preview-mask {
        opacity: 1;
        cursor: pointer;
        background: dt('image.preview.mask.background');
    }

    .p-image-preview-icon {
        font-size: dt('image.preview.icon.size');
        width: dt('image.preview.icon.size');
        height: dt('image.preview.icon.size');
    }

    .p-image-toolbar {
        position: absolute;
        inset-block-start: dt('image.toolbar.position.top');
        inset-inline-end: dt('image.toolbar.position.right');
        inset-inline-start: dt('image.toolbar.position.left');
        inset-block-end: dt('image.toolbar.position.bottom');
        display: flex;
        z-index: 1;
        padding: dt('image.toolbar.padding');
        background: dt('image.toolbar.background');
        backdrop-filter: blur(dt('image.toolbar.blur'));
        border-color: dt('image.toolbar.border.color');
        border-style: solid;
        border-width: dt('image.toolbar.border.width');
        border-radius: dt('image.toolbar.border.radius');
        gap: dt('image.toolbar.gap');
    }

    .p-image-action {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        color: dt('image.action.color');
        background: transparent;
        width: dt('image.action.size');
        height: dt('image.action.size');
        margin: 0;
        padding: 0;
        border: 0 none;
        cursor: pointer;
        user-select: none;
        border-radius: dt('image.action.border.radius');
        outline-color: transparent;
        transition:
            background dt('image.transition.duration'),
            color dt('image.transition.duration'),
            outline-color dt('image.transition.duration'),
            box-shadow dt('image.transition.duration');
    }

    .p-image-action:hover {
        color: dt('image.action.hover.color');
        background: dt('image.action.hover.background');
    }

    .p-image-action:focus-visible {
        box-shadow: dt('image.action.focus.ring.shadow');
        outline: dt('image.action.focus.ring.width') dt('image.action.focus.ring.style') dt('image.action.focus.ring.color');
        outline-offset: dt('image.action.focus.ring.offset');
    }

    .p-image-action .p-icon {
        font-size: dt('image.action.icon.size');
        width: dt('image.action.icon.size');
        height: dt('image.action.icon.size');
    }

    .p-image-action.p-disabled {
        pointer-events: auto;
    }

    .p-image-original {
        transition: transform 0.15s;
        max-width: 100vw;
        max-height: 100vh;
    }

    .p-image-original-enter-active {
        transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
    }

    .p-image-original-leave-active {
        transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .p-image-original-enter-from,
    .p-image-original-leave-to {
        opacity: 0;
        transform: scale(0.7);
    }
`,La={root:function(c){var O=c.props;return["p-image p-component",{"p-image-preview":O.preview}]},previewMask:"p-image-preview-mask",previewIcon:"p-image-preview-icon",mask:"p-image-mask p-overlay-mask p-overlay-mask-enter",toolbar:"p-image-toolbar",rotateRightButton:"p-image-action p-image-rotate-right-button",rotateLeftButton:"p-image-action p-image-rotate-left-button",zoomOutButton:function(c){var O=c.instance;return["p-image-action p-image-zoom-out-button",{"p-disabled":O.isZoomOutDisabled}]},zoomInButton:function(c){var O=c.instance;return["p-image-action p-image-zoom-in-button",{"p-disabled":O.isZoomInDisabled}]},closeButton:"p-image-action p-image-close-button",original:"p-image-original"},Ba=$l.extend({name:"image",style:Ia,classes:La}),Da={name:"BaseImage",extends:Ol,props:{preview:{type:Boolean,default:!1},class:{type:null,default:null},style:{type:null,default:null},imageStyle:{type:null,default:null},imageClass:{type:null,default:null},previewButtonProps:{type:null,default:null},indicatorIcon:{type:String,default:void 0},previewIcon:{type:String,default:void 0},zoomInDisabled:{type:Boolean,default:!1},zoomOutDisabled:{type:Boolean,default:!1}},style:Ba,provide:function(){return{$pcImage:this,$parentInstance:this}}},pl={name:"Image",extends:Da,inheritAttrs:!1,emits:["show","hide","error"],mask:null,data:function(){return{maskVisible:!1,previewVisible:!1,rotate:0,scale:1}},beforeUnmount:function(){this.mask&&Vt.clear(this.container)},methods:{maskRef:function(c){this.mask=c},toolbarRef:function(c){this.toolbarRef=c},onImageClick:function(){var c=this;this.preview&&(sa(),this.maskVisible=!0,setTimeout(function(){c.previewVisible=!0},25))},onPreviewImageClick:function(){this.previewClick=!0},onMaskClick:function(c){var O=Fl(c.target,"data-pc-section-group","action")||c.target.closest('[data-pc-section-group="action"]');!this.previewClick&&!O&&(this.previewVisible=!1,this.rotate=0,this.scale=1),this.previewClick=!1},onMaskKeydown:function(c){var O=this;switch(c.code){case"Escape":this.hidePreview(),setTimeout(function(){Nl(O.$refs.previewButton)},200),c.preventDefault();break}},onError:function(){this.$emit("error")},rotateRight:function(){this.rotate+=90,this.previewClick=!0},rotateLeft:function(){this.rotate-=90,this.previewClick=!0},zoomIn:function(){this.scale=this.scale+.1,this.previewClick=!0},zoomOut:function(){this.scale=this.scale-.1,this.previewClick=!0},onBeforeEnter:function(){Vt.set("modal",this.mask,this.$primevue.config.zIndex.modal)},onEnter:function(){this.focus(),this.$emit("show")},onBeforeLeave:function(){!this.isUnstyled&&zl(this.mask,"p-overlay-mask-leave")},onLeave:function(){qt(),this.$emit("hide")},onAfterLeave:function(c){Vt.clear(c),this.maskVisible=!1},focus:function(){var c=this.mask.querySelector("[autofocus]");c&&c.focus()},hidePreview:function(){this.previewVisible=!1,this.rotate=0,this.scale=1,qt()}},computed:{containerClass:function(){return[this.cx("root"),this.class]},rotateClass:function(){return"p-image-preview-rotate-"+this.rotate},imagePreviewStyle:function(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}},isZoomInDisabled:function(){return this.zoomInDisabled||this.scale>=1.5},isZoomOutDisabled:function(){return this.zoomOutDisabled||this.scale<=.5},rightAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateRight:void 0},leftAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateLeft:void 0},zoomInAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomIn:void 0},zoomOutAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomOut:void 0},zoomImageAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomImage:void 0},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},components:{Portal:Sl,EyeIcon:rl,RefreshIcon:ul,UndoIcon:ml,SearchMinusIcon:cl,SearchPlusIcon:dl,TimesIcon:Dl},directives:{focustrap:aa}};function mt(r){"@babel/helpers - typeof";return mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},mt(r)}function Jt(r,c){var O=Object.keys(r);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(r);c&&(z=z.filter(function(se){return Object.getOwnPropertyDescriptor(r,se).enumerable})),O.push.apply(O,z)}return O}function gt(r){for(var c=1;c<arguments.length;c++){var O=arguments[c]!=null?arguments[c]:{};c%2?Jt(Object(O),!0).forEach(function(z){Sa(r,z,O[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(O)):Jt(Object(O)).forEach(function(z){Object.defineProperty(r,z,Object.getOwnPropertyDescriptor(O,z))})}return r}function Sa(r,c,O){return(c=Oa(c))in r?Object.defineProperty(r,c,{value:O,enumerable:!0,configurable:!0,writable:!0}):r[c]=O,r}function Oa(r){var c=za(r,"string");return mt(c)=="symbol"?c:c+""}function za(r,c){if(mt(r)!="object"||!r)return r;var O=r[Symbol.toPrimitive];if(O!==void 0){var z=O.call(r,c);if(mt(z)!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(r)}var Na=["aria-label"],Fa=["aria-modal"],Ta=["aria-label"],Ua=["aria-label"],ja=["disabled","aria-label"],Pa=["disabled","aria-label"],Aa=["aria-label"],Ma=["src"];function Ha(r,c,O,z,se,x){var ee=Ye("RefreshIcon"),de=Ye("UndoIcon"),le=Ye("SearchMinusIcon"),i=Ye("SearchPlusIcon"),ge=Ye("TimesIcon"),V=Ye("Portal"),ie=Vl("focustrap");return o(),u("span",re({class:x.containerClass,style:r.style},r.ptmi("root")),[Ae(r.$slots,"image",{errorCallback:x.onError},function(){return[e("img",re({style:r.imageStyle,class:r.imageClass,onError:c[0]||(c[0]=function(){return x.onError&&x.onError.apply(x,arguments)})},gt(gt({},r.$attrs),r.ptm("image"))),null,16)]}),r.preview?(o(),u("button",re({key:0,ref:"previewButton","aria-label":x.zoomImageAriaLabel,type:"button",class:r.cx("previewMask"),onClick:c[1]||(c[1]=function(){return x.onImageClick&&x.onImageClick.apply(x,arguments)})},gt(gt({},r.previewButtonProps),r.ptm("previewMask"))),[Ae(r.$slots,r.$slots.previewicon?"previewicon":"indicatoricon",{},function(){return[(o(),B(Il(r.previewIcon||r.indicatorIcon?"i":"EyeIcon"),re({class:[r.cx("previewIcon"),r.previewIcon]},r.ptm("previewIcon")),null,16,["class"]))]})],16,Na)):_("",!0),a(V,null,{default:b(function(){return[se.maskVisible?y((o(),u("div",re({key:0,ref:x.maskRef,role:"dialog",class:r.cx("mask"),"aria-modal":se.maskVisible,onClick:c[8]||(c[8]=function(){return x.onMaskClick&&x.onMaskClick.apply(x,arguments)}),onKeydown:c[9]||(c[9]=function(){return x.onMaskKeydown&&x.onMaskKeydown.apply(x,arguments)})},r.ptm("mask")),[e("div",re({class:r.cx("toolbar")},r.ptm("toolbar")),[e("button",re({class:r.cx("rotateRightButton"),onClick:c[2]||(c[2]=function(){return x.rotateRight&&x.rotateRight.apply(x,arguments)}),type:"button","aria-label":x.rightAriaLabel},r.ptm("rotateRightButton"),{"data-pc-group-section":"action"}),[Ae(r.$slots,"refresh",{},function(){return[a(ee,Qe(dt(r.ptm("rotateRightIcon"))),null,16)]})],16,Ta),e("button",re({class:r.cx("rotateLeftButton"),onClick:c[3]||(c[3]=function(){return x.rotateLeft&&x.rotateLeft.apply(x,arguments)}),type:"button","aria-label":x.leftAriaLabel},r.ptm("rotateLeftButton"),{"data-pc-group-section":"action"}),[Ae(r.$slots,"undo",{},function(){return[a(de,Qe(dt(r.ptm("rotateLeftIcon"))),null,16)]})],16,Ua),e("button",re({class:r.cx("zoomOutButton"),onClick:c[4]||(c[4]=function(){return x.zoomOut&&x.zoomOut.apply(x,arguments)}),type:"button",disabled:x.isZoomOutDisabled,"aria-label":x.zoomOutAriaLabel},r.ptm("zoomOutButton"),{"data-pc-group-section":"action"}),[Ae(r.$slots,"zoomout",{},function(){return[a(le,Qe(dt(r.ptm("zoomOutIcon"))),null,16)]})],16,ja),e("button",re({class:r.cx("zoomInButton"),onClick:c[5]||(c[5]=function(){return x.zoomIn&&x.zoomIn.apply(x,arguments)}),type:"button",disabled:x.isZoomInDisabled,"aria-label":x.zoomInAriaLabel},r.ptm("zoomInButton"),{"data-pc-group-section":"action"}),[Ae(r.$slots,"zoomin",{},function(){return[a(i,Qe(dt(r.ptm("zoomInIcon"))),null,16)]})],16,Pa),e("button",re({class:r.cx("closeButton"),type:"button",onClick:c[6]||(c[6]=function(){return x.hidePreview&&x.hidePreview.apply(x,arguments)}),"aria-label":x.closeAriaLabel,autofocus:""},r.ptm("closeButton"),{"data-pc-group-section":"action"}),[Ae(r.$slots,"close",{},function(){return[a(ge,Qe(dt(r.ptm("closeIcon"))),null,16)]})],16,Aa)],16),a(Ll,re({name:"p-image-original",onBeforeEnter:x.onBeforeEnter,onEnter:x.onEnter,onLeave:x.onLeave,onBeforeLeave:x.onBeforeLeave,onAfterLeave:x.onAfterLeave},r.ptm("transition")),{default:b(function(){return[se.previewVisible?(o(),u("div",Qe(re({key:0},r.ptm("originalContainer"))),[Ae(r.$slots,r.$slots.original?"original":"preview",{class:et(r.cx("original")),style:Bl(x.imagePreviewStyle),previewCallback:x.onPreviewImageClick},function(){return[e("img",re({src:r.$attrs.src,class:r.cx("original"),style:x.imagePreviewStyle,onClick:c[7]||(c[7]=function(){return x.onPreviewImageClick&&x.onPreviewImageClick.apply(x,arguments)})},r.ptm("original")),null,16,Ma)]})],16)):_("",!0)]}),_:3},16,["onBeforeEnter","onEnter","onLeave","onBeforeLeave","onAfterLeave"])],16,Fa)),[[ie]]):_("",!0)]}),_:3})],16)}pl.render=Ha;const Ra=""+new URL("1-B90_ZQQe.png",import.meta.url).href,qa=""+new URL("2-C9bQ7K0E.png",import.meta.url).href,Ea=""+new URL("3-bJPqysXB.png",import.meta.url).href,Ja=""+new URL("4-DVMhFX4V.png",import.meta.url).href,Wa=""+new URL("1-BkkwgdGk.png",import.meta.url).href,Za=""+new URL("2-CnXqWlHO.png",import.meta.url).href,Ka=""+new URL("3-Bl5Pska0.png",import.meta.url).href,Ga=""+new URL("4-DFvsfMdK.png",import.meta.url).href,Xa=""+new URL("1-BhkoTAkM.png",import.meta.url).href,Ya=""+new URL("2-DxBoEtSY.png",import.meta.url).href,Qa=""+new URL("3-D3ntwjTL.png",import.meta.url).href,es=""+new URL("4-BeYin2Bf.png",import.meta.url).href,ts={class:"space-x-2"},ls={class:"flex gap-x-4 max-h-full"},as={class:"flex-7 min-w-0 max-h-full overflow-y-auto"},ss={class:"w-full flex-1 flex flex-col gap-y-5"},os={class:"flex gap-x-2"},is={class:"flex-1 flex flex-col gap-y-2"},ns={class:"text-sm space-x-1 flex items-center"},rs={class:"pi pi-question-circle cursor-pointer"},us={class:"flex-1 flex flex-col gap-y-2"},cs={class:"flex justify-between items-center"},ds={class:"text-sm space-x-1 flex items-center"},ms={class:"pi pi-question-circle cursor-pointer"},ps={class:"flex-1 flex flex-col gap-y-2"},fs={class:"flex justify-between items-center"},vs={class:"text-sm space-x-1 flex items-center"},gs={class:"pi pi-question-circle cursor-pointer"},_s={key:0,class:"flex flex-wrap gap-2"},ys={key:1},xs={key:1,class:"flex-1 flex flex-col gap-y-2"},bs={class:"flex justify-between items-center"},hs={class:"text-sm space-x-1 flex items-center"},ws={class:"pi pi-question-circle cursor-pointer"},ks={class:"flex items-center gap-4"},Cs={key:0},$s={key:1,class:"text-sm text-gray-500"},Vs={key:0,class:"flex flex-wrap gap-2"},Is={class:"text-sm text-gray-500"},Ls={class:"flex flex-col gap-y-2"},Bs={class:"flex justify-between items-center"},Ds={class:"text-sm space-x-1 flex items-center"},Ss={class:"pi pi-question-circle cursor-pointer"},Os={class:"text-xs text-gray-500 dark:text-gray-300 ml-2"},zs={class:"flex gap-2 items-center"},Ns={class:"flex-1 flex flex-col gap-y-2"},Fs={class:"flex justify-between items-center h-[26px]"},Ts={class:"text-sm space-x-1 flex items-center"},Us={class:"pi pi-question-circle cursor-pointer"},js={class:"flex-1 flex flex-col gap-y-2"},Ps={class:"flex justify-between items-center h-[26px]"},As={class:"text-sm space-x-1 flex items-center"},Ms={class:"pi pi-question-circle cursor-pointer"},Hs={class:"flex items-center gap-x-2"},Rs={class:"flex-1 flex flex-col gap-y-2"},qs={class:"flex justify-between items-center"},Es={class:"text-sm space-x-1 flex items-center"},Js={class:"pi pi-question-circle cursor-pointer"},Ws={class:"flex-1 flex flex-col gap-y-2"},Zs={class:"flex justify-between items-center"},Ks={class:"text-sm space-x-1 flex items-center"},Gs={class:"pi pi-question-circle cursor-pointer"},Xs={class:"flex items-center gap-2"},Ys={class:"flex flex-col gap-2"},Qs={class:"flex flex-col gap-y-2 flex-1"},eo={class:"flex justify-between items-center"},to={class:"text-sm space-x-1 flex items-center"},lo={class:"pi pi-question-circle cursor-pointer"},ao={class:"flex flex-col gap-y-2 flex-1"},so={class:"flex justify-between items-center"},oo={class:"text-sm space-x-1 flex items-center"},io={class:"pi pi-question-circle cursor-pointer"},no={class:"flex flex-col gap-y-2"},ro={class:"flex gap-1 items-center"},uo={key:0,class:"pi pi-question-circle cursor-pointer"},co={key:0,class:"flex flex-col gap-y-2"},mo={class:"flex justify-between items-center gap-x-2"},po={class:"mt-2"},fo={key:1,class:"space-y-2"},vo={class:"flex flex-col gap-y-2"},go={class:"flex items-center gap-1"},_o={key:0,class:"pi pi-question-circle cursor-pointer"},yo={key:0,class:"space-y-2"},xo={key:3,class:"space-y-2"},bo={key:0,class:"flex flex-col gap-y-2"},ho={class:"text-sm flex items-center gap-1"},wo={class:"pi pi-question-circle cursor-pointer"},ko={key:0,class:"space-y-2"},Co={class:"mt-2"},$o={key:1,class:"space-y-2"},Vo={key:5,class:"flex flex-col gap-y-2"},Io={class:"flex items-center gap-3"},Lo={for:"cross-section-toggle",class:"cursor-pointer"},Bo={class:"flex gap-2 items-center"},Do={for:"cross-section-toggle",class:"cursor-pointer"},So={class:"pi pi-question-circle cursor-pointer"},Oo={key:0,class:"space-y-5"},zo={class:"flex-1 flex flex-col gap-2"},No={class:"flex-1 flex flex-col gap-2"},Fo={class:"flex justify-between items-center"},To={class:"text-sm space-x-1 flex items-center"},Uo={class:"pi pi-question-circle cursor-pointer"},jo={class:"flex flex-col gap-2"},Po={class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},Ao={class:"pi pi-question-circle cursor-pointer"},Mo={class:"w-full"},Ho={class:"flex flex-col gap-2"},Ro={class:"flex gap-2 items-center"},qo={for:"override-section-toggle",class:"cursor-pointer"},Eo={class:"pi pi-question-circle cursor-pointer"},Jo={key:1,class:"space-y-5"},Wo={class:"flex-1 flex flex-col gap-2"},Zo={class:"flex-1 flex flex-col gap-2"},Ko={class:"flex justify-between items-center"},Go={class:"text-sm space-x-1 flex items-center"},Xo={class:"pi pi-question-circle cursor-pointer"},Yo={class:"flex flex-col gap-2"},Qo={class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},ei={class:"pi pi-question-circle cursor-pointer"},ti={class:"w-full"},li={class:"flex flex-col gap-2"},ai={class:"w-full"},si={class:"space-y-2"},oi={class:"text-sm space-y-1"},ii={class:"flex items-center gap-2"},ni={class:"flex items-center gap-2"},ri={class:"space-y-6"},ui={key:0,class:"flex-1 flex flex-col gap-y-2"},ci={class:"flex justify-between items-center"},di={class:"text-sm space-x-1 flex items-center"},mi={class:"pi pi-question-circle cursor-pointer"},pi={key:1,class:"flex-1 flex flex-col"},fi={class:"flex justify-between items-center"},vi={class:"text-sm space-x-1 flex items-center"},gi={class:"pi pi-question-circle cursor-pointer"},_i={class:"flex flex-col"},yi={key:0,class:"flex flex-wrap gap-2"},xi={key:2,class:"flex-1 flex flex-col"},bi={class:"flex justify-between items-center"},hi={class:"text-sm space-x-1 flex items-center"},wi={class:"pi pi-question-circle cursor-pointer"},ki={key:0,class:"flex flex-col"},Ci={key:0,class:"flex flex-wrap gap-2"},$i={key:0,class:"flex-1 flex flex-col gap-y-2"},Vi={class:"flex justify-between items-center"},Ii={class:"text-sm space-x-1 flex items-center"},Li={class:"pi pi-question-circle cursor-pointer"},Bi={class:"space-y-1 list-disc pl-4 mt-1"},Di={class:"text-xs text-gray-500 dark:text-gray-300"},Si={key:1,class:"flex-1 flex flex-col gap-y-2"},Oi={class:"flex justify-between items-center"},zi={class:"text-sm space-x-1 flex items-center"},Ni={class:"pi pi-question-circle cursor-pointer"},Fi={key:2,class:"flex-1 flex flex-col gap-y-2"},Ti={class:"flex justify-between items-center"},Ui={class:"text-sm space-x-1 flex items-center"},ji={class:"pi pi-question-circle cursor-pointer"},Pi={key:3,class:"flex-1 flex flex-col gap-y-2"},Ai={class:"flex justify-between items-center"},Mi={class:"text-sm space-x-1 flex items-center"},Hi={class:"pi pi-question-circle cursor-pointer"},Ri={key:4,class:"flex-1 flex flex-col gap-y-2"},qi={class:"flex justify-between items-center"},Ei={class:"text-sm space-x-1 flex items-center"},Ji={class:"pi pi-question-circle cursor-pointer"},Wi={key:0,class:"flex flex-col gap-2"},Zi={class:"flex flex-col gap-y-2 flex-1"},Ki={class:"flex justify-between items-center"},Gi={class:"text-sm flex items-center gap-1"},Xi={class:"pi pi-question-circle cursor-pointer"},Yi={key:1,class:"flex flex-col gap-y-2 flex-1"},Qi={class:"flex justify-between items-center"},en={class:"text-sm flex items-center gap-1"},tn={class:"pi pi-question-circle cursor-pointer"},ln={key:2,class:"flex-1 flex flex-col gap-2"},an={class:"flex justify-between items-center"},sn={class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},on={class:"pi pi-question-circle cursor-pointer"},nn={key:3,class:"flex-1 flex flex-col gap-2"},rn={class:"flex justify-between items-center"},un={class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},cn={class:"pi pi-question-circle cursor-pointer"},dn={key:0,class:"flex flex-col gap-4"},mn={class:"space-y-4"},pn={class:"text-sm font-medium flex justify-between items-center gap-1 flex-wrap"},fn={class:"flex items-center space-x-1"},vn=["innerHTML"],gn={class:"pi pi-question-circle cursor-pointer text-gray-400 ml-1"},_n={class:"flex items-end gap-2 flex-wrap"},yn={key:1,class:"flex gap-2 flex-wrap"},xn={class:"flex flex-col gap-1"},bn={class:"flex flex-col gap-1"},hn={class:"flex flex-col gap-1"},wn=yt({__name:"editBatch.tmpl",emits:["refreshConfigInfo"],setup(r,{expose:c,emit:O}){const z=xt(),se=zt(),x=O,ee=m(!1),de=m(!1),le=m(!1),i=m(Pt),ge=m([]),V=m([]),ie=m(!1),Se=m(!1),Y=m(!1),L=m(!1),G=m([{label:"多空统一",value:"factorList"},{label:"多空分离",value:"longOrShort"}]),M=m([{label:"多头",value:"long"},{label:"空头",value:"short"}]),me=m("set"),we=m("factorList"),Ce=m("factorList"),ue=m("factorList"),$e=m("long"),Ve=m("long"),_e=m("long"),Oe=m(null),te=m([]),ye=m([]),w=m(null),v=m([]),N=m({策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}}),H=m({策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}}),W=m({策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}}),ae=m(!1),k=m(!1),n=m(!1),s=m(Wt),h=m([]),I=m([]),E=m([{label:"数字",value:"number"},{label:"字符串",value:"string"},{label:"布尔",value:"boolean"},{label:"区间",value:"object"}]),S=m([{label:"true",value:!0},{label:"false",value:!1}]),Q=m(""),Fe=qe(()=>i.value.short_cap_weight===1?[{label:"纯合约（swap_swap）",value:"swap_swap"}]:[{label:"纯现货（spot_spot）",value:"spot_spot"},{label:"纯合约（swap_swap）",value:"swap_swap"},{label:"现货与合约-现货优先（mix_spot）",value:"mix_spot"},{label:"现货与合约-合约优先（mix_swap）",value:"mix_swap"},{label:"现货选币合约优先（spot_swap）",value:"spot_swap"}]),Ie=m("null"),$=m([{label:"默认",value:"null"},{label:"平衡",value:"normal"},{label:"激进",value:"aggressive"},{label:"疯狂",value:"crazy"},{label:"自定义",value:"custom"}]),p=f=>{if(f==null)return!1;const{start:t,end:d,step:C}=f,P=Number(t),F=Number(d),Be=Number(C);return!([P,F,Be].some(be=>isNaN(be))||Be<=0||Be>d||P>=F)},X=async f=>{const t=h.value.findIndex(P=>P.id===f);if(t===-1)return;const d=h.value[t];await Nt();const C=d.candidates;p(C)?d.error="":d.error="区间不合法：请填写有效的起始、结束与步长（0<步长<结束值，起始<结束）"},xe=qe(()=>{let f=["open","close-open"];for(let t=930;t<=1130;t+=5)if(t%100<60){let C=t.toString().padStart(4,"0");f.push(`${C}-${C}`)}for(let t=1305;t<=1455;t+=5)if(t%100<60){let C=t.toString().padStart(4,"0");f.push(`${C}-${C}`)}return f}),Ue=async(f,t,d)=>{Q.value="",s.value=JSON.parse(JSON.stringify(t)),L.value=d||!1,await at(),me.value="set",i.value=JSON.parse(JSON.stringify(Pt)),le.value=!1,f&&(i.value={...JSON.parse(JSON.stringify(i.value)),...JSON.parse(JSON.stringify(f||{}))}),We(),L.value===!0&&Ee(i.value.name,It.strategy),h.value=[],I.value=[],Object.keys(s.value).forEach(C=>{var P;if(C.includes("[")){const F=tt(C);if(!h.value.some(be=>be.batchName===C)){let be="number";lt(s.value[C])==="object"?be="object":be=lt((P=s.value[C])==null?void 0:P[0])||"number",h.value.push({id:C,batchName:C,parsed:F,valueType:be,candidates:s.value[C]}),I.value.push(C)}}}),ee.value=!0},Ee=async(f,t,d="timing")=>{t===It.strategy?(ae.value=!0,N.value={策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}}):d!=="timing"?(n.value=!0,W.value={策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}}):(k.value=!0,H.value={策略直播:[],论坛帖子:[],相关船队:[],策略说明:"",使用案例:{}});const C=await Ul(encodeURIComponent(f),t);t===It.strategy?(ae.value=!1,C.result===!0&&C.data&&(N.value=C.data)):d!=="timing"?(n.value=!1,C.result===!0&&C.data&&(W.value=C.data)):(k.value=!1,C.result===!0&&C.data&&(H.value=C.data))},at=async()=>{const f=await Zt();f.result===!0&&(w.value=f.data,te.value=[],ye.value=[],f.data!==null&&Object.keys(f.data).length>0&&(Object.keys(f.data).forEach(d=>{const C=f.data;te.value.push({key:d,label:d==="factors"?"时序因子":"截面因子",selectable:!1,children:C[d].map(P=>({key:P.name,label:P.name}))||[]})}),ye.value=JSON.parse(JSON.stringify(te.value))))},Je=()=>{let f=["2D","3D","4D","5D","6D","7D","8D","9D"],t=["W","1W","2W","3W","4W","5W","6W"];return[{key:"group-day",label:"天",selectable:!1,children:f.map(d=>({key:d,label:d}))},{key:"group-week",label:"周",selectable:!1,children:[...t.map(d=>({key:d,label:d})),{key:"W53",label:"W53"}]},{key:"group-month",label:"月",selectable:!1,children:[{key:"M",label:"M"}]}]},We=()=>{let f=0,t=[];if(i.value.hold_period){const d=i.value.hold_period;d.includes("D")&&(f=Number(d.split("D")[0]),t=Array.from({length:f},(C,P)=>P)),d.includes("W")&&(d==="1W"||d==="W"?t=[0,1,2,3,4]:d==="W53"?t=[0]:(f=Number(d.split("W")[0]),t=Array.from({length:f},(C,P)=>P))),d==="M"&&(t=[-5,0])}else t=[];return V.value=t.map(d=>({label:d.toString(),value:d})),t},pe=f=>!0,j=f=>{pe(f[f.length-1])||Array.isArray(s.value.hold_period)&&s.value.hold_period.pop()},Z=()=>{Array.isArray(s.value.offset_list)?s.value.offset_list.push([]):s.value.offset_list=[[]]},Ze=f=>{Array.isArray(s.value.offset_list)&&s.value.offset_list.splice(f,1)},Ke=()=>{Array.isArray(s.value.scalein_targets)?s.value.scalein_targets.push([]):s.value.scalein_targets=[[]]},A=f=>{Array.isArray(s.value.scalein_targets)&&s.value.scalein_targets.splice(f,1)},T=f=>{const t=String(f).trim();if(t.includes(",")){const C=t.split(",");if(C.length!==2)return!1;const P=Number(C[0].trim()),F=Number(C[1].trim());return!(isNaN(P)||isNaN(F)||P<0||F<0||P>F)}const d=Number(t);return!(isNaN(d)||d<0)},fe=f=>String(f).trim()==="long_nums"?!0:T(f),je=(f,t,d=0)=>{var P,F,Be,be,Pe,Me,Ge,Xe;if(!f.length)return;const C=f[f.length-1];if(t==="long_select_coin_num")if(T(C)){s.value.long_select_coin_num=f;return}else{(P=s.value.long_select_coin_num)==null||P.pop();return}if(t==="short_select_coin_num")if(fe(C)){s.value.short_select_coin_num=f;return}else{(F=s.value.short_select_coin_num)==null||F.pop();return}jl(C,!(t==="long_cap_weight"||t==="short_cap_weight"||t==="scalein_targets"))?t==="select_num"?s.value.select_num=f.map(he=>Number(he)):t==="limit"?s.value.limit=f.map(he=>Number(he)):t==="long_cap_weight"?s.value.long_cap_weight=f.map(he=>Number(he)):t==="short_cap_weight"?s.value.short_cap_weight=f.map(he=>Number(he)):t==="scalein_targets"?s.value.scalein_targets[d]=f.map(he=>Number(he)):t==="override_limit"&&(s.value.override_limit=f.map(he=>Number(he))):t==="select_num"?(Be=s.value.select_num)==null||Be.pop():t==="limit"?(be=s.value.limit)==null||be.pop():t==="long_cap_weight"?(Pe=s.value.long_cap_weight)==null||Pe.pop():t==="short_cap_weight"?(Me=s.value.short_cap_weight)==null||Me.pop():t==="scalein_targets"?(Ge=s.value.scalein_targets[d])==null||Ge.pop():t==="override_limit"&&((Xe=s.value.override_limit)==null||Xe.pop())},fl=(f,t,d)=>{if(!f||!f.length)return;const C=h.value.findIndex(P=>P.id===t);if(C!==-1&&d==="number"){const P=[...f],F=P[P.length-1];isNaN(Number(F))?P.pop():P[P.length-1]=Number(F),h.value[C].candidates=P}},vl=(f,t)=>{const d=h.value.findIndex(C=>C.id===t);d!==-1&&(f==="object"?h.value[d].candidates={start:null,end:null,step:null}:h.value[d].candidates=[])},gl=()=>{Q.value=""},ke=()=>{let f=0;return Object.keys(s.value).forEach(t=>{t!=="name"&&t!=="search_name"&&t!=="strategy_info"&&!t.includes("[")&&s.value[t]!==null&&f++}),h.value.length>0&&(f+=h.value.length),f},ne=f=>{if(ke()>=3){z.add({severity:"warn",summary:"每个遍历任务最多只能添加3个参数",life:2e3});return}if(f.includes("[")){const t=tt(f);if(!t){z.add({severity:"error",summary:"参数格式错误",detail:"请检查动态参数格式是否正确",life:2e3});return}if(h.value.some(C=>C.batchName===f)){z.add({severity:"info",summary:"已添加该参数",detail:"该动态参数已存在，无需重复添加",life:2e3});return}h.value.push({id:f,batchName:f,parsed:t,valueType:"number",candidates:[]}),I.value.includes(f)||I.value.push(f)}else s.value[f]==null&&(s.value[f]=f==="hold_period"?{}:[])},oe=f=>{const t=s.value;f in t&&(t[f]=null)},Le=(f,t=!1)=>{h.value=h.value.filter(d=>d.id!==f),t&&(I.value=I.value.filter(d=>d!==f))},_l=()=>{var f;(f=Oe.value)==null||f.submit()},yl=async()=>{if(h.value.some(F=>F.error)){z.add({severity:"error",summary:"动态参数输入有误",detail:"请修正动态参数中的错误后再提交",life:3e3});return}let t={};Object.keys(s.value).forEach(F=>{F.includes("[")||(t[F]=s.value[F])});let d={...t,...h.value.reduce((F,Be)=>(F[Be.batchName]=Be.candidates,F),{})},C=0;if(Object.keys(d).forEach(F=>{(JSON.stringify(d[F])==="[]"||d[F]===null)&&C++}),C===Object.keys(d).length-3){z.add({severity:"error",summary:"请至少配置一个遍历参数,才能保存！",life:3e3});return}if(Q.value)return;(await Kt(d)).result===!0&&(z.add({severity:"success",summary:"保存成功！",life:3e3}),ee.value=!1,x("refreshConfigInfo"))},xl=()=>{se.require({group:"editBatch",message:"当前的修改还未保存，确定要关闭吗？",header:"确认关闭",icon:"pi pi-exclamation-triangle text-yellow-500",rejectProps:{label:"取消",outlined:!0},acceptProps:{label:"确定",severity:"secondary"},accept:()=>{ee.value=!1},reject:()=>{}})};return c({openDrawer:Ue}),(f,t)=>{const d=wt,C=oa,P=Xt,F=Yt,Be=Ut,be=al,Pe=Tt,Me=kt,Ge=ra,Xe=na,he=ia,$t=Qt,bl=Ft,ze=sl,hl=fa,ft=el,jt=Ct,wl=ht,kl=ll,Cl=ol,q=bt;return o(),u(D,null,[a(kl,{visible:ee.value,"onUpdate:visible":t[85]||(t[85]=st=>ee.value=st),header:"策略遍历配置编辑",dismissable:!1,position:"full",class:"w-[50vw]",pt:{content:{class:"flex flex-col"},header:{class:"py-3"}}},{closebutton:b(()=>[e("div",ts,[a(d,{label:"保存",size:"small",onClick:_l,loading:le.value},null,8,["loading"]),a(d,{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:xl})])]),default:b(()=>[e("div",ls,[e("div",as,[a(bl,{ref_key:"refForm",ref:Oe,onSubmit:yl,class:"flex flex-col space-y-4 pr-1"},{default:b(st=>{var ot,it,nt,rt,ut,ct;return[e("div",ss,[L.value&&g(R)==="stock"?(o(),B(C,{key:0,header:`「${i.value.name}」策略教程`,toggleable:"",class:"text-base bg-primary-50 dark:bg-gray-700",pt:{header:{class:"text-primary-600 dark:text-primary-500 px-2 py-0"}}},{default:b(()=>[a(Dt,{isLoading:ae.value,teachInfo:N.value},null,8,["isLoading","teachInfo"])]),_:1},8,["header"])):_("",!0),e("div",os,[e("div",{class:et(["flex flex-col gap-y-2",de.value?"flex-1":"flex-4"])},[t[86]||(t[86]=e("div",{class:"text-sm space-x-1 flex items-center"},[e("span",{class:"font-bold"},"策略名称")],-1)),g(R)==="coin"&&g(He)(i.value)?(o(),B(P,{key:0,modelValue:i.value.strategy,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value.strategy=l),modelModifiers:{trim:!0},name:"strategy",type:"text",placeholder:"请填写策略名称",class:"w-full",size:"small",disabled:!0},null,8,["modelValue"])):g(R)==="stock"&&g(Re)(i.value)?(o(),B(P,{key:1,modelValue:i.value.name,"onUpdate:modelValue":t[1]||(t[1]=l=>i.value.name=l),modelModifiers:{trim:!0},name:"name",type:"text",placeholder:"请填写策略名称",class:"w-full",size:"small",disabled:!0},null,8,["modelValue"])):_("",!0)],2),e("div",is,[e("div",ns,[t[87]||(t[87]=e("span",{class:"font-bold"},"资金权重",-1)),y(e("i",rs,null,512),[[q,{value:"资金占比，多策略组合时使用，会做归一化计算。如有两个策略，每个策略的cap_weight都设置为1，那么每个子策略的资金占比为 1/(1+1) = 0.5，也就是每个子策略资金占比50%。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(F,{modelValue:i.value.cap_weight,"onUpdate:modelValue":t[2]||(t[2]=l=>i.value.cap_weight=l),name:"cap_weight",minFractionDigits:0,maxFractionDigits:3,step:.1,min:0,max:1,mode:"decimal",showButtons:"",size:"small",disabled:!0},null,8,["modelValue"])])]),e("div",us,[e("div",cs,[e("div",ds,[t[88]||(t[88]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"持仓周期",-1)),y(e("i",ms,null,512),[[q,{value:g(R)==="coin"?"选币持仓的时间，H代表小时，持仓几个小时，有1H到24H一共24种选择；D代表日，1D持仓一天。":"选股交易的持股周期，D表示持股几天，如3D就是持股3天。W表示持股一周，M表示持股一个月。具体参数参照股票周期预运算表的数据文件。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])])]),a(P,{value:i.value.hold_period,size:"small",class:"w-full",disabled:!0},null,8,["value"])]),e("div",ps,[e("div",fs,[e("div",vs,[t[89]||(t[89]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"offset_list",-1)),y(e("i",gs,null,512),[[q,{value:g(R)==="coin"?"选择持仓的offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>":"与持股周期配合的具体offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),y(a(d,{onClick:t[3]||(t[3]=l=>ne("offset_list")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[ce,!s.value.offset_list]]),y(a(d,{onClick:t[4]||(t[4]=l=>oe("offset_list")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[ce,s.value.offset_list]])]),i.value.offset_list.length>0?(o(),u("div",_s,[(o(!0),u(D,null,ve(i.value.offset_list,(l,U)=>(o(),B(Be,{key:l,class:"font-medium text-xs",severity:"secondary"},{default:b(()=>[K(J(l),1)]),_:2},1024))),128))])):(o(),u("div",ys,"无"))]),g(vt)?(o(),u("div",xs,[e("div",bs,[e("div",hs,[t[90]||(t[90]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"分批进场目标仓位(offset间仓位分配)",-1)),y(e("i",ws,null,512),[[q,{value:`为了尽快建仓出击，给不同持仓offset数量，设置目标仓位。如持仓2个offset，这里可以设置为0.6，1，指的是持仓1个offset建仓60%，持仓2个offset建仓100%。请参考直播：
                  <a href='https://www.quantclass.cn/online-player/68da262b165fe20230bf4ad8' target='_blank' class='text-primary-500 hover:underline'>大A「定风波3」适度理解之offset间资金分配</a>`,autoHide:!1,escape:!1},void 0,{bottom:!0}]])])]),e("div",ks,[a(be,{modelValue:Ie.value,"onUpdate:modelValue":t[5]||(t[5]=l=>Ie.value=l),options:$.value,optionLabel:"label",optionValue:"value",size:"small",disabled:""},null,8,["modelValue","options"]),["normal","aggressive","crazy"].includes(Ie.value)?(o(),u("div",Cs,J(i.value.scalein_targets),1)):_("",!0),Ie.value=="null"?(o(),u("div",$s," 平均分配 ")):_("",!0)]),Ie.value==="custom"?(o(),u("div",Vs,[(o(!0),u(D,null,ve(i.value.offset_list,(l,U)=>(o(),u("div",{key:U,class:"flex items-center gap-2"},[e("span",Is,"仓位"+J(U+1)+":",1),a(F,{modelValue:i.value.scalein_targets[U],"onUpdate:modelValue":Te=>i.value.scalein_targets[U]=Te,min:0,max:1,step:.1,showButton:"",mode:"decimal",showButtons:"",minFractionDigits:0,maxFractionDigits:2,size:"small",disabled:""},null,8,["modelValue","onUpdate:modelValue"])]))),128))])):_("",!0)])):_("",!0),g(R)==="coin"&&g(He)(i.value)?(o(),u(D,{key:2},[e("div",Ls,[e("div",Bs,[e("div",Ds,[t[91]||(t[91]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"选币范围(现货/合约)",-1)),y(e("i",Ss,null,512),[[q,{value:g(At),autoHide:!1,escape:!1,class:"min-w-80"},void 0,{bottom:!0}]])]),y(a(d,{onClick:t[6]||(t[6]=l=>ne("market")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[ce,!s.value.market]]),y(a(d,{onClick:t[7]||(t[7]=l=>oe("market")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[ce,s.value.market]])]),a(Pe,{modelValue:i.value.market,"onUpdate:modelValue":t[8]||(t[8]=l=>i.value.market=l),options:g(Tl),optionLabel:"label",optionValue:"value",placeholder:"请选择选币范围(现货/合约)",class:"w-full",size:"small",disabled:""},null,8,["modelValue","options"]),e("span",Os,J(i.value.market)+": "+J(g(Mt)[i.value.market]),1)]),e("div",zs,[e("div",Ns,[e("div",Fs,[e("div",Ts,[t[92]||(t[92]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"多头权重",-1)),y(e("i",Us,null,512),[[q,{value:"多头权重：多头在子策略的仓位占比，如1表示纯多策略",autoHide:!1,escape:!1,class:"min-w-90"}]])])]),a(F,{modelValue:i.value.long_cap_weight,"onUpdate:modelValue":t[9]||(t[9]=l=>i.value.long_cap_weight=l),size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])]),e("div",js,[e("div",Ps,[e("div",As,[t[93]||(t[93]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"空头权重",-1)),y(e("i",Ms,null,512),[[q,{value:"空头权重：空头在子策略的仓位占比，如1表示纯空策略",autoHide:!1,escape:!1,class:"min-w-90"}]])])]),a(F,{modelValue:i.value.short_cap_weight,"onUpdate:modelValue":t[10]||(t[10]=l=>i.value.short_cap_weight=l),size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])])]),e("div",Hs,[e("div",Rs,[e("div",qs,[e("div",Es,[t[94]||(t[94]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"多头选币数量",-1)),y(e("i",Js,null,512),[[q,{value:"支持整数（如10）、小数（如0.5）、区间（如1,5）区间起始值和结束值用英文逗号隔开",autoHide:!1},void 0,{bottom:!0}]])]),y(a(d,{onClick:t[11]||(t[11]=l=>ne("long_select_coin_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[ce,!s.value.long_select_coin_num]]),y(a(d,{onClick:t[12]||(t[12]=l=>oe("long_select_coin_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[ce,s.value.long_select_coin_num]])]),a(P,{modelValue:i.value.long_select_coin_num,"onUpdate:modelValue":t[13]||(t[13]=l=>i.value.long_select_coin_num=l),modelModifiers:{trim:!0},name:"long_select_coin_num",placeholder:"支持整数（如10）、小数（如0.5）、区间（如1,5）区间起始值和结束值用英文逗号隔开",class:"w-full",size:"small",disabled:""},null,8,["modelValue"])]),e("div",Ws,[e("div",Zs,[e("div",Ks,[t[95]||(t[95]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"空头选币数量",-1)),y(e("i",Gs,null,512),[[q,{value:"支持输入整数， 小数，long_nums(和多头选币数量一致),区间（如1,5）区间起始值和结束值用英文逗号隔开",autoHide:!1},void 0,{bottom:!0}]])]),y(a(d,{onClick:t[14]||(t[14]=l=>ne("short_select_coin_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[ce,!s.value.short_select_coin_num]]),y(a(d,{onClick:t[15]||(t[15]=l=>oe("short_select_coin_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[ce,s.value.short_select_coin_num]])]),e("div",Xs,[a(P,{modelValue:i.value.short_select_coin_num,"onUpdate:modelValue":t[16]||(t[16]=l=>i.value.short_select_coin_num=l),modelModifiers:{trim:!0},name:"short_select_coin_num",placeholder:"支持输入整数， 小数，long_nums(和多头选币数量一致),区间（如1,5）区间起始值和结束值用英文逗号隔开",size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])])])])],64)):g(R)==="stock"&&g(Re)(i.value)?(o(),u(D,{key:3},[e("div",Ys,[e("div",Qs,[e("div",eo,[e("div",to,[t[96]||(t[96]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"选股数量",-1)),y(e("i",lo,null,512),[[q,{value:"选股数量，可以是整数，如10就是选股10只。也可以是小数，如0.1就是选全市场10%的股票，约500+只。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),y(a(d,{onClick:t[17]||(t[17]=l=>ne("select_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[ce,!s.value.select_num]]),y(a(d,{onClick:t[18]||(t[18]=l=>oe("select_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[ce,s.value.select_num]])]),a(F,{modelValue:i.value.select_num,"onUpdate:modelValue":t[19]||(t[19]=l=>i.value.select_num=l),name:"select_num",min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",class:"w-full",placeholder:"请输入选股数量",size:"small",disabled:!0},null,8,["modelValue"])])]),e("div",ao,[e("div",so,[e("div",oo,[t[97]||(t[97]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"换仓时间",-1)),y(e("i",io,null,512),[[q,{value:"换仓时机，根据持仓周期和offset交易时，在股票开始时间具体什么时刻卖出和买入。<br/>隔日换仓：'close-open'：offset结束日收盘前卖出，offset开始日开盘后买入；<br/>开盘日内换仓：'open'：offset当天实现换仓，开盘后先卖出再买入；<br/>指定时间换仓：按照5分钟为间隔指定交易日内换仓时间，如'0955-0955'是上午9:55先卖出，再买入。",autoHide:!1,escape:!1,class:"min-w-85"},void 0,{bottom:!0}]])]),y(a(d,{onClick:t[20]||(t[20]=l=>ne("rebalance_time")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[ce,!s.value.rebalance_time]]),y(a(d,{onClick:t[21]||(t[21]=l=>oe("rebalance_time")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[ce,s.value.rebalance_time]])]),a(Pe,{modelValue:i.value.rebalance_time,"onUpdate:modelValue":t[22]||(t[22]=l=>i.value.rebalance_time=l),name:"rebalance_time",filter:"",options:xe.value,size:"small",class:"w-full",disabled:!0},null,8,["modelValue","options"])])],64)):_("",!0),a(Me,{align:"center",type:"solid",class:"mb-0"},{default:b(()=>t[98]||(t[98]=[e("b",{class:"text-primary-500"},"因子配置",-1)])),_:1,__:[98]}),e("div",no,[e("div",ro,[t[99]||(t[99]=e("span",{class:"font-bold"},"因子配置",-1)),g(R)==="coin"?y((o(),u("i",uo,null,512)),[[q,{value:`多空统一：多头和空头因子设置相同；
多空分离：多头和空头因子设置不相同，可以分开设置；`,autoHide:!1,class:"min-w-85"}]]):_("",!0)]),g(R)==="coin"&&g(He)(i.value)?(o(),u(D,{key:0},[a(he,{value:we.value,"onUpdate:value":t[23]||(t[23]=l=>we.value=l),class:"w-full"},{default:b(()=>[a(Xe,{class:"px-2 py-1"},{default:b(()=>[(o(!0),u(D,null,ve(G.value,l=>(o(),B(Ge,{key:l.label,value:l.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[K(J(l.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),we.value==="longOrShort"?(o(),u("div",co,[e("div",mo,[a(be,{options:M.value,modelValue:$e.value,"onUpdate:modelValue":t[24]||(t[24]=l=>$e.value=l),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])])):_("",!0)],64)):g(R)==="stock"&&g(Re)(i.value)?(o(),u(D,{key:1},[],64)):_("",!0),e("div",po,[we.value==="factorList"?(o(),B(De,{key:0,propkey:"1",factorList:i.value.factor_list||[],title:"",factorSelect:"因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[25]||(t[25]=l=>i.value.factor_list=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"factor_list",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):g(R)==="coin"?(o(),u("div",fo,[g(He)(i.value)?(o(),u(D,{key:0},[$e.value==="long"?(o(),B(De,{key:0,propkey:"2",factorList:((ot=i.value)==null?void 0:ot.long_factor_list)||[],title:"多头选币",factorSelect:"因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[26]||(t[26]=l=>i.value.long_factor_list=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"long_factor_list",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),B(De,{key:1,propkey:"3",factorList:((it=i.value)==null?void 0:it.short_factor_list)||[],title:"空头选币",factorSelect:"因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[27]||(t[27]=l=>i.value.short_factor_list=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"short_factor_list",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))],64)):_("",!0)])):_("",!0)])]),e("div",vo,[e("div",go,[t[100]||(t[100]=e("span",{class:"font-bold"},"前置过滤因子配置",-1)),g(R)==="coin"?y((o(),u("i",_o,null,512)),[[q,{value:`多空统一：多头和空头因子设置相同；
多空分离：多头和空头因子设置不相同，可以分开设置；`,autoHide:!1,class:"min-w-85"}]]):_("",!0)]),g(R)==="coin"&&g(He)(i.value)?(o(),u(D,{key:0},[a(he,{value:Ce.value,"onUpdate:value":t[28]||(t[28]=l=>Ce.value=l),class:"w-full"},{default:b(()=>[a(Xe,{class:"px-2 py-1"},{default:b(()=>[(o(!0),u(D,null,ve(G.value,l=>(o(),B(Ge,{key:l.label,value:l.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[K(J(l.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),Ce.value==="longOrShort"?(o(),u("div",yo,[a(be,{options:M.value,modelValue:Ve.value,"onUpdate:modelValue":t[29]||(t[29]=l=>Ve.value=l),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])):_("",!0)],64)):g(R)==="stock"&&g(Re)(i.value)?(o(),u(D,{key:1},[],64)):_("",!0),Ce.value==="factorList"?(o(),B(De,{key:2,propkey:"4",factorList:i.value.filter_list||[],title:"前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[30]||(t[30]=l=>i.value.filter_list=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"filter_list",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):g(R)==="coin"?(o(),u("div",xo,[g(He)(i.value)?(o(),u(D,{key:0},[Ve.value==="long"?(o(),B(De,{key:0,propkey:"5",factorList:((nt=i.value)==null?void 0:nt.long_filter_list)||[],title:"多头前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[31]||(t[31]=l=>i.value.long_filter_list=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"long_filter_list",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),B(De,{key:1,propkey:"6",factorList:((rt=i.value)==null?void 0:rt.short_filter_list)||[],title:"空头前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[32]||(t[32]=l=>i.value.short_filter_list=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"short_filter_list",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))],64)):_("",!0)])):_("",!0)]),g(R)==="coin"?(o(),u(D,{key:4},[g(He)(i.value)?(o(),u("div",bo,[e("div",ho,[t[101]||(t[101]=e("span",{class:"font-bold"},"后置过滤因子配置",-1)),y(e("i",wo,null,512),[[q,{value:`多空统一：多头和空头因子设置相同；
多空分离：多头和空头因子设置不相同，可以分开设置；`,autoHide:!1,class:"min-w-85"}]])]),a(he,{value:ue.value,"onUpdate:value":t[33]||(t[33]=l=>ue.value=l),class:"w-full"},{default:b(()=>[a(Xe,{class:"px-2 py-1"},{default:b(()=>[(o(!0),u(D,null,ve(G.value,l=>(o(),B(Ge,{key:l.label,value:l.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[K(J(l.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),ue.value==="longOrShort"?(o(),u("div",ko,[a(be,{options:M.value,modelValue:_e.value,"onUpdate:modelValue":t[34]||(t[34]=l=>_e.value=l),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])):_("",!0),e("div",Co,[ue.value==="factorList"?(o(),B(De,{key:0,propkey:"7",factorList:i.value.filter_list_post||[],title:"后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[35]||(t[35]=l=>i.value.filter_list_post=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"filter_list_post",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),u("div",$o,[_e.value==="long"?(o(),B(De,{key:0,propkey:"8",factorList:((ut=i.value)==null?void 0:ut.long_filter_list_post)||[],title:"多头后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[36]||(t[36]=l=>i.value.long_filter_list_post=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"long_filter_list_post",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),B(De,{key:1,propkey:"9",factorList:((ct=i.value)==null?void 0:ct.short_filter_list_post)||[],title:"空头后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[37]||(t[37]=l=>i.value.short_filter_list_post=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"short_filter_list_post",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))]))])])):_("",!0)],64)):g(R)==="stock"&&g(Re)(i.value)?(o(),u("div",Vo,[t[102]||(t[102]=e("div",{class:"flex items-center gap-1"},[e("span",{class:"font-bold"},"截面因子配置"),e("span",{class:"text-primary-500 text-sm"},"(该功能尚未直播，请先保持默认配置)")],-1)),e("div",Io,[a($t,{modelValue:ie.value,"onUpdate:modelValue":t[38]||(t[38]=l=>ie.value=l),inputId:"cross-section-toggle","aria-label":"截面因子启用开关",disabled:!0},null,8,["modelValue"]),e("div",Lo,J(ie.value?"已启用截面因子":"未启用截面因子"),1)]),y(a(pa,{factorList:i.value.cross_sections,factorNameOpetions:ye.value,allFactorInfo:w.value,onSaveData:t[39]||(t[39]=l=>i.value.cross_sections=l),isEdit:!1},null,8,["factorList","factorNameOpetions","allFactorInfo"]),[[ce,ie.value===!0]])])):_("",!0),g(R)==="stock"?(o(),u(D,{key:6},[a(Me,{align:"center",type:"solid",class:"mb-0"},{default:b(()=>t[103]||(t[103]=[e("b",{class:"text-primary-500"},"择时进场信号配置",-1)])),_:1,__:[103]}),e("div",Bo,[a($t,{modelValue:Se.value,"onUpdate:modelValue":t[40]||(t[40]=l=>Se.value=l),inputId:"cross-section-toggle","aria-label":"择时进场信号启用开关",disabled:!0},null,8,["modelValue"]),e("div",Do,J(Se.value?"已启用择时进场信号":"未启用择时进场信号"),1),y(e("i",So,null,512),[[q,{value:"25年旗舰策略定风波盘中择时配置，原理请参考：<a href='https://www.quantclass.cn/online-player/679080b1fddb45271bef62c4' target='_blank' class='text-primary-500 hover:underline'>大A定风波再择时策略</a>,<a href='https://www.quantclass.cn/online-player/68341add32a9c6fe538027f3' target='_blank' class='text-primary-500 hover:underline'>大A「定风波2」再择时策略</a>",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),g(Re)(i.value)&&i.value.timing&&Se.value?(o(),u("div",Oo,[g(R)==="stock"&&i.value.timing.name?(o(),B(C,{key:0,header:`「${i.value.timing.name}」策略教程`,toggleable:"",class:"text-base bg-primary-50 dark:bg-gray-700",pt:{header:{class:"text-primary-600 dark:text-primary-500 px-2 py-0"}}},{default:b(()=>[a(Dt,{isLoading:k.value,teachInfo:H.value},null,8,["isLoading","teachInfo"])]),_:1},8,["header"])):_("",!0),e("div",zo,[t[104]||(t[104]=e("div",{class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},[e("span",null,"择时进场策略名称")],-1)),a(Pe,{modelValue:i.value.timing.name,"onUpdate:modelValue":t[41]||(t[41]=l=>i.value.timing.name=l),name:"timingName",filter:"",options:v.value,size:"small",class:"w-full",disabled:!0},null,8,["modelValue","options"])]),e("div",No,[e("div",Fo,[e("div",To,[t[105]||(t[105]=e("span",{class:"text-primary-500 dark:text-primary-300 font-semibold"},"择时进场阈值(limit)",-1)),y(e("i",Uo,null,512),[[q,{value:"择时信号计算的选股范围，有三种形式：0，小数和整数。<br/>0，代表全市场（选股策略过滤过的全市场）。<br/>小数，如0.2代表全市场的20%。<br/>整数，如200代表200只股票。<br/>",autoHide:!1,escape:!1,class:"min-w-85"}]])]),y(a(d,{onClick:t[42]||(t[42]=l=>ne("limit")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[ce,!s.value.limit]]),y(a(d,{onClick:t[43]||(t[43]=l=>oe("limit")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[ce,s.value.limit]])]),a(F,{modelValue:i.value.timing.limit,"onUpdate:modelValue":t[44]||(t[44]=l=>i.value.timing.limit=l),placeholder:"例如：100 或 0.5",min:0,minFractionDigits:0,maxFractionDigits:3,disabled:!0,class:"w-full",mode:"decimal",size:"small"},null,8,["modelValue"])]),e("div",jo,[e("div",Po,[t[106]||(t[106]=K(" 择时进场参数 ")),y(e("i",Ao,null,512),[[q,{value:"择时规则参数，目前14个定风波因子有固定阈值，时间周期，技术指标等几种参数类型。",autoHide:!1,escape:!1,class:"min-w-85"}]])]),e("div",Mo,[a(F,{class:"hidden",name:"timingParams"}),a(Et,{parameData:i.value.timing.params,"onUpdate:parameData":t[45]||(t[45]=l=>i.value.timing.params=l),isDisable:!0},null,8,["parameData"])])]),e("div",Ho,[t[107]||(t[107]=e("div",{class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"}," 择时进场因子 ",-1)),a(De,{propkey:new Date().getTime(),factorList:i.value.timing.factor_list||[],title:"择时进场",factorSelect:"因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[46]||(t[46]=l=>i.value.timing.factor_list=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"timing_factor_list",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["propkey","factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])])])):_("",!0),a(Me,{align:"center",type:"solid",class:"mb-0"},{default:b(()=>t[108]||(t[108]=[e("b",{class:"text-primary-500"},"择时离场信号配置",-1)])),_:1,__:[108]}),e("div",Ro,[a($t,{modelValue:Y.value,"onUpdate:modelValue":t[47]||(t[47]=l=>Y.value=l),inputId:"override-section-toggle","aria-label":"择时离场信号启用开关",disabled:""},null,8,["modelValue"]),e("label",qo,J(Y.value?"已启用择时离场信号":"未启用择时离场信号"),1),y(e("i",Eo,null,512),[[q,{value:"遇到市场暴跌，定风波3策略选择尽快清仓离场，这里可以设置离场的择时条件和参数。请参考直播：<a href='https://www.quantclass.cn/online-player/68c7e42cf21d36407f869de2' target='_blank' class='text-primary-500 hover:underline'>大A「定风波3」再择时策略</a>,<a href='https://www.quantclass.cn/online-player/68edeb4024131d4118119167' target='_blank' class='text-primary-500 hover:underline'>大A「定风波3」适度理解之离场</a>",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),g(Re)(i.value)&&i.value.override&&Y.value?(o(),u("div",Jo,[g(vt)&&i.value.override.name?(o(),B(C,{key:0,header:`「${i.value.override.name}」策略教程`,toggleable:"",class:"text-base bg-primary-50 dark:bg-gray-700",pt:{header:{class:"text-primary-600 dark:text-primary-500 px-2 py-0"}}},{default:b(()=>[a(Dt,{isLoading:n.value,teachInfo:W.value},null,8,["isLoading","teachInfo"])]),_:1},8,["header"])):_("",!0),e("div",Wo,[t[109]||(t[109]=e("label",{class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"},[e("span",{class:"text-red-500"},"*"),e("span",null,"择时离场策略名称")],-1)),a(Pe,{modelValue:i.value.override.name,"onUpdate:modelValue":t[48]||(t[48]=l=>i.value.override.name=l),name:"overrideName",filter:"",options:v.value,size:"small",class:"w-full",disabled:""},null,8,["modelValue","options"])]),e("div",Zo,[e("div",Ko,[e("div",Go,[t[110]||(t[110]=e("span",{class:"text-primary-500 dark:text-primary-300 font-semibold"},"择时离场阈值(limit)",-1)),y(e("i",Xo,null,512),[[q,{value:"择时信号计算的选股范围，有三种形式：0，小数和整数。<br/>0，代表全市场（选股策略过滤过的全市场）。<br/>小数，如0.2代表全市场的20%。<br/>整数，如200代表200只股票。<br/>",autoHide:!1,escape:!1,class:"min-w-85"}]])]),y(a(d,{onClick:t[49]||(t[49]=l=>ne("override_limit")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[ce,!s.value.override_limit]]),y(a(d,{onClick:t[50]||(t[50]=l=>oe("override_limit")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[ce,s.value.override_limit]])]),a(F,{modelValue:i.value.override.limit,"onUpdate:modelValue":t[51]||(t[51]=l=>i.value.override.limit=l),placeholder:"例如：100 或 0.5",min:0,minFractionDigits:0,maxFractionDigits:3,disabled:!0,class:"w-full",mode:"decimal",size:"small"},null,8,["modelValue"])]),e("div",Yo,[e("label",Qo,[t[111]||(t[111]=e("span",{class:"text-red-500"},"*",-1)),t[112]||(t[112]=K(" 择时离场参数 ")),y(e("i",ei,null,512),[[q,{value:"择时规则参数，目前14个定风波因子有固定阈值，时间周期，技术指标等几种参数类型。",autoHide:!1,escape:!1,class:"min-w-85"}]])]),e("div",ti,[a(F,{class:"hidden",name:"overrideParams"}),a(Et,{parameData:i.value.override.params,"onUpdate:parameData":t[52]||(t[52]=l=>i.value.override.params=l),isDisable:!0},null,8,["parameData"])])]),e("div",li,[t[113]||(t[113]=e("label",{class:"text-sm text-gray-700 dark:text-gray-300 flex items-center gap-1"}," 择时离场因子 ",-1)),a(De,{propkey:new Date().getTime(),factorList:i.value.override.factor_list||[],title:"择时离场",factorSelect:"因子",factorNameOpetions:te.value,allFactorInfo:w.value,onSaveData:t[53]||(t[53]=l=>i.value.override.factor_list=l),onAddFactorBatchItem:ne,onRemoveFactorBatchItem:Le,BatchParamsNameList:I.value,paramsName:"override_factor_list",isDemoStrategy:L.value,disabled:!0,isBatchItem:!0,BatchLength:ke()},null,8,["propkey","factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])])])):_("",!0)],64)):_("",!0)])]}),_:1},512)]),a(wl,{class:"flex-3 max-h-full overflow-y-auto min-w-0 h-fit sticky top-2 right-0 border-1 shadow-sm border-primary-200 dark:border-gray-700"},{content:b(()=>{var st,ot,it,nt,rt,ut,ct;return[e("div",ai,[e("div",si,[t[122]||(t[122]=e("h1",{class:"font-bold text-primary-600 dark:text-primary-500"}," 遍历参数 ",-1)),t[123]||(t[123]=e("h2",{class:"text-sm text-gray-500 dark:text-gray-400"}," 在左侧策略信息区域，点击「+ 遍历」按钮即可添加需要遍历参数的候选项 ",-1)),e("ul",oi,[e("li",ii,[ke()>=2?(o(),u(D,{key:0},[t[114]||(t[114]=e("i",{class:"pi pi-check-circle text-green-500"},null,-1)),t[115]||(t[115]=e("span",{class:"text-green-500"},"参数遍历分析工具 - 热力图",-1))],64)):(o(),u(D,{key:1},[t[116]||(t[116]=e("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),t[117]||(t[117]=e("span",{class:"text-gray-400"},"参数遍历分析工具 - 热力图",-1))],64))]),e("li",ni,[ke()>=1?(o(),u(D,{key:0},[t[118]||(t[118]=e("i",{class:"pi pi-check-circle text-green-500"},null,-1)),t[119]||(t[119]=e("span",{class:"text-green-500"},"参数遍历分析工具 - 参数平原",-1))],64)):(o(),u(D,{key:1},[t[120]||(t[120]=e("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),t[121]||(t[121]=e("span",{class:"text-gray-400"},"参数遍历分析工具 - 参数平原",-1))],64))])])]),e("div",{class:et(h.value.length>0?"space-y-6 mt-4":"space-y-0 mt-4")},[e("div",ri,[s.value.hold_period?(o(),u("div",ui,[e("div",ci,[e("div",di,[t[124]||(t[124]=e("span",{class:"font-bold"},"持仓周期 - 候选项",-1)),t[125]||(t[125]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),y(e("i",mi,null,512),[[q,{value:g(R)==="coin"?"选币持仓的时间，H代表小时，持仓几个小时，有1H到24H一共24种选择；D代表日，1D持仓一天。":"选股交易的持股周期，D表示持股几天，如3D就是持股3天。W表示持股一周，M表示持股一个月。具体参数参照股票周期预运算表的数据文件。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(d,{onClick:t[54]||(t[54]=l=>oe("hold_period")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),g(R)==="coin"?(o(),B(ze,{key:0,modelValue:s.value.hold_period,"onUpdate:modelValue":t[55]||(t[55]=l=>s.value.hold_period=l),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入持仓周期，输入如23H或7D，按回车添加",onValueChange:t[56]||(t[56]=l=>j(l)),class:"w-full"},null,8,["modelValue"])):(o(),B(hl,{key:1,modelValue:s.value.hold_period,"onUpdate:modelValue":t[57]||(t[57]=l=>s.value.hold_period=l),name:"hold_period",showClear:"",filter:"",filterMode:"lenient",options:Je(),placeholder:"请选择持仓周期（多选）",size:"small",class:"w-full",selectionMode:"multiple"},null,8,["modelValue","options"]))])):_("",!0),s.value.offset_list?(o(),u("div",pi,[e("div",fi,[e("div",vi,[t[126]||(t[126]=e("span",{class:"font-bold"},"offset_list - 候选项",-1)),y(e("i",gi,null,512),[[q,{value:g(R)==="coin"?"选择持仓的offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>":"与持股周期配合的具体offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(d,{onClick:t[58]||(t[58]=l=>oe("offset_list")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),e("div",_i,[s.value.offset_list.length>0?(o(),u("div",yi,[(o(!0),u(D,null,ve(s.value.offset_list,(l,U)=>(o(),u("div",{class:"flex items-center gap-2",key:U},[a(ft,{modelValue:s.value.offset_list[U],"onUpdate:modelValue":Te=>s.value.offset_list[U]=Te,name:`offset_list_${U}`,options:g(R)==="coin"?ge.value:V.value,optionLabel:"label",optionValue:"value",placeholder:"请选择offset（多选）",minSelectedLabels:1,class:"flex-1",size:"small",filter:"",maxSelectedLabels:5,"selected-items-label":l.length===(g(R)==="coin"?ge.value.length:V.value.length)?"全offset覆盖":`${l.length}个offset`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据",onBlur:gl},null,8,["modelValue","onUpdate:modelValue","name","options","selected-items-label"]),a(d,{icon:"pi pi-trash",severity:"danger",variant:"outlined",size:"small",rounded:"",onClick:Te=>Ze(U)},null,8,["onClick"])]))),128))])):_("",!0),g(vt)&&Q.value?(o(),B(jt,{key:1,severity:"error",size:"small",variant:"simple",class:"mt-1 mb-0"},{default:b(()=>[K(J(Q.value),1)]),_:1})):_("",!0),a(d,{label:"添加",icon:"pi pi-plus",size:"small",variant:"outlined",onClick:Z,class:"w-fit mt-2"})])])):_("",!0),g(R)==="stock"&&((st=s.value)!=null&&st.scalein_targets)?(o(),u("div",xi,[e("div",bi,[e("div",hi,[t[127]||(t[127]=e("span",{class:"font-bold"},"分批进场目标仓位(offset间仓位分配) - 候选项",-1)),y(e("i",wi,null,512),[[q,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(d,{onClick:t[59]||(t[59]=l=>oe("scalein_targets")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),g(vt)?(o(),u("div",ki,[s.value.scalein_targets&&s.value.scalein_targets.length>0?(o(),u("div",Ci,[(o(!0),u(D,null,ve(s.value.scalein_targets,(l,U)=>(o(),u("div",{class:"flex items-center gap-2 w-full",key:U},[a(ze,{modelValue:s.value.scalein_targets[U],"onUpdate:modelValue":Te=>s.value.scalein_targets[U]=Te,multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入0-1之间的小数(包括0和1)，按回车添加",onValueChange:Te=>je(Te,"scalein_targets",U),class:"w-full"},null,8,["modelValue","onUpdate:modelValue","onValueChange"]),a(d,{icon:"pi pi-trash",severity:"danger",variant:"outlined",size:"small",rounded:"",onClick:Te=>A(U)},null,8,["onClick"])]))),128))])):_("",!0),a(d,{label:"添加",icon:"pi pi-plus",size:"small",variant:"outlined",onClick:Ke,class:"w-fit mt-2"})])):_("",!0)])):_("",!0),g(R)==="coin"?(o(),u(D,{key:3},[s.value.market?(o(),u("div",$i,[e("div",Vi,[e("div",Ii,[t[128]||(t[128]=e("span",{class:"font-bold"},"选币范围(现货/合约) - 候选项",-1)),y(e("i",Li,null,512),[[q,{value:g(At),autoHide:!1,escape:!1,class:"min-w-80"},void 0,{bottom:!0}]])]),a(d,{onClick:t[60]||(t[60]=l=>oe("market")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ft,{modelValue:s.value.market,"onUpdate:modelValue":t[61]||(t[61]=l=>s.value.market=l),name:"market",options:Fe.value,optionLabel:"label",optionValue:"value",placeholder:"请选择选币范围(现货/合约)",minSelectedLabels:1,maxSelectedLabels:3,class:"w-full",size:"small",filter:"","selected-items-label":((it=(ot=s.value)==null?void 0:ot.market)==null?void 0:it.length)===Fe.value.length?"全选":`选了${(rt=(nt=s.value)==null?void 0:nt.market)==null?void 0:rt.length}个`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","options","selected-items-label"]),e("ul",Bi,[(o(!0),u(D,null,ve(s.value.market,(l,U)=>(o(),u("li",Di,J(l)+": "+J(g(Mt)[l])+"。 ",1))),256))])])):_("",!0),s.value.long_cap_weight?(o(),u("div",Si,[e("div",Oi,[e("div",zi,[t[129]||(t[129]=e("span",{class:"font-bold"},"多头权重 - 候选项",-1)),t[130]||(t[130]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),y(e("i",Ni,null,512),[[q,{value:"多头权重：多头在子策略的仓位占比，如1表示纯多策略",autoHide:!1,escape:!1,class:"min-w-90"}]])]),a(d,{onClick:t[62]||(t[62]=l=>oe("long_cap_weight")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ze,{modelValue:s.value.long_cap_weight,"onUpdate:modelValue":t[63]||(t[63]=l=>s.value.long_cap_weight=l),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入0-1之间的小数(包括0和1)，按回车添加",onValueChange:t[64]||(t[64]=l=>je(l,"long_cap_weight")),class:"w-full"},null,8,["modelValue"])])):_("",!0),s.value.short_cap_weight?(o(),u("div",Fi,[e("div",Ti,[e("div",Ui,[t[131]||(t[131]=e("span",{class:"font-bold"},"空头权重 - 候选项",-1)),t[132]||(t[132]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),y(e("i",ji,null,512),[[q,{value:"空头权重：空头在子策略的仓位占比，如1表示纯空策略",autoHide:!1,escape:!1,class:"min-w-90"}]])]),a(d,{onClick:t[65]||(t[65]=l=>oe("short_cap_weight")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ze,{modelValue:s.value.short_cap_weight,"onUpdate:modelValue":t[66]||(t[66]=l=>s.value.short_cap_weight=l),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入0-1之间的小数(包括0和1)，按回车添加",onValueChange:t[67]||(t[67]=l=>je(l,"short_cap_weight")),class:"w-full"},null,8,["modelValue"])])):_("",!0),s.value.long_select_coin_num?(o(),u("div",Pi,[e("div",Ai,[e("div",Mi,[t[133]||(t[133]=e("span",{class:"font-bold"},"多头选币数量 - 候选项",-1)),t[134]||(t[134]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),y(e("i",Hi,null,512),[[q,{value:"多头选币数量：支持整数（如10）、小数（如0.5）、区间（如1,5）。整数表示选币数量，小数表示选币比例，区间表示选币数量范围。",autoHide:!1,escape:!1,class:"min-w-90"}]])]),a(d,{onClick:t[68]||(t[68]=l=>oe("long_select_coin_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ze,{modelValue:s.value.long_select_coin_num,"onUpdate:modelValue":t[69]||(t[69]=l=>s.value.long_select_coin_num=l),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数、小数或区间（如1,5），按回车添加",onValueChange:t[70]||(t[70]=l=>je(l,"long_select_coin_num")),class:"w-full"},null,8,["modelValue"])])):_("",!0),s.value.short_select_coin_num?(o(),u("div",Ri,[e("div",qi,[e("div",Ei,[t[135]||(t[135]=e("span",{class:"font-bold"},"空头选币数量 - 候选项",-1)),t[136]||(t[136]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),y(e("i",Ji,null,512),[[q,{value:"空头选币数量：支持整数（如10）、小数（如0.5）、long_nums(和多头选币数量一致)、区间（如1,5）。整数表示选币数量，小数表示选币比例，区间表示选币数量范围。",autoHide:!1,escape:!1,class:"min-w-90"}]])]),a(d,{onClick:t[71]||(t[71]=l=>oe("short_select_coin_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ze,{modelValue:s.value.short_select_coin_num,"onUpdate:modelValue":t[72]||(t[72]=l=>s.value.short_select_coin_num=l),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数、小数、long_nums或区间（如1,5），按回车添加",onValueChange:t[73]||(t[73]=l=>je(l,"short_select_coin_num")),class:"w-full"},null,8,["modelValue"])])):_("",!0)],64)):_("",!0),g(R)==="stock"?(o(),u(D,{key:4},[s.value.select_num?(o(),u("div",Wi,[e("div",Zi,[e("div",Ki,[e("div",Gi,[t[137]||(t[137]=e("span",{class:"font-bold"},"选股数量 - 候选项",-1)),t[138]||(t[138]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),y(e("i",Xi,null,512),[[q,{value:"选股数量，可以是整数，如10就是选股10只。也可以是小数，如0.1就是选全市场10%的股票，约500+只。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(d,{onClick:t[74]||(t[74]=l=>oe("select_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ze,{modelValue:s.value.select_num,"onUpdate:modelValue":t[75]||(t[75]=l=>s.value.select_num=l),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数或0-1之间的小数，按回车添加",onValueChange:t[76]||(t[76]=l=>je(l,"select_num")),class:"w-full"},null,8,["modelValue"])])])):_("",!0),s.value.rebalance_time?(o(),u("div",Yi,[e("div",Qi,[e("div",en,[t[139]||(t[139]=e("span",{class:"font-bold"},"换仓时间 - 候选项",-1)),y(e("i",tn,null,512),[[q,{value:"换仓时机，根据持仓周期和offset交易时，在股票开始时间具体什么时刻卖出和买入。<br/>隔日换仓：'close-open'：offset结束日收盘前卖出，offset开始日开盘后买入；<br/>开盘日内换仓：'open'：offset当天实现换仓，开盘后先卖出再买入；<br/>指定时间换仓：按照5分钟为间隔指定交易日内换仓时间，如'0955-0955'是上午9:55先卖出，再买入。",autoHide:!1,escape:!1,class:"min-w-85"},void 0,{bottom:!0}]])]),a(d,{onClick:t[77]||(t[77]=l=>oe("rebalance_time")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ft,{modelValue:s.value.rebalance_time,"onUpdate:modelValue":t[78]||(t[78]=l=>s.value.rebalance_time=l),name:"rebalance_time",options:xe.value,placeholder:"请选择换仓时间（多选）",minSelectedLabels:1,class:"w-full",size:"small",filter:"",maxSelectedLabels:5,"selected-items-label":((ut=s.value.rebalance_time)==null?void 0:ut.length)===xe.value.length?"全部时间":`选择了${(ct=s.value.rebalance_time)==null?void 0:ct.length}个换仓时间`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","options","selected-items-label"])])):_("",!0),s.value.limit?(o(),u("div",ln,[e("div",an,[e("div",sn,[t[140]||(t[140]=e("span",{class:"font-semibold"},"择时进场阈值(limit) - 候选项",-1)),t[141]||(t[141]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),y(e("i",on,null,512),[[q,{value:"择时信号计算的选股范围，有三种形式：0，小数和整数。<br/>0，代表全市场（选股策略过滤过的全市场）。<br/>小数，如0.2代表全市场的20%。<br/>整数，如200代表200只股票。<br/>",autoHide:!1,escape:!1,class:"min-w-85"}]])]),a(d,{onClick:t[79]||(t[79]=l=>oe("limit")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ze,{modelValue:s.value.limit,"onUpdate:modelValue":t[80]||(t[80]=l=>s.value.limit=l),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数或0-1之间的小数，按回车添加",onValueChange:t[81]||(t[81]=l=>je(l,"limit")),class:"w-full"},null,8,["modelValue"])])):_("",!0),s.value.override_limit?(o(),u("div",nn,[e("div",rn,[e("div",un,[t[142]||(t[142]=e("span",{class:"font-semibold"},"择时离场阈值(limit) - 候选项",-1)),t[143]||(t[143]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),y(e("i",cn,null,512),[[q,{value:"择时信号计算的选股范围，有三种形式：0，小数和整数。<br/>0，代表全市场（选股策略过滤过的全市场）。<br/>小数，如0.2代表全市场的20%。<br/>整数，如200代表200只股票。<br/>",autoHide:!1,escape:!1,class:"min-w-85"}]])]),a(d,{onClick:t[82]||(t[82]=l=>oe("override_limit")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),a(ze,{modelValue:s.value.override_limit,"onUpdate:modelValue":t[83]||(t[83]=l=>s.value.override_limit=l),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数或0-1之间的小数，按回车添加",onValueChange:t[84]||(t[84]=l=>je(l,"override_limit")),class:"w-full"},null,8,["modelValue"])])):_("",!0)],64)):_("",!0)]),h.value.length>0?(o(),u("div",dn,[a(Me,{class:"m-0"}),t[147]||(t[147]=e("span",{class:"font-bold text-primary-600 dark:text-primary-500 mb-2 block"},"因子参数遍历",-1)),e("div",mn,[(o(!0),u(D,null,ve(h.value,l=>(o(),u("div",{key:l.id,class:"flex flex-col gap-y-2 p-3 bg-white dark:bg-neutral-700/50 border-1 border-primary-50 dark:border-0 rounded-md shadow-sm"},[e("div",pn,[e("div",fn,[e("span",{innerHTML:g(_t)(l.parsed,i.value)},null,8,vn),y(e("i",gn,null,512),[[q,{value:`该参数对应${l.parsed.paramsName}中第${l.parsed.row+1}行第${l.parsed.col+1}列的参数，支持输入多个候选项（数字或字符串类型是按回车添加）`,autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(d,{onClick:U=>Le(l.id,!0),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"},null,8,["onClick"])]),e("div",_n,[a(Pe,{modelValue:l.valueType,"onUpdate:modelValue":U=>l.valueType=U,options:E.value,optionLabel:"label",optionValue:"value",optionDisabled:"disabled",size:"small",class:"min-w-20 h-fit",placeholder:"请选择参数类型",onValueChange:U=>vl(U,l.id)},null,8,["modelValue","onUpdate:modelValue","options","onValueChange"]),l.valueType==="boolean"?(o(),B(ft,{key:0,modelValue:l.candidates,"onUpdate:modelValue":U=>l.candidates=U,options:S.value,"option-label":"label","option-value":"value",placeholder:"请选择参数类型（多选）",minSelectedLabels:1,size:"small",emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","onUpdate:modelValue","options"])):l.valueType==="object"&&l.candidates?(o(),u("div",yn,[e("div",xn,[t[144]||(t[144]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"起始值",-1)),a(F,{modelValue:l.candidates.start,"onUpdate:modelValue":U=>l.candidates.start=U,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:U=>X(l.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),e("div",bn,[t[145]||(t[145]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"结束值(包含起始值，不包含结束值)",-1)),a(F,{modelValue:l.candidates.end,"onUpdate:modelValue":U=>l.candidates.end=U,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:U=>X(l.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),e("div",hn,[t[146]||(t[146]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"步长",-1)),a(F,{modelValue:l.candidates.step,"onUpdate:modelValue":U=>l.candidates.step=U,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:U=>X(l.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])])):(o(),B(ze,{key:2,modelValue:l.candidates,"onUpdate:modelValue":U=>l.candidates=U,name:`dynamic_${l.id}`,multiple:"",fluid:"",typeahead:!1,size:"small",onValueChange:U=>fl(U,l.id,l.valueType),placeholder:"输入参数值,按回车添加"},null,8,["modelValue","onUpdate:modelValue","name","onValueChange"]))]),l.error?(o(),B(jt,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1 mb-0"},{default:b(()=>[K(J(l.error),1)]),_:2},1024)):_("",!0)]))),128))])])):_("",!0)],2)])]}),_:1})])]),_:1},8,["visible"]),a(Cl,{group:"editBatch"})],64)}}}),kn={class:"space-x-2"},Cn={class:"flex gap-x-4 max-h-full"},$n={class:"flex-7 min-w-0 max-h-full overflow-y-auto"},Vn={class:"text-center font-bold py-3"},In={class:"space-y-3 text-sm"},Ln={class:"flex gap-2 flex-wrap"},Bn={class:"flex-1 flex flex-col gap-2"},Dn={class:"text-sm space-x-1 flex items-center"},Sn={class:"pi pi-question-circle cursor-pointer"},On={key:0,class:"flex-1 flex flex-col gap-2"},zn={class:"text-sm space-x-1 flex items-center"},Nn={class:"pi pi-question-circle cursor-pointer"},Fn={key:0,class:"flex-1 flex flex-col gap-2"},Tn={class:"text-sm space-x-1 flex items-center"},Un={class:"pi pi-question-circle cursor-pointer"},jn={key:0,class:"flex flex-wrap gap-2"},Pn={key:1},An={key:1,class:"flex flex-col gap-2"},Mn={class:"text-sm flex gap-4 items-center"},Hn={class:"flex items-center gap-1"},Rn={class:"pi pi-question-circle cursor-pointer"},qn={key:2,class:"flex flex-col gap-2"},En={class:"text-sm space-x-1 flex items-center"},Jn={class:"pi pi-question-circle cursor-pointer"},Wn={class:"flex gap-1 flex-wrap"},Zn={key:0,class:"cursor-pointer text-xs text-primary-500 dark:text-primary-300"},Kn={class:"flex items-center gap-1"},Gn={class:"pi pi-question-circle cursor-pointer"},Xn={class:"flex flex-col gap-3"},Yn={class:"flex items-center gap-2"},Qn={for:"other-section-toggle",class:"cursor-pointer font-semibold"},er={key:0,class:"flex flex-col gap-2"},tr={class:"flex items-center gap-4 flex-wrap"},lr={class:"flex-1 flex flex-col gap-2"},ar={class:"text-sm space-x-1 flex items-center"},sr={class:"pi pi-question-circle cursor-pointer"},or={class:"flex-1 flex flex-col gap-2"},ir={class:"text-sm space-x-1 flex items-center"},nr={class:"pi pi-question-circle cursor-pointer"},rr={class:"flex-1 flex flex-col gap-2"},ur={class:"text-sm space-x-1 flex items-center"},cr={class:"pi pi-question-circle cursor-pointer"},dr={class:"flex-1 flex flex-col gap-2"},mr={class:"text-sm space-x-1 flex items-center"},pr={class:"pi pi-question-circle cursor-pointer"},fr={class:"w-full"},vr={class:"space-y-2"},gr={class:"text-sm space-y-1"},_r={class:"flex items-center gap-2"},yr={class:"flex items-center gap-2"},xr={key:0,class:"flex flex-col gap-4"},br={class:"space-y-4 -mt-2"},hr={class:"text-sm font-medium flex justify-between items-center gap-1 flex-wrap"},wr={class:"flex items-center space-x-1"},kr=["innerHTML"],Cr={class:"pi pi-question-circle cursor-pointer text-gray-400 ml-1"},$r={class:"flex items-end gap-2 flex-wrap"},Vr={key:1,class:"flex gap-2 flex-wrap"},Ir={class:"flex flex-col gap-1"},Lr={class:"flex flex-col gap-1"},Br={class:"flex flex-col gap-1"},Dr=yt({__name:"positionEditBatch.tmpl",emits:["refreshConfigInfo"],setup(r,{expose:c,emit:O}){const z=xt(),se=zt(),x=O,ee=m(!1),de=m(!1),le=m(!1),i=m({name:"",hold_period:"1H",params:{cap_ratios:[],factor_list:[],rotation_period:"",offset_list:[],rotation_group:null},symbol_ratio_limit:null}),ge=m(null),V=m([]),ie=m([]),Se=m(null),Y=m(Wt),L=m([]),G=m([]),M=m([{label:"数字",value:"number"},{label:"字符串",value:"string"},{label:"布尔",value:"boolean"},{label:"区间",value:"object"}]),me=m([{label:"true",value:!0},{label:"false",value:!1}]),we=m([{label:"空仓填充",value:"empty"},{label:"等权填充",value:"combine"}]),Ce=k=>{if(k==null)return!1;const{start:n,end:s,step:h}=k,I=Number(n),E=Number(s),S=Number(h);return!([I,E,S].some(Q=>isNaN(Q))||S<=0||S>s||I>=E)},ue=async k=>{const n=L.value.findIndex(I=>I.id===k);if(n===-1)return;const s=L.value[n];await Nt();const h=s.candidates;Ce(h)?s.error="":s.error="区间不合法：请填写有效的起始、结束与步长（0<步长<结束值，起始<结束）"},$e=()=>{i.value.params.rotation_group&&(i.value.params.rotation_group=Object.entries(i.value.params.rotation_group).map(([k,n])=>({group:k,...n,override:n.override||{type:"",group_names:[]}})))},Ve=qe(()=>{var n;const k=[];return(n=i.value.params)!=null&&n.rotation_group&&Array.isArray(i.value.params.rotation_group)&&i.value.params.rotation_group.forEach(s=>{s.group&&s.group.trim()!==""&&k.push({label:s.group,value:s.group})}),k.push(..._e.value),k}),_e=qe(()=>{var k;return((k=Y.value.strategy_info)==null?void 0:k.strategy_pool).map((n,s)=>({label:`S${s+1}_${n.name}`,value:n.name}))}),Oe=async(k,n)=>{var s;Y.value=JSON.parse(JSON.stringify(n)),await te(),le.value=!1,i.value=JSON.parse(JSON.stringify(k)),i.value.symbol_ratio_limit?ee.value=!0:ee.value=!1,(s=i.value.params)!=null&&s.rotation_group&&$e(),i.value.symbol_ratio_limit?(ee.value=!0,i.value.symbol_ratio_limit.long||(i.value.symbol_ratio_limit.long={rate_limit:null,fill_strategy:""}),i.value.symbol_ratio_limit.short||(i.value.symbol_ratio_limit.short={rate_limit:null,fill_strategy:""})):ee.value=!1,L.value=[],G.value=[],Object.keys(Y.value).forEach(h=>{var I;if(h.includes("[")){const E=tt(h);if(!L.value.some(Q=>Q.batchName===h)){let Q="number";lt(Y.value[h])==="object"?Q="object":Q=lt((I=Y.value[h])==null?void 0:I[0])||"number",L.value.push({id:h,batchName:h,parsed:E,valueType:Q,candidates:Y.value[h]}),G.value.push(h)}}}),de.value=!0},te=async()=>{const k=await Zt();k.result===!0&&(Se.value=k.data,V.value=[],ie.value=[],k.data!==null&&Object.keys(k.data).length>0&&(Object.keys(k.data).forEach(s=>{const h=k.data;V.value.push({key:s,label:s==="factors"?"时序因子":"截面因子",selectable:!1,children:h[s].map(I=>({key:I.name,label:I.name}))||[]})}),ie.value=JSON.parse(JSON.stringify(V.value))))},ye=(k,n,s)=>{if(!k||!k.length)return;const h=L.value.findIndex(I=>I.id===n);if(h!==-1&&s==="number"){const I=[...k],E=I[I.length-1];isNaN(Number(E))?I.pop():I[I.length-1]=Number(E),L.value[h].candidates=I}},w=(k,n)=>{const s=L.value.findIndex(h=>h.id===n);s!==-1&&(k==="object"?L.value[s].candidates={start:null,end:null,step:null}:L.value[s].candidates=[])},v=()=>{let k=0;return Object.keys(Y.value).forEach(n=>{n!=="name"&&n!=="search_name"&&n!=="strategy_info"&&!n.includes("[")&&Y.value[n]!==null&&k++}),L.value.length>0&&(k+=L.value.length),k},N=k=>{if(v()>=3){z.add({severity:"warn",summary:"每个遍历任务最多只能添加3个参数",life:2e3});return}if(k.includes("[")){const n=tt(k);if(!n){z.add({severity:"error",summary:"参数格式错误",detail:"请检查动态参数格式是否正确",life:2e3});return}if(L.value.some(h=>h.batchName===k)){z.add({severity:"info",summary:"已添加该参数",detail:"该动态参数已存在，无需重复添加",life:2e3});return}L.value.push({id:k,batchName:k,parsed:n,valueType:"number",candidates:[]}),G.value.includes(k)||G.value.push(k)}else Y.value[k]==null&&(Y.value[k]=k==="hold_period"?{}:[])},H=(k,n=!1)=>{L.value=L.value.filter(s=>s.id!==k),n&&(G.value=G.value.filter(s=>s!==k))},W=async()=>{if(L.value.some(E=>E.error)){z.add({severity:"error",summary:"动态参数输入有误",detail:"请修正动态参数中的错误后再提交",life:3e3});return}let n={};Object.keys(Y.value).forEach(E=>{E.includes("[")||(n[E]=Y.value[E])});let s={...n,...L.value.reduce((E,S)=>(E[S.batchName]=S.candidates,E),{})},h=0;if(Object.keys(s).forEach(E=>{(JSON.stringify(s[E])==="[]"||s[E]===null)&&h++}),h===Object.keys(s).length-3){z.add({severity:"error",summary:"请至少配置一个遍历参数,才能保存！",life:3e3});return}(await Kt(s)).result===!0&&(z.add({severity:"success",summary:"保存成功！",life:3e3}),de.value=!1,x("refreshConfigInfo"))},ae=()=>{se.require({group:"editBatch",message:"当前的修改还未保存，确定要关闭吗？",header:"确认关闭",icon:"pi pi-exclamation-triangle text-yellow-500",rejectProps:{label:"取消",outlined:!0},acceptProps:{label:"确定",severity:"secondary"},accept:()=>{de.value=!1},reject:()=>{}})};return c({openDrawer:Oe}),(k,n)=>{const s=wt,h=Tt,I=Ut,E=nl,S=Yt,Q=el,Fe=al,Ie=il,$=Xt,p=Qt,X=Ft,xe=ht,Ue=kt,Ee=sl,at=Ct,Je=ll,We=ol,pe=bt;return o(),u(D,null,[a(Je,{visible:de.value,"onUpdate:visible":n[7]||(n[7]=j=>de.value=j),header:"策略遍历配置编辑",dismissable:!1,position:"full",class:"w-[50vw]",pt:{content:{class:"flex flex-col"},header:{class:"py-3"}}},{closebutton:b(()=>[e("div",kn,[a(s,{label:"保存",size:"small",onClick:W,loading:le.value},null,8,["loading"]),a(s,{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:ae})])]),default:b(()=>[e("div",Cn,[e("div",$n,[a(xe,{class:"border-1 border-gray-200 dark:border-neutral-700",pt:{body:{class:"pt-0"}}},{header:b(()=>[e("div",Vn,J(g(Pl)[i.value.name]||i.value.name),1)]),content:b(()=>[a(X,{ref_key:"refForm",ref:ge,class:"space-y-4"},{default:b(j=>{var Z,Ze,Ke;return[e("div",In,[e("div",Ln,[e("div",Bn,[e("label",Dn,[n[8]||(n[8]=e("span",{class:"text-red-500"},"*",-1)),n[9]||(n[9]=e("span",{class:"font-bold"},"持仓周期",-1)),y(e("i",Sn,null,512),[[pe,{value:g(R)==="positionCoin"?"选币持仓的时间，H代表小时，持仓几个小时，有1H到24H一共24种选择；D代表日，1D持仓一天。":"选股交易的持股周期，D表示持股几天，如3D就是持股3天。W表示持股一周，M表示持股一个月。具体参数参照股票周期预运算表的数据文件。",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(h,{modelValue:i.value.hold_period,"onUpdate:modelValue":n[0]||(n[0]=A=>i.value.hold_period=A),size:"small",name:"hold_period",editable:"",disabled:!0},null,8,["modelValue"])]),[g(Ne).rotationOffset,g(Ne).grounpRotation,g(Ne).grounpRotationOverride].includes(i.value.name)?(o(),u("div",On,[e("label",zn,[n[10]||(n[10]=e("span",{class:"text-red-500"},"*",-1)),n[11]||(n[11]=e("span",{class:"font-bold"},"轮动周期",-1)),y(e("i",Nn,null,512),[[pe,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(h,{modelValue:i.value.params.rotation_period,"onUpdate:modelValue":n[1]||(n[1]=A=>i.value.params.rotation_period=A),editable:"",size:"small",disabled:""},null,8,["modelValue"])])):_("",!0)]),[g(Ne).rotationOffset,g(Ne).grounpRotation,g(Ne).grounpRotationOverride].includes(i.value.name)?(o(),u("div",Fn,[e("label",Tn,[n[12]||(n[12]=e("span",{class:"text-red-500"},"*",-1)),n[13]||(n[13]=e("span",{class:"font-bold"},"offset_list",-1)),y(e("i",Un,null,512),[[pe,{value:g(R)==="positionCoin"?"选择持仓的offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>":"与持股周期配合的具体offset，具体原理请参考：<a href='https://bbs.quantclass.cn/thread/46812' target='_blank' class='text-primary-500 hover:underline'>【小白入门】持仓周期，offset和分钟偏移——入门基础知识系列 - 量化小论坛</a>",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),(Z=i.value.params)!=null&&Z.offset_list&&((Ke=(Ze=i.value.params)==null?void 0:Ze.offset_list)==null?void 0:Ke.length)>0?(o(),u("div",jn,[(o(!0),u(D,null,ve(i.value.params.offset_list,(A,T)=>(o(),B(I,{key:A,class:"font-medium text-xs",severity:"secondary"},{default:b(()=>[K(J(A),1)]),_:2},1024))),128))])):(o(),u("div",Pn,"无"))])):_("",!0),i.value.name!==g(Ne).fixed?(o(),u("div",An,[e("div",Mn,[e("div",Hn,[n[14]||(n[14]=e("span",{class:"text-red-500"},"*",-1)),n[15]||(n[15]=e("span",{class:"font-bold"},"因子配置",-1)),y(e("i",Rn,null,512),[[pe,{value:(g(R)==="positionCoin",""),autoHide:!1,escape:!1},void 0,{bottom:!0}]])])]),a(De,{propkey:"1",factorList:i.value.params.factor_list||[],title:"",factorSelect:"因子",factorNameOpetions:V.value,allFactorInfo:Se.value,isDemoStrategy:!1,BatchParamsNameList:G.value,paramsName:"factor_list",disabled:!0,isBatchItem:!0,BatchLength:v(),onAddFactorBatchItem:N,onRemoveFactorBatchItem:H},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","BatchLength"])])):_("",!0),[g(Ne).grounpRotation,g(Ne).grounpRotationOverride].includes(i.value.name)?(o(),u("div",qn,[e("label",En,[n[16]||(n[16]=e("span",{class:"text-red-500"},"*",-1)),n[17]||(n[17]=e("span",{class:"font-bold"},"分组配置",-1)),y(e("i",Jn,null,512),[[pe,{value:(g(R)==="positionCoin",""),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(Ie,{showGridlines:"",value:i.value.params.rotation_group,class:"editable-cells-table text-xs",paginator:"",rows:5},{default:b(()=>[a(E,{field:"group",header:"组名",class:"w-[5%]",pt:{bodyCell:"px-3 py-1",headerCell:"px-3"}}),a(E,{field:"strategy_names",header:"策略列表",class:"w-[40%]",pt:{bodyCell:"px-2 py-1",headerCell:"px-3"}},{body:b(({data:A})=>[e("div",Wn,[(o(!0),u(D,null,ve(A.strategy_names.slice(0,2),(T,fe)=>(o(),B(I,{key:T,class:"font-medium text-xs",severity:"secondary"},{default:b(()=>[K(J(T),1)]),_:2},1024))),128)),A.strategy_names.length>2?y((o(),u("span",Zn,n[18]||(n[18]=[K("...")]))),[[pe,{value:`全部：${A.strategy_names.join(", ")}`,autoHide:!1},void 0,{bottom:!0}]]):_("",!0)])]),_:1}),a(E,{field:"cap_ratio",header:"权重",class:"w-[5%]",pt:{bodyCell:"px-2 py-1",headerCell:"px-3"}},{body:b(({data:A,index:T})=>[a(S,{modelValue:A.cap_ratio,"onUpdate:modelValue":fe=>A.cap_ratio=fe,mode:"decimal",showButtons:"",min:0,max:1,minFractionDigits:0,maxFractionDigits:3,step:.1,size:"small",disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i.value.name===g(Ne).grounpRotationOverride?(o(),u(D,{key:0},[a(E,{field:"override.group_names",header:"选择填充策略/组",class:"w-[20%]",pt:{bodyCell:"px-2 py-1",headerCell:"px-3"}},{body:b(({data:A,index:T})=>[a(Q,{modelValue:A.override.group_names,"onUpdate:modelValue":fe=>A.override.group_names=fe,filter:"",options:Ve.value,placeholder:"选择填充",class:"w-full",size:"small",optionLabel:"label",optionValue:"value",disabled:""},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),a(E,{field:"override.type",header:"",class:"w-[30%]",pt:{bodyCell:"px-2 py-1",headerCell:"px-3"}},{header:b(()=>[e("div",Kn,[n[19]||(n[19]=e("span",{class:"font-bold"},"填充方式",-1)),y(e("i",Gn,null,512),[[pe,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])])]),body:b(({data:A,index:T})=>[a(Fe,{options:we.value,modelValue:A.override.type,"onUpdate:modelValue":fe=>A.override.type=fe,optionLabel:"label",optionValue:"value",disabled:"",size:"small"},null,8,["options","modelValue","onUpdate:modelValue"])]),_:1})],64)):_("",!0)]),_:1},8,["value"]),a($,{class:"hidden",name:"rotation_group"})])):_("",!0),e("div",Xn,[e("div",Yn,[a(p,{modelValue:ee.value,"onUpdate:modelValue":n[2]||(n[2]=A=>ee.value=A),inputId:"other-section-toggle","aria-label":"分域配置启用开关",disabled:""},null,8,["modelValue"]),e("label",Qn,J(ee.value?"限制单一币种":"不限制单一币种"),1)]),ee.value?(o(),u("div",er,[e("div",tr,[e("div",lr,[e("label",ar,[n[20]||(n[20]=e("span",{class:"text-red-500"},"*",-1)),n[21]||(n[21]=e("span",{class:"font-bold"},"多头权重",-1)),y(e("i",sr,null,512),[[pe,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(S,{modelValue:i.value.symbol_ratio_limit.long.rate_limit,"onUpdate:modelValue":n[3]||(n[3]=A=>i.value.symbol_ratio_limit.long.rate_limit=A),name:"long_rate_limit",size:"small",min:0,max:1,step:.1,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",disabled:""},null,8,["modelValue"])]),e("div",or,[e("label",ir,[n[22]||(n[22]=e("span",{class:"text-red-500"},"*",-1)),n[23]||(n[23]=e("span",{class:"font-bold"},"多头策略",-1)),y(e("i",nr,null,512),[[pe,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(h,{modelValue:i.value.symbol_ratio_limit.long.fill_strategy,"onUpdate:modelValue":n[4]||(n[4]=A=>i.value.symbol_ratio_limit.long.fill_strategy=A),options:_e.value,size:"small",name:"long_fill_strategy",optionLabel:"label",optionValue:"value",placeholder:"请选择多头策略",disabled:""},null,8,["modelValue","options"])]),e("div",rr,[e("label",ur,[n[24]||(n[24]=e("span",{class:"text-red-500"},"*",-1)),n[25]||(n[25]=e("span",{class:"font-bold"},"空头权重",-1)),y(e("i",cr,null,512),[[pe,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(S,{modelValue:i.value.symbol_ratio_limit.short.rate_limit,"onUpdate:modelValue":n[5]||(n[5]=A=>i.value.symbol_ratio_limit.short.rate_limit=A),name:"short_rate_limit",mode:"decimal",showButtons:"",size:"small",min:0,max:1,step:.1,minFractionDigits:0,maxFractionDigits:3,disabled:""},null,8,["modelValue"])]),e("div",dr,[e("label",mr,[n[26]||(n[26]=e("span",{class:"text-red-500"},"*",-1)),n[27]||(n[27]=e("span",{class:"font-bold"},"空头策略",-1)),y(e("i",pr,null,512),[[pe,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(h,{modelValue:i.value.symbol_ratio_limit.short.fill_strategy,"onUpdate:modelValue":n[6]||(n[6]=A=>i.value.symbol_ratio_limit.short.fill_strategy=A),options:_e.value,size:"small",name:"short_fill_strategy",optionLabel:"label",optionValue:"value",placeholder:"请选择空头策略",disabled:""},null,8,["modelValue","options"])])])])):_("",!0)])])]}),_:1},512)]),_:1})]),a(xe,{class:"flex-3 max-h-full overflow-y-auto min-w-0 h-fit sticky top-2 right-0 border-1 shadow-sm border-primary-200 dark:border-gray-700"},{content:b(()=>[e("div",fr,[e("div",vr,[n[36]||(n[36]=e("h1",{class:"font-bold text-primary-600 dark:text-primary-500"}," 遍历参数 ",-1)),n[37]||(n[37]=e("h2",{class:"text-sm text-gray-500 dark:text-gray-400"}," 在左侧策略信息区域，点击「+ 遍历」按钮即可添加需要遍历参数的候选项 ",-1)),e("ul",gr,[e("li",_r,[v()>=2?(o(),u(D,{key:0},[n[28]||(n[28]=e("i",{class:"pi pi-check-circle text-green-500"},null,-1)),n[29]||(n[29]=e("span",{class:"text-green-500"},"参数遍历分析工具 - 热力图",-1))],64)):(o(),u(D,{key:1},[n[30]||(n[30]=e("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),n[31]||(n[31]=e("span",{class:"text-gray-400"},"参数遍历分析工具 - 热力图",-1))],64))]),e("li",yr,[v()>=1?(o(),u(D,{key:0},[n[32]||(n[32]=e("i",{class:"pi pi-check-circle text-green-500"},null,-1)),n[33]||(n[33]=e("span",{class:"text-green-500"},"参数遍历分析工具 - 参数平原",-1))],64)):(o(),u(D,{key:1},[n[34]||(n[34]=e("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),n[35]||(n[35]=e("span",{class:"text-gray-400"},"参数遍历分析工具 - 参数平原",-1))],64))])])]),e("div",{class:et(L.value.length>0?"space-y-6 mt-4":"space-y-0 mt-4")},[L.value.length>0?(o(),u("div",xr,[a(Ue,{class:"m-0"}),n[41]||(n[41]=e("span",{class:"font-bold text-primary-600 dark:text-primary-500 mb-2 block"},"因子参数遍历",-1)),e("div",br,[(o(!0),u(D,null,ve(L.value,j=>(o(),u("div",{key:j.id,class:"flex flex-col gap-y-2 p-3 bg-white dark:bg-neutral-700/50 border-1 border-primary-50 dark:border-0 rounded-md shadow-sm"},[e("div",hr,[e("div",wr,[e("span",{innerHTML:g(_t)(j.parsed,i.value)},null,8,kr),y(e("i",Cr,null,512),[[pe,{value:`该参数对应${j.parsed.paramsName}中第${j.parsed.row+1}行第${j.parsed.col+1}列的参数，支持输入多个候选项（按回车添加）`,autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),a(s,{onClick:Z=>H(j.id,!0),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"},null,8,["onClick"])]),e("div",$r,[a(h,{modelValue:j.valueType,"onUpdate:modelValue":Z=>j.valueType=Z,options:M.value,optionLabel:"label",optionValue:"value",optionDisabled:"disabled",size:"small",class:"min-w-20 h-fit",placeholder:"请选择参数类型",onValueChange:Z=>w(Z,j.id)},null,8,["modelValue","onUpdate:modelValue","options","onValueChange"]),j.valueType==="boolean"?(o(),B(Q,{key:0,modelValue:j.candidates,"onUpdate:modelValue":Z=>j.candidates=Z,options:me.value,"option-label":"label","option-value":"value",placeholder:"请选择参数类型（多选）",minSelectedLabels:1,size:"small",emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","onUpdate:modelValue","options"])):j.valueType==="object"&&j.candidates?(o(),u("div",Vr,[e("div",Ir,[n[38]||(n[38]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"起始值",-1)),a(S,{modelValue:j.candidates.start,"onUpdate:modelValue":Z=>j.candidates.start=Z,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:Z=>ue(j.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),e("div",Lr,[n[39]||(n[39]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"结束值(包含起始值，不包含结束值)",-1)),a(S,{modelValue:j.candidates.end,"onUpdate:modelValue":Z=>j.candidates.end=Z,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:Z=>ue(j.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),e("div",Br,[n[40]||(n[40]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"步长",-1)),a(S,{modelValue:j.candidates.step,"onUpdate:modelValue":Z=>j.candidates.step=Z,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:Z=>ue(j.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])])):(o(),B(Ee,{key:2,modelValue:j.candidates,"onUpdate:modelValue":Z=>j.candidates=Z,name:`dynamic_${j.id}`,multiple:"",fluid:"",typeahead:!1,size:"small",onValueChange:Z=>ye(Z,j.id,j.valueType),placeholder:"输入参数值,按回车添加"},null,8,["modelValue","onUpdate:modelValue","name","onValueChange"]))]),j.error?(o(),B(at,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1 mb-0"},{default:b(()=>[K(J(j.error),1)]),_:2},1024)):_("",!0)]))),128))])])):_("",!0)],2)])]),_:1})])]),_:1},8,["visible"]),a(We,{group:"editBatch"})],64)}}}),Sr={class:"px-5 py-3"},Or={class:"px-4 py-2 space-y-3"},zr={class:"font-semibold flex justify-between items-center"},Nr={class:"flex items-center gap-2"},Fr=["innerHTML"],Tr={class:"space-y-8"},Ur={class:"flex flex-col gap-y-2"},jr={class:"text-sm flex items-center gap-1"},Pr={class:"font-bold"},Ar={key:0,class:"flex flex-col gap-y-2"},Mr={class:"flex flex-col gap-y-2"},Hr={key:1},Rr={class:"flex gap-2"},qr={class:"text-sm flex items-center gap-1"},Er={class:"font-bold"},Jr={class:"flex justify-between items-center"},Wr={class:"text-xs text-gray-500 dark:text-gray-300"},Zr={class:"space-x-2"},Kr=yt({__name:"traversalConfig",props:{currentTraversalName:{}},emits:["refreshConfigInfo"],setup(r,{expose:c,emit:O}){const z=xt(),se=m(),x=m(),ee=O,de=m([]),le=m(St()),i=m(!1),ge=m(!1),V=m({main_factor:"",sub_factor:"",factor_dict:{},filter_list:[],mode:"",strategy_info:{strategy_name:0,start_time:void 0,end_time:void 0,add_factor_main_list:[],add_factor_sub_list:[]},param_search_info:{param_x:"",param_y:"",evaluation_indicator:"",limit_dict:{}},strategy_results:[]}),ie=m([]),Se=m(null),Y=m(!1),L=m();Gt(async()=>{const w=await Al();w.result===!0?de.value=w.data:de.value=[]});const G=w=>{le.value=JSON.parse(JSON.stringify(w)),i.value=!1,M()},M=()=>{ie.value=[];let w=Ht;if(le.value){let v=le.value;Object.keys(v).map(N=>{N.includes("[")&&v[N]!==null?ie.value.push({label:_t(tt(N),me(),!1),value:N}):!["name","search_name","strategy_info"].includes(N)&&v[N]!==null&&ie.value.push({label:w[N]||N,value:N})})}},me=()=>{var v;let w;return w=((v=le.value.strategy_info)==null?void 0:v.strategy_config)||{},w},we=()=>{var w,v;x.value&&((v=x.value)==null||v.openDrawer((w=le.value.strategy_info)==null?void 0:w.strategy_config,le.value))},Ce=qe(()=>{const w=Math.max(...Object.values(le.value).map(H=>lt(H)==="object"?Array.from({length:Math.ceil((H.end-H.start)/H.step)},(W,ae)=>H.start+ae*H.step).length:Array.isArray(H)?H.length:0));let v=Ht,N=JSON.parse(JSON.stringify(le.value));return delete N.name,delete N.search_name,delete N.strategy_info,Object.entries(N).map(([H,W])=>{W===null&&delete N[H]}),Object.entries(N).map(([H,W])=>{let ae={属性:"",参数:""};return H.includes("[")?ae={属性:`${_t(tt(H),me())}`,参数:H}:ae={属性:v[H]||H,参数:H},lt(W)==="object"&&(W=Array.from({length:Math.ceil((W.end-W.start)/W.step)},(k,n)=>W.start+n*W.step)),[...Array(w)].forEach((k,n)=>{const s=W[n];ae[`候选项${n+1}`]=Array.isArray(s)?s.map(h=>h.toString()).join(","):(s==null?void 0:s.toString())??""}),ae})}),ue=qe(()=>Ce.value.length?Object.keys(Ce.value[0]).filter(w=>w.startsWith("候选项")):[]),$e=async({values:w})=>{const v={};V.value.param_search_info.param_x||(v.param_x=[{message:"分析参数是必选项"}]),V.value.param_search_info.evaluation_indicator||(v.evaluation_indicator=[{message:"分析指标是必选项"}]),ge.value?(V.value.param_search_info.param_y||(v.param_y=[{message:"Y轴参数是必选项"}]),V.value.param_search_info.param_x&&V.value.param_search_info.param_y&&V.value.param_search_info.param_x===V.value.param_search_info.param_y&&(v.param_x=[{message:"X轴和Y轴参数不能相同"}],v.param_y=[{message:"X轴和Y轴参数不能相同"}])):V.value.param_search_info.param_y="";const N=V.value.param_search_info.limit_dict;return N&&Object.entries(N).forEach(([H,W])=>{W||(v[`${H}`]=[{message:`请为${Lt(H,me())}选择一个固定值`}])}),{values:w,errors:v}},Ve=(w,v)=>{w===!1?(V.value={...JSON.parse(JSON.stringify(V.value)),param_search_info:{param_x:v,param_y:"",evaluation_indicator:"",limit_dict:{}}},ye()):V.value={...JSON.parse(JSON.stringify(V.value)),param_search_info:{param_x:"",param_y:"",evaluation_indicator:"",limit_dict:{}}},L.value=ql(le.value),ge.value=w,i.value=!0},_e=()=>{var w;(w=Se.value)==null||w.submit()};let Oe={coin:Hl.tool2,stock:Ml.tool4,positionCoin:Rt.tool1,positionStock:Rt.tool1};const te=async({valid:w})=>{if(w){Y.value=!0;let v=Oe[R];if((await El(v,V.value)).result===!0){z.add({severity:"success",summary:"保存成功！",life:3e3});const H=await Jl(v);Y.value=!1,H.result===!0&&(z.add({severity:"success",summary:"运行成功！",life:3e3}),i.value=!1)}else Y.value=!1}},ye=()=>{const w=Wl(le.value,V.value);V.value.param_search_info.limit_dict||(V.value.param_search_info.limit_dict={}),w&&typeof w=="object"&&Object.keys(w).forEach(v=>{Object.hasOwn(V.value.param_search_info.limit_dict,v)&&(Array.isArray(V.value.param_search_info.limit_dict[v])?w[v]=V.value.param_search_info.limit_dict[v][0]:w[v]=V.value.param_search_info.limit_dict[v])}),V.value.param_search_info.limit_dict=w};return c({loadData:G}),(w,v)=>{const N=wt,H=kt,W=nl,ae=il,k=ht,n=Tt,s=Ct,h=Ft,I=tl,E=bt;return o(),u(D,null,[e("div",Sr,[a(k,{class:"border-1 border-gray-100 dark:border-neutral-700",pt:{body:{class:"pt-0"}}},{header:b(()=>[e("div",Or,[e("div",zr,[v[8]||(v[8]=e("span",{class:"text-primary-600 dark:text-primary-50"},"策略遍历配置",-1)),e("div",Nr,[w.currentTraversalName==="config"?y((o(),B(N,{key:0,icon:"pi pi-caret-right",size:"small",variant:"outlined",class:"text-xs px-1.5 py-1 gap-0.5",label:"生成热力图",disabled:ie.value.length<2,onClick:v[0]||(v[0]=S=>Ve(!0))},null,8,["disabled"])),[[E,{value:ie.value.length<2?"至少遍历两个参数才能生成热力图":"",autoHide:!1,escape:!1,class:"min-w-54"}]]):_("",!0),a(N,{icon:"pi pi-cog",size:"small",variant:"outlined",class:"py-1 px-2",label:"设置",onClick:we})])]),a(H,{class:"m-0"})])]),content:b(()=>[a(ae,{value:Ce.value,class:"text-xs",responsiveLayout:"scroll",pt:{headerRow:{class:"text-sm"}},scrollable:""},{empty:b(()=>v[9]||(v[9]=[e("div",{class:"flex items-center justify-center h-full"},[e("img",{src:Ot,class:"w-40 h-auto"})],-1)])),default:b(()=>[a(W,{field:"属性",header:"属性",frozen:"",class:"min-w-35 font-semibold z-10"},{body:b(({data:S})=>[e("div",{innerHTML:S.属性,class:"leading-5"},null,8,Fr)]),_:1}),w.currentTraversalName==="config"?(o(),B(W,{key:0,field:"操作",header:"操作",class:"min-w-45 font-semibold"},{body:b(({data:S})=>[a(N,{size:"small",icon:"pi pi-caret-right",variant:"outlined",class:"text-xs px-1.5 py-1 gap-0.5",label:"生成参数平原图",onClick:Q=>Ve(!1,S.参数)},null,8,["onClick"])]),_:1})):_("",!0),a(W,{field:"参数",header:"参数"}),(o(!0),u(D,null,ve(ue.value,S=>(o(),B(W,{key:S,field:S,header:S,class:"min-w-30"},null,8,["field","header"]))),128))]),_:1},8,["value"])]),_:1})]),a(wn,{ref_key:"refEditBatchTmpl",ref:se,onRefreshConfigInfo:v[1]||(v[1]=S=>ee("refreshConfigInfo"))},null,512),a(Dr,{ref_key:"refPositionEditBatchTmpl",ref:x,onRefreshConfigInfo:v[2]||(v[2]=S=>ee("refreshConfigInfo"))},null,512),a(I,{visible:i.value,"onUpdate:visible":v[7]||(v[7]=S=>i.value=S),modal:!0,draggable:!1,header:ge.value?"生成热力图":"生成参数平原图",class:"max-w-[90vw] min-w-[40vw]"},{default:b(()=>[e("div",Tr,[a(h,{resolver:$e,ref_key:"refForm",ref:Se,onSubmit:te,class:"flex-1 flex flex-col space-y-3"},{default:b(S=>{var Q,Fe,Ie;return[e("div",Ur,[e("label",jr,[v[10]||(v[10]=e("span",{class:"text-red-500"},"*",-1)),e("span",Pr,J(ge.value?"X轴参数":"分析参数"),1)]),a(n,{size:"small",name:"param_x",modelValue:V.value.param_search_info.param_x,"onUpdate:modelValue":v[3]||(v[3]=$=>V.value.param_search_info.param_x=$),optionLabel:"label",optionValue:"value",placeholder:"请选择要分析的参数",checkmark:"",highlightOnSelect:!1,class:"w-full",options:ie.value,showClear:"",disabled:!ge.value,onValueChange:ye},null,8,["modelValue","options","disabled"]),(Q=S.param_x)!=null&&Q.invalid?(o(),B(s,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var $;return[K(J(($=S.param_x.error)==null?void 0:$.message),1)]}),_:2},1024)):_("",!0)]),ge.value?(o(),u("div",Ar,[v[11]||(v[11]=e("label",{class:"text-sm space-x-1"},[e("span",{class:"text-red-500"},"*"),e("span",{class:"font-bold"},"Y轴参数"),e("span",{class:"text-xs text-gray-500 dark:text-gray-300"})],-1)),a(n,{size:"small",name:"param_y",modelValue:V.value.param_search_info.param_y,"onUpdate:modelValue":v[4]||(v[4]=$=>V.value.param_search_info.param_y=$),optionLabel:"label",optionValue:"value",placeholder:"请选择要分析的参数",checkmark:"",highlightOnSelect:!1,options:ie.value.filter($=>$.value!==V.value.param_search_info.param_x),onValueChange:ye,class:"w-full",showClear:""},null,8,["modelValue","options"]),(Fe=S.param_y)!=null&&Fe.invalid?(o(),B(s,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var $;return[K(J(($=S.param_y.error)==null?void 0:$.message),1)]}),_:2},1024)):_("",!0)])):_("",!0),e("div",Mr,[v[12]||(v[12]=e("label",{class:"text-sm flex items-center gap-1"},[e("span",{class:"text-red-500"},"*"),e("span",{class:"font-bold"},"分析指标")],-1)),a(n,{size:"small",name:"evaluation_indicator",modelValue:V.value.param_search_info.evaluation_indicator,"onUpdate:modelValue":v[5]||(v[5]=$=>V.value.param_search_info.evaluation_indicator=$),options:g(Rl),placeholder:"请选择分析指标",checkmark:"",filter:"",highlightOnSelect:!1,class:"w-full",showClear:""},null,8,["modelValue","options"]),(Ie=S.evaluation_indicator)!=null&&Ie.invalid?(o(),B(s,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var $;return[K(J(($=S.evaluation_indicator.error)==null?void 0:$.message),1)]}),_:2},1024)):_("",!0)]),V.value.param_search_info.limit_dict&&Object.keys(V.value.param_search_info.limit_dict).length>0?(o(),u("div",Hr,[a(H),v[14]||(v[14]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"font-semibold text-gray-700 dark:text-gray-300"},"固定参数设置"),e("span",{class:"text-xs text-gray-500"},"(请为其他参数选择固定值)")],-1)),e("div",Rr,[(o(!0),u(D,null,ve(Object.keys(V.value.param_search_info.limit_dict),$=>{var p;return o(),u("div",{class:"flex flex-col gap-y-2 w-full",key:$},[e("label",qr,[v[13]||(v[13]=e("span",{class:"text-red-500"},"*",-1)),e("span",Er,J(g(Lt)($,me())),1)]),a(n,{size:"small",name:$,modelValue:V.value.param_search_info.limit_dict[$],"onUpdate:modelValue":X=>V.value.param_search_info.limit_dict[$]=X,options:L.value[$],placeholder:`请选择${g(Lt)($,me())}的固定值`,class:"w-full",showClear:!0},null,8,["name","modelValue","onUpdate:modelValue","options","placeholder"]),(p=S[$])!=null&&p.invalid?(o(),B(s,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var X;return[K(J((X=S[$].error)==null?void 0:X.message),1)]}),_:2},1024)):_("",!0)])}),128))])])):_("",!0)]}),_:1},512),e("div",Jr,[e("span",Wr,"分析结果可在工具页面「"+J(g(Oe)[g(R)])+"」中查看",1),e("div",Zr,[a(N,{label:"取消",severity:"secondary",size:"small",onClick:v[6]||(v[6]=S=>i.value=!1)}),a(N,{label:"开始运行",size:"small",onClick:_e,loading:Y.value},null,8,["loading"])])])])]),_:1},8,["visible","header"])],64)}}}),Gr={class:"flex items-center justify-between py-3 pl-4 pr-1"},Xr={class:"space-x-1"},Yr={class:"flex-1 w-full min-w-0 space-y-1 font-semibold"},Qr={class:"text-xs text-gray-500 dark:text-gray-300 truncate"},eu={class:"flex-1 overflow-y-auto px-4 mt-1"},tu={class:"space-y-1"},lu=["onMouseenter","onClick"],au={class:"flex-1 truncate"},su={key:1,class:"h-full flex flex-col items-center pt-20 gap-4"},ou={key:0,class:"flex-1 min-w-0 h-full flex flex-col relative"},iu={class:"px-4 py-3 flex items-center justify-between sticky left-0 top-0"},nu={class:"space-x-2"},ru={class:"font-semibold"},uu={class:"flex gap-2"},cu={class:"overflow-y-auto overflow-x-hidden"},du={class:"px-5 py-4 space-y-4"},mu={class:"px-5 py-3 space-y-6"},pu={key:1,class:"flex-1 min-w-0 h-full flex flex-col justify-center items-center gap-4"},fu={class:"flex flex-col gap-2"},vu={class:"flex items-center"},gu={class:"flex flex-col gap-2 pl-2"},_u={class:"space-x-3 w-full flex justify-end"},yu={class:"flex items-center justify-between w-full"},xu={class:"text-xs text-gray-500 dark:text-gray-300 flex items-center gap-2"},bu={class:"space-x-3"},hu={key:0,class:"fixed inset-0 bg-black/20 z-50 flex items-center justify-center"},wu={class:"bg-white dark:bg-neutral-800 p-8 rounded-lg shadow-2xl flex flex-col items-center"},ku={class:"flex flex-col gap-6 px-8 py-4"},Ou=yt({__name:"traversal.page",setup(r){const c=xt(),O=zt(),z=m(null),se=m(null),x=m(null),ee=m(null),de=m(null),le=m(null),i=m(null),ge=Object.values([Ra,qa,Ea,Ja]),V=Object.values([Wa,Za,Ka,Ga]),ie=Object.values([Xa,Ya,Qa,es]),Y={coin:V,stock:ge,positionCoin:ie}[R],L=m([]),G=m([]),M=m(""),me=m(Bt()),we=m(""),Ce=m(),ue=m(null),$e=m(!1),Ve=m(!1),_e=m(!1),Oe=m(!1),te=m(null),ye=m(!1);m(!1),m(!1);const w=m(St()),v=m(!1);Gt(()=>{N()});const N=async()=>{var p,X;const $=await Zl();$.result===!0&&(G.value=((p=$.data)==null?void 0:p.configs)||[],L.value=((X=$.data)==null?void 0:X.configs.filter(xe=>xe!=="config"))||[]),G.value.length>0&&G.value.includes("config")?W("config"):G.value.length>0&&W(G.value[0])},H=async()=>{const $=await Yl("config");$.result===!0?me.value={...JSON.parse(JSON.stringify(Bt())),...JSON.parse(JSON.stringify($.data)),name:"config"}:me.value={...JSON.parse(JSON.stringify(Bt())),name:"config"},k()},W=$=>{M.value=$,ae($)},ae=async $=>{H();const p=await Kl(encodeURIComponent($));p.result===!0&&(w.value={...JSON.parse(JSON.stringify(St())),...p.data},$==="config"&&(we.value=w.value.search_name)),k()},k=()=>{var $,p,X,xe,Ue;x.value&&(($=x.value)==null||$.loadData(w.value)),z.value&&((p=z.value)==null||p.loadData(me.value)),se.value&&((X=se.value)==null||X.loadData(me.value)),ee.value&&((xe=ee.value)==null||xe.loadData(me.value)),de.value&&((Ue=de.value)==null||Ue.loadData(me.value))},n=qe(()=>[{label:"复制配置",icon:"pi pi-copy",command:()=>{le.value&&le.value.openDialog(M.value,w.value.search_name)},class:M.value==="无名称配置"?"hidden":""},{label:"删除",icon:"pi pi-trash",command:()=>{s()},class:M.value==="config"||G.value.length===0?"hidden":""}]),s=async()=>{if(M.value==="config"){c.add({severity:"warn",summary:"当前策略正在使用中不可删除！",life:3e3});return}O.require({group:M.value,header:"删除",message:`你确定要删除「${M.value}」吗?`,icon:"pi pi-info-circle",rejectProps:{label:"取消",severity:"secondary",outlined:!0},acceptProps:{label:"删除",severity:"danger"},accept:async()=>{if(M.value==="无名称配置"){N(),c.add({severity:"success",summary:"删除成功",life:3e3});return}(await Gl(M.value)).result===!0&&(c.add({severity:"success",summary:"删除成功",life:3e3}),N())},reject:()=>{}})},h=$=>{Nt(()=>{Ce.value.toggle($)})},I=async()=>{Ve.value=!0,G.value.includes("config")?(await Ql("config",ea([...L.value],we.value))).result===!0?(c.add({severity:"success",summary:"复制成功",life:3e3}),E()):Ve.value=!1:E()},E=async()=>{const $=await ta(encodeURIComponent(M.value));Ve.value=!1,$.result===!0&&($e.value=!1,c.add({severity:"success",summary:`配置 "${M.value}" 已成功启用`,life:3e3}),N())},S=()=>{ye.value=!1,_e.value=!0,Q(),te.value=setTimeout(()=>{ye.value=!0},5e3)},Q=()=>{te.value&&(clearTimeout(te.value),te.value=null)},Fe=()=>{Q(),ye.value=!0},Ie=async()=>{_e.value=!1,Oe.value=!0;try{(await la()).result===!0&&c.add({severity:"success",summary:"遍历完成",life:3e3})}finally{Oe.value=!1}};return Xl(()=>{Q()}),($,p)=>{const X=wt,xe=kt,Ue=ht,Ee=da,at=Ut,Je=ga,We=Ct,pe=ua,j=va,Z=tl,Ze=ma,Ke=pl,A=bt;return o(),u(D,null,[a(pe,{class:"w-full h-screen overflow-hidden flex"},{default:b(()=>[a(Ee,{size:18,class:"min-w-[232px]"},{default:b(()=>[a(Ue,{class:"max-h-full border-0 rounded-none shadow-none",pt:{body:{class:"flex-1 p-0 pb-2 min-h-0"},content:{class:"h-full min-h-0 flex flex-col"}}},{header:b(()=>[e("div",Gr,[p[18]||(p[18]=e("span",{class:"font-semibold"},"策略遍历配置库",-1)),e("div",Xr,[y(a(X,{icon:"pi pi-plus",variant:"outlined",size:"small",severity:"secondary",onClick:p[0]||(p[0]=T=>v.value=!0)},null,512),[[A,"新增遍历配置",void 0,{left:!0}]])])])]),content:b(()=>[a(xe,{class:"m-0"}),G.value&&G.value.length>0?(o(),u(D,{key:0},[G.value&&G.value.includes("config")?(o(),u("div",{key:0,onMouseenter:p[2]||(p[2]=T=>ue.value="config"),onMouseleave:p[3]||(p[3]=T=>ue.value=null),onClick:p[4]||(p[4]=T=>W("config")),class:et(["pl-7 pr-1 h-14 flex justify-between items-center gap-2 cursor-pointer py-2 bg-gray-50 hover:bg-primary-50 text-gray-700 hover:text-primary-600 dark:bg-neutral-900 dark:hover:bg-primary-900 dark:text-gray-300 dark:hover:text-primary-100",M.value==="config"?"text-primary-600 bg-primary-50 dark:text-primary-100 dark:bg-primary-900":""])},[e("div",Yr,[p[19]||(p[19]=e("div",null,"当前配置",-1)),y((o(),u("div",Qr,[K(J(we.value),1)])),[[A,we.value]])]),ue.value==="config"||M.value==="config"?(o(),B(X,{key:0,icon:"pi pi-ellipsis-v",severity:"secondary",text:"","aria-haspopup":"true","aria-controls":"overlay_menu",onClick:p[1]||(p[1]=T=>h(T)),size:"small",class:"w-7 h-7 bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-900"})):_("",!0)],34)):_("",!0),e("div",eu,[e("ul",tu,[(o(!0),u(D,null,ve(L.value,T=>(o(),u("li",{onMouseenter:fe=>ue.value=T,onMouseleave:p[6]||(p[6]=fe=>ue.value=null),onClick:fe=>W(T),key:T,class:et(["h-11 flex justify-between items-center gap-2 font-medium text-sm cursor-pointer pl-3 pr-1 py-2 hover:bg-primary-50 text-gray-700 hover:text-primary-600 dark:bg-neutral-900 dark:hover:bg-primary-900 dark:text-gray-300 dark:hover:text-primary-100 rounded-md",M.value===T?"text-primary-600 bg-primary-50 dark:text-primary-100 dark:bg-primary-900":""])},[y((o(),u("span",au,[K(J(T),1)])),[[A,T]]),ue.value===T||M.value===T?(o(),B(X,{key:0,icon:"pi pi-ellipsis-v",severity:"secondary","aria-haspopup":"true","aria-controls":"overlay_menu",onClick:p[5]||(p[5]=fe=>h(fe)),size:"small",class:"w-7 h-7 bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-900"})):_("",!0)],42,lu))),128))])])],64)):(o(),u("div",su,p[20]||(p[20]=[e("img",{src:Ot,class:"w-30 h-auto"},null,-1),e("div",{class:"space-y-1 flex flex-col items-center"},[e("span",{class:"text-gray-500 text-sm"},"暂无配置"),e("span",{class:"text-primary-500 text-xs"},"点击 + 按钮查看新增遍历配置教程")],-1)])))]),_:1})]),_:1}),a(Ee,{size:82},{default:b(()=>[G.value&&G.value.length>0?(o(),u("div",ou,[e("div",iu,[e("div",nu,[e("span",ru,J(w.value.search_name),1)]),e("div",uu,[M.value==="config"?(o(),B(at,{key:0,size:"small",severity:"success",class:"flex items-center gap-1 font-medium"},{default:b(()=>p[21]||(p[21]=[K(" 已启用")])),_:1,__:[21]})):M.value!=="无名称配置"?(o(),B(X,{key:1,size:"small",onClick:p[7]||(p[7]=T=>$e.value=!0)},{default:b(()=>p[22]||(p[22]=[K("启用")])),_:1,__:[22]})):_("",!0),M.value==="config"?(o(),B(X,{key:2,size:"small",class:"shadow-lg",onClick:S},{default:b(()=>p[23]||(p[23]=[K("寻找最优参数")])),_:1,__:[23]})):_("",!0),a(Je,{group:"backTest",pt:{root:{class:"max-w-[90vw] sm:max-w-[600px]"}}})])]),a(xe,{class:"m-0"}),e("div",cu,[M.value==="无名称配置"?(o(),B(We,{key:0,severity:"warn",closable:!1,class:"inline-flex"},{default:b(()=>p[24]||(p[24]=[e("div",{class:"space-y-2"},[e("div",{class:"flex items-center font-semibold gap-2"},[e("i",{class:"pi pi-exclamation-circle"}),K("重要提示 ")]),e("ul",{class:"list-disc space-y-1 text-sm pl-5",role:"list"},[e("li",null," 编辑「策略遍历配置」前，请先确保已填写配置名称，否则保存将失败。 "),e("li",null," 请确保策略遍历配置中至少有一个参数设置了候选值，否则无法保存。 ")])],-1)])),_:1,__:[24]})):_("",!0),a(Kr,{ref_key:"refTraversalConfigTmpl",ref:x,currentTraversalName:M.value,onRefreshConfigInfo:p[8]||(p[8]=T=>ae(M.value))},null,8,["currentTraversalName"]),a(xe,{class:"m-0"}),e("div",du,[p[25]||(p[25]=e("div",{class:"text-primary-500 font-semibold"}," 当前 config.py 文件的相关配置信息 ",-1)),a(ya,{ref_key:"refStrategyOtherConfigTmpl",ref:se,onRefreshConfigInfo:p[9]||(p[9]=T=>ae(M.value))},null,512)]),e("div",mu,[a(xa,{ref_key:"refDataConfigTmpl",ref:z,onRefreshConfigInfo:p[10]||(p[10]=T=>ae(M.value))},null,512),a(ba,{ref_key:"refBackTestSimulationConfigTmpl",ref:ee,onRefreshConfigInfo:p[11]||(p[11]=T=>ae(M.value))},null,512),a(ha,{ref_key:"refOtherConfifTmpl",ref:de,onRefreshConfigInfo:p[12]||(p[12]=T=>ae(M.value))},null,512)])])])):(o(),u("div",pu,p[26]||(p[26]=[e("img",{src:Ot,class:"w-30 h-auto"},null,-1),e("span",{class:"text-gray-500 text-sm"},"暂无配置信息",-1)])))]),_:1})]),_:1}),a(j,{ref_key:"refMenu",ref:Ce,model:n.value,popup:!0,class:"min-w-35"},null,8,["model"]),a(Je,{group:M.value},null,8,["group"]),a(_a,{configNameList:[...L.value,we.value],title:"遍历",configType:"traversal",ref_key:"refCopyConfigDialogTmpl",ref:le,onRefreshConfigInfo:N},null,8,["configNameList"]),a(ca,{title:"遍历文件",maxFileSize:1*1024*1024,fileType:".py",ref_key:"refUploadConfigDialogTmpl",ref:i,onRefreshConfigInfo:N},null,512),a(Z,{header:"启用确认",visible:$e.value,closable:!1,draggable:!1,modal:!0,onHide:p[14]||(p[14]=T=>$e.value=!1),class:"max-w-[90vw]",pt:{footer:"justify-between items-center"}},{footer:b(()=>[e("div",_u,[a(X,{label:"取消启用",severity:"secondary",onClick:p[13]||(p[13]=T=>$e.value=!1)}),a(X,{label:"确定启用",class:"p-button-primary",loading:Ve.value,onClick:I},null,8,["loading"])])]),default:b(()=>[e("div",fu,[e("div",vu,[p[27]||(p[27]=e("i",{class:"pi pi-question-circle mr-2 text-xl"},null,-1)),K("确定要启用「"+J(w.value.search_name)+"」这个配置吗？ ",1)]),e("div",gu,[p[29]||(p[29]=e("div",{class:"text-sm text-gray-500 dark:text-gray-300"}," 系统会自动为你备份当前已启用的配置文件，以便你随时可以恢复。 ",-1)),a(We,{severity:"warn",icon:"pi pi-exclamation-triangle",variant:"simple",class:"mb-0",pt:{text:"text-sm"}},{default:b(()=>p[28]||(p[28]=[K(" 启用新的遍历配置后，系统将自动清理之前的工具配置信息 ")])),_:1,__:[28]})])])]),_:1},8,["visible"]),a(Z,{header:"寻找最优参数提示",visible:_e.value,closable:!1,draggable:!1,modal:!0,onHide:p[16]||(p[16]=T=>_e.value=!1),class:"w-120",pt:{footer:"justify-between items-center"}},{footer:b(()=>[e("div",yu,[e("div",xu,[ye.value?_("",!0):(o(),u(D,{key:0},[p[30]||(p[30]=K(" 请认真阅读5s后才能点击确定按钮 ")),a(X,{label:"跳过等待",link:"",class:"p-0 underline",onClick:Fe})],64))]),e("div",bu,[a(X,{label:"取消",severity:"secondary",onClick:p[15]||(p[15]=T=>_e.value=!1)}),a(X,{label:"确定",class:"p-button-primary",disabled:!ye.value,onClick:Ie},null,8,["disabled"])])])]),default:b(()=>[p[31]||(p[31]=e("ul",{class:"list-disc pl-6 leading-relaxed space-y-1"},[e("li",null,[K(" 建议使用 "),e("span",{class:"text-primary-500 font-semibold"}," PyCharm "),K("启动寻找最优参数（体验更优） ")]),e("li",null," 若使用网页版「寻找最优参数」功能，过程中会占用一定时间，屏幕将暂时锁定 "),e("li",null,"寻找最优参数进行时，请不要刷新页面或执行其他操作，以免影响结果")],-1))]),_:1,__:[31]},8,["visible"]),Oe.value?(o(),u("div",hu,[e("div",wu,[a(Ze,{class:"mb-4"}),p[32]||(p[32]=e("p",{class:"text-lg font-medium"},"策略遍历进行中，请耐心等待...",-1)),p[33]||(p[33]=e("p",{class:"text-gray-500 dark:text-neutral-400 text-sm mt-2 flex items-center gap-2"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-600"}),K("策略遍历期间请勿刷新页面或关闭浏览器 ")],-1))])])):_("",!0),a(Z,{header:"新增策略遍历配置教程",visible:v.value,"onUpdate:visible":p[17]||(p[17]=T=>v.value=T),closable:!0,draggable:!1,modal:!0,class:"max-w-[80vw]",pt:{footer:"justify-between items-center"}},{default:b(()=>[e("div",ku,[(o(!0),u(D,null,ve(g(Y),(T,fe)=>(o(),B(Ke,{key:fe,src:T,alt:`Image ${fe+1}`,preview:""},null,8,["src","alt"]))),128))])]),_:1},8,["visible"])],64)}}});export{Ou as default};
