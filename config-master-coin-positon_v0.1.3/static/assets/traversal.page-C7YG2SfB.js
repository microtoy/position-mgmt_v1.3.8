import{c,o,b as e,M as ue,aV as it,J as yl,U as Ae,K as xl,L as Fe,m as h,a as l,I as S,N as bl,w as b,i as C,aW as Re,aX as lt,O as hl,n as wl,f as He,aY as Cl,V as kl,Q as $l,a3 as bt,aZ as Vl,a5 as Il,a_ as Ll,d as ct,a9 as dt,ak as St,r as d,a$ as Tt,am as Ee,b0 as st,g as Je,F as O,j as p,k as X,an as Pe,as as at,T as mt,v as he,e as xe,q as W,t as q,at as Ft,aq as Sl,b1 as ut,au as Bt,b2 as Jt,aD as ht,b3 as qe,av as Ze,aF as Bl,aw as qt,b4 as Ol,aJ as Zt,az as Se,aL as Dl,B as Wt,aC as Nl,b5 as jt,b6 as Ut,b7 as zl,b8 as Tl,b9 as wt,ba as Fl,bb as jl,bc as Ul,bd as Pl,aK as Ct,aG as Ml,aH as Al,be as Rl,H as El,aa as Hl,bf as Jl,aS as ql,bg as Zl,bh as Wl}from"./index-D8Idp9N8.js";import{F as Kl}from"./index-tAOks71Y.js";import{E as Pt,F as Xl,G as Yl,n as Mt,a as Gl,f as Ot,g as Ql,b as Kt,h as ea,i as Xt,j as Vt,o as It,m as At,k as Dt,p as ta,q as la,r as Rt,t as Et,u as kt,c as aa,d as sa,e as oa,v as Yt,A as pt,l as Gt,_ as Lt,y as Qt,H as ia,C as na,U as ra,D as ua}from"./uploadConfigDialog.tmpl-BmcSJ1Mv.js";import{c as ca}from"./index-CPAdQnGy.js";import{s as el,_ as da,v as $t,b as tl,c as Be,d as ma,t as ll,h as pa,a as fa,f as al,i as sl,j as ol,m as va,g as ga,n as _a,p as ya,o as xa,q as ba,r as ha}from"./copyConfigDialog.tmpl.vue_vue_type_script_setup_true_lang-Y_QpkV_L.js";import{s as ft,a as vt,b as gt}from"./index-CMgMmmgV.js";import{a as Nt}from"./index-DR-fbeL0.js";import"./index-CoBe4ZP6.js";var il={name:"EyeIcon",extends:it};function wa(i,u,D,N,ae,y){return o(),c("svg",ue({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.pti()),u[0]||(u[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z",fill:"currentColor"},null,-1)]),16)}il.render=wa;var nl={name:"RefreshIcon",extends:it};function Ca(i,u,D,N,ae,y){return o(),c("svg",ue({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.pti()),u[0]||(u[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77051 5.96336C6.84324 5.99355 6.92127 6.00891 7.00002 6.00854C7.07877 6.00891 7.1568 5.99355 7.22953 5.96336C7.30226 5.93317 7.36823 5.88876 7.42357 5.83273L9.82101 3.43529C9.93325 3.32291 9.99629 3.17058 9.99629 3.01175C9.99629 2.85292 9.93325 2.70058 9.82101 2.5882L7.42357 0.190763C7.3687 0.131876 7.30253 0.0846451 7.22901 0.0518865C7.15549 0.019128 7.07612 0.00151319 6.99564 9.32772e-05C6.91517 -0.00132663 6.83523 0.0134773 6.7606 0.0436218C6.68597 0.0737664 6.61817 0.118634 6.56126 0.175548C6.50435 0.232462 6.45948 0.300257 6.42933 0.374888C6.39919 0.449519 6.38439 0.529456 6.38581 0.609933C6.38722 0.690409 6.40484 0.769775 6.4376 0.843296C6.47036 0.916817 6.51759 0.982986 6.57647 1.03786L7.95103 2.41241H6.99998C5.46337 2.41241 3.98969 3.02283 2.90314 4.10938C1.81659 5.19593 1.20618 6.66961 1.20618 8.20622C1.20618 9.74283 1.81659 11.2165 2.90314 12.3031C3.98969 13.3896 5.46337 14 6.99998 14C8.53595 13.9979 10.0084 13.3868 11.0945 12.3007C12.1806 11.2146 12.7917 9.74218 12.7938 8.20622C12.7938 8.04726 12.7306 7.89481 12.6182 7.78241C12.5058 7.67001 12.3534 7.60686 12.1944 7.60686C12.0355 7.60686 11.883 7.67001 11.7706 7.78241C11.6582 7.89481 11.5951 8.04726 11.5951 8.20622C11.5951 9.11504 11.3256 10.0035 10.8207 10.7591C10.3157 11.5148 9.59809 12.1037 8.75845 12.4515C7.9188 12.7993 6.99489 12.8903 6.10353 12.713C5.21217 12.5357 4.3934 12.0981 3.75077 11.4554C3.10813 10.8128 2.67049 9.99404 2.49319 9.10268C2.31589 8.21132 2.40688 7.2874 2.75468 6.44776C3.10247 5.60811 3.69143 4.89046 4.44709 4.38554C5.20275 3.88063 6.09116 3.61113 6.99998 3.61113H7.95098L6.57647 4.98564C6.46423 5.09802 6.40119 5.25035 6.40119 5.40918C6.40119 5.56801 6.46423 5.72035 6.57647 5.83273C6.63181 5.88876 6.69778 5.93317 6.77051 5.96336Z",fill:"currentColor"},null,-1)]),16)}nl.render=Ca;var rl={name:"SearchMinusIcon",extends:it};function ka(i,u,D,N,ae,y){return o(),c("svg",ue({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.pti()),u[0]||(u[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.0208 12.0411C4.83005 12.0411 3.66604 11.688 2.67596 11.0265C1.68589 10.3649 0.914216 9.42464 0.458534 8.32452C0.00285271 7.22441 -0.116374 6.01388 0.11593 4.84601C0.348235 3.67813 0.921637 2.60537 1.76363 1.76338C2.60562 0.921393 3.67838 0.34799 4.84625 0.115686C6.01412 -0.116618 7.22466 0.00260857 8.32477 0.45829C9.42488 0.913972 10.3652 1.68564 11.0267 2.67572C11.6883 3.66579 12.0414 4.8298 12.0414 6.02056C12.0395 7.41563 11.5542 8.76029 10.6783 9.8305L13.8244 12.9765C13.9367 13.089 13.9997 13.2414 13.9997 13.4003C13.9997 13.5592 13.9367 13.7116 13.8244 13.8241C13.769 13.8801 13.703 13.9245 13.6302 13.9548C13.5575 13.985 13.4794 14.0003 13.4006 14C13.3218 14.0003 13.2437 13.985 13.171 13.9548C13.0982 13.9245 13.0322 13.8801 12.9768 13.8241L9.83082 10.678C8.76059 11.5539 7.4159 12.0393 6.0208 12.0411ZM6.0208 1.20731C5.07199 1.20731 4.14449 1.48867 3.35559 2.0158C2.56669 2.54292 1.95181 3.29215 1.58872 4.16874C1.22562 5.04532 1.13062 6.00989 1.31572 6.94046C1.50083 7.87104 1.95772 8.72583 2.62863 9.39674C3.29954 10.0676 4.15433 10.5245 5.0849 10.7096C6.01548 10.8947 6.98005 10.7997 7.85663 10.4367C8.73322 10.0736 9.48244 9.45868 10.0096 8.66978C10.5367 7.88088 10.8181 6.95337 10.8181 6.00457C10.8181 4.73226 10.3126 3.51206 9.41297 2.6124C8.51331 1.71274 7.29311 1.20731 6.0208 1.20731ZM4.00591 6.60422H8.00362C8.16266 6.60422 8.31518 6.54104 8.42764 6.42859C8.5401 6.31613 8.60328 6.1636 8.60328 6.00456C8.60328 5.84553 8.5401 5.693 8.42764 5.58054C8.31518 5.46809 8.16266 5.40491 8.00362 5.40491H4.00591C3.84687 5.40491 3.69434 5.46809 3.58189 5.58054C3.46943 5.693 3.40625 5.84553 3.40625 6.00456C3.40625 6.1636 3.46943 6.31613 3.58189 6.42859C3.69434 6.54104 3.84687 6.60422 4.00591 6.60422Z",fill:"currentColor"},null,-1)]),16)}rl.render=ka;var ul={name:"SearchPlusIcon",extends:it};function $a(i,u,D,N,ae,y){return o(),c("svg",ue({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.pti()),u[0]||(u[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67596 11.0265C3.66604 11.688 4.83005 12.0411 6.0208 12.0411C6.81143 12.0411 7.59432 11.8854 8.32477 11.5828C8.86999 11.357 9.37802 11.0526 9.83311 10.6803L12.9768 13.8241C13.0322 13.8801 13.0982 13.9245 13.171 13.9548C13.2437 13.985 13.3218 14.0003 13.4006 14C13.4794 14.0003 13.5575 13.985 13.6302 13.9548C13.703 13.9245 13.769 13.8801 13.8244 13.8241C13.9367 13.7116 13.9997 13.5592 13.9997 13.4003C13.9997 13.2414 13.9367 13.089 13.8244 12.9765L10.6806 9.8328C11.0529 9.37773 11.3572 8.86972 11.5831 8.32452C11.8856 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0267 2.67572C10.3652 1.68564 9.42488 0.913972 8.32477 0.45829C7.22466 0.00260857 6.01412 -0.116618 4.84625 0.115686C3.67838 0.34799 2.60562 0.921393 1.76363 1.76338C0.921637 2.60537 0.348235 3.67813 0.11593 4.84601C-0.116374 6.01388 0.00285271 7.22441 0.458534 8.32452C0.914216 9.42464 1.68589 10.3649 2.67596 11.0265ZM3.35559 2.0158C4.14449 1.48867 5.07199 1.20731 6.0208 1.20731C7.29311 1.20731 8.51331 1.71274 9.41297 2.6124C10.3126 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5367 7.88088 10.0096 8.66978C9.48244 9.45868 8.73322 10.0736 7.85663 10.4367C6.98005 10.7997 6.01548 10.8947 5.0849 10.7096C4.15433 10.5245 3.29954 10.0676 2.62863 9.39674C1.95772 8.72583 1.50083 7.87104 1.31572 6.94046C1.13062 6.00989 1.22562 5.04532 1.58872 4.16874C1.95181 3.29215 2.56669 2.54292 3.35559 2.0158ZM6.00481 8.60309C5.84641 8.60102 5.69509 8.53718 5.58308 8.42517C5.47107 8.31316 5.40722 8.16183 5.40515 8.00344V6.60422H4.00591C3.84687 6.60422 3.69434 6.54104 3.58189 6.42859C3.46943 6.31613 3.40625 6.1636 3.40625 6.00456C3.40625 5.84553 3.46943 5.693 3.58189 5.58054C3.69434 5.46809 3.84687 5.40491 4.00591 5.40491H5.40515V4.00572C5.40515 3.84668 5.46833 3.69416 5.58079 3.5817C5.69324 3.46924 5.84577 3.40607 6.00481 3.40607C6.16385 3.40607 6.31637 3.46924 6.42883 3.5817C6.54129 3.69416 6.60447 3.84668 6.60447 4.00572V5.40491H8.00362C8.16266 5.40491 8.31518 5.46809 8.42764 5.58054C8.5401 5.693 8.60328 5.84553 8.60328 6.00456C8.60328 6.1636 8.5401 6.31613 8.42764 6.42859C8.31518 6.54104 8.16266 6.60422 8.00362 6.60422H6.60447V8.00344C6.60239 8.16183 6.53855 8.31316 6.42654 8.42517C6.31453 8.53718 6.1632 8.60102 6.00481 8.60309Z",fill:"currentColor"},null,-1)]),16)}ul.render=$a;var cl={name:"UndoIcon",extends:it};function Va(i,u,D,N,ae,y){return o(),c("svg",ue({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.pti()),u[0]||(u[0]=[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.77042 5.96336C6.84315 5.99355 6.92118 6.00891 6.99993 6.00854C7.07868 6.00891 7.15671 5.99355 7.22944 5.96336C7.30217 5.93317 7.36814 5.88876 7.42348 5.83273C7.53572 5.72035 7.59876 5.56801 7.59876 5.40918C7.59876 5.25035 7.53572 5.09802 7.42348 4.98564L6.04897 3.61113H6.99998C7.9088 3.61113 8.79722 3.88063 9.55288 4.38554C10.3085 4.89046 10.8975 5.60811 11.2453 6.44776C11.5931 7.2874 11.6841 8.21132 11.5068 9.10268C11.3295 9.99404 10.8918 10.8128 10.2492 11.4554C9.60657 12.0981 8.7878 12.5357 7.89644 12.713C7.00508 12.8903 6.08116 12.7993 5.24152 12.4515C4.40188 12.1037 3.68422 11.5148 3.17931 10.7591C2.67439 10.0035 2.4049 9.11504 2.4049 8.20622C2.4049 8.04726 2.34175 7.89481 2.22935 7.78241C2.11695 7.67001 1.9645 7.60686 1.80554 7.60686C1.64658 7.60686 1.49413 7.67001 1.38172 7.78241C1.26932 7.89481 1.20618 8.04726 1.20618 8.20622C1.20829 9.74218 1.81939 11.2146 2.90548 12.3007C3.99157 13.3868 5.46402 13.9979 6.99998 14C8.5366 14 10.0103 13.3896 11.0968 12.3031C12.1834 11.2165 12.7938 9.74283 12.7938 8.20622C12.7938 6.66961 12.1834 5.19593 11.0968 4.10938C10.0103 3.02283 8.5366 2.41241 6.99998 2.41241H6.04892L7.42348 1.03786C7.48236 0.982986 7.5296 0.916817 7.56235 0.843296C7.59511 0.769775 7.61273 0.690409 7.61415 0.609933C7.61557 0.529456 7.60076 0.449519 7.57062 0.374888C7.54047 0.300257 7.49561 0.232462 7.43869 0.175548C7.38178 0.118634 7.31398 0.0737664 7.23935 0.0436218C7.16472 0.0134773 7.08478 -0.00132663 7.00431 9.32772e-05C6.92383 0.00151319 6.84447 0.019128 6.77095 0.0518865C6.69742 0.0846451 6.63126 0.131876 6.57638 0.190763L4.17895 2.5882C4.06671 2.70058 4.00366 2.85292 4.00366 3.01175C4.00366 3.17058 4.06671 3.32291 4.17895 3.43529L6.57638 5.83273C6.63172 5.88876 6.69769 5.93317 6.77042 5.96336Z",fill:"currentColor"},null,-1)]),16)}cl.render=Va;var Ia=`
    .p-image-mask {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .p-image-preview {
        position: relative;
        display: inline-flex;
        line-height: 0;
    }

    .p-image-preview-mask {
        position: absolute;
        inset-inline-start: 0;
        inset-block-start: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s;
        border: 0 none;
        padding: 0;
        cursor: pointer;
        background: transparent;
        color: dt('image.preview.mask.color');
        transition: background dt('image.transition.duration');
    }

    .p-image-preview:hover > .p-image-preview-mask {
        opacity: 1;
        cursor: pointer;
        background: dt('image.preview.mask.background');
    }

    .p-image-preview-icon {
        font-size: dt('image.preview.icon.size');
        width: dt('image.preview.icon.size');
        height: dt('image.preview.icon.size');
    }

    .p-image-toolbar {
        position: absolute;
        inset-block-start: dt('image.toolbar.position.top');
        inset-inline-end: dt('image.toolbar.position.right');
        inset-inline-start: dt('image.toolbar.position.left');
        inset-block-end: dt('image.toolbar.position.bottom');
        display: flex;
        z-index: 1;
        padding: dt('image.toolbar.padding');
        background: dt('image.toolbar.background');
        backdrop-filter: blur(dt('image.toolbar.blur'));
        border-color: dt('image.toolbar.border.color');
        border-style: solid;
        border-width: dt('image.toolbar.border.width');
        border-radius: dt('image.toolbar.border.radius');
        gap: dt('image.toolbar.gap');
    }

    .p-image-action {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        color: dt('image.action.color');
        background: transparent;
        width: dt('image.action.size');
        height: dt('image.action.size');
        margin: 0;
        padding: 0;
        border: 0 none;
        cursor: pointer;
        user-select: none;
        border-radius: dt('image.action.border.radius');
        outline-color: transparent;
        transition:
            background dt('image.transition.duration'),
            color dt('image.transition.duration'),
            outline-color dt('image.transition.duration'),
            box-shadow dt('image.transition.duration');
    }

    .p-image-action:hover {
        color: dt('image.action.hover.color');
        background: dt('image.action.hover.background');
    }

    .p-image-action:focus-visible {
        box-shadow: dt('image.action.focus.ring.shadow');
        outline: dt('image.action.focus.ring.width') dt('image.action.focus.ring.style') dt('image.action.focus.ring.color');
        outline-offset: dt('image.action.focus.ring.offset');
    }

    .p-image-action .p-icon {
        font-size: dt('image.action.icon.size');
        width: dt('image.action.icon.size');
        height: dt('image.action.icon.size');
    }

    .p-image-action.p-disabled {
        pointer-events: auto;
    }

    .p-image-original {
        transition: transform 0.15s;
        max-width: 100vw;
        max-height: 100vh;
    }

    .p-image-original-enter-active {
        transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
    }

    .p-image-original-leave-active {
        transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .p-image-original-enter-from,
    .p-image-original-leave-to {
        opacity: 0;
        transform: scale(0.7);
    }
`,La={root:function(u){var D=u.props;return["p-image p-component",{"p-image-preview":D.preview}]},previewMask:"p-image-preview-mask",previewIcon:"p-image-preview-icon",mask:"p-image-mask p-overlay-mask p-overlay-mask-enter",toolbar:"p-image-toolbar",rotateRightButton:"p-image-action p-image-rotate-right-button",rotateLeftButton:"p-image-action p-image-rotate-left-button",zoomOutButton:function(u){var D=u.instance;return["p-image-action p-image-zoom-out-button",{"p-disabled":D.isZoomOutDisabled}]},zoomInButton:function(u){var D=u.instance;return["p-image-action p-image-zoom-in-button",{"p-disabled":D.isZoomInDisabled}]},closeButton:"p-image-action p-image-close-button",original:"p-image-original"},Sa=yl.extend({name:"image",style:Ia,classes:La}),Ba={name:"BaseImage",extends:$l,props:{preview:{type:Boolean,default:!1},class:{type:null,default:null},style:{type:null,default:null},imageStyle:{type:null,default:null},imageClass:{type:null,default:null},previewButtonProps:{type:null,default:null},indicatorIcon:{type:String,default:void 0},previewIcon:{type:String,default:void 0},zoomInDisabled:{type:Boolean,default:!1},zoomOutDisabled:{type:Boolean,default:!1}},style:Sa,provide:function(){return{$pcImage:this,$parentInstance:this}}},dl={name:"Image",extends:Ba,inheritAttrs:!1,emits:["show","hide","error"],mask:null,data:function(){return{maskVisible:!1,previewVisible:!1,rotate:0,scale:1}},beforeUnmount:function(){this.mask&&bt.clear(this.container)},methods:{maskRef:function(u){this.mask=u},toolbarRef:function(u){this.toolbarRef=u},onImageClick:function(){var u=this;this.preview&&(Xl(),this.maskVisible=!0,setTimeout(function(){u.previewVisible=!0},25))},onPreviewImageClick:function(){this.previewClick=!0},onMaskClick:function(u){var D=Ll(u.target,"data-pc-section-group","action")||u.target.closest('[data-pc-section-group="action"]');!this.previewClick&&!D&&(this.previewVisible=!1,this.rotate=0,this.scale=1),this.previewClick=!1},onMaskKeydown:function(u){var D=this;switch(u.code){case"Escape":this.hidePreview(),setTimeout(function(){Il(D.$refs.previewButton)},200),u.preventDefault();break}},onError:function(){this.$emit("error")},rotateRight:function(){this.rotate+=90,this.previewClick=!0},rotateLeft:function(){this.rotate-=90,this.previewClick=!0},zoomIn:function(){this.scale=this.scale+.1,this.previewClick=!0},zoomOut:function(){this.scale=this.scale-.1,this.previewClick=!0},onBeforeEnter:function(){bt.set("modal",this.mask,this.$primevue.config.zIndex.modal)},onEnter:function(){this.focus(),this.$emit("show")},onBeforeLeave:function(){!this.isUnstyled&&Vl(this.mask,"p-overlay-mask-leave")},onLeave:function(){Pt(),this.$emit("hide")},onAfterLeave:function(u){bt.clear(u),this.maskVisible=!1},focus:function(){var u=this.mask.querySelector("[autofocus]");u&&u.focus()},hidePreview:function(){this.previewVisible=!1,this.rotate=0,this.scale=1,Pt()}},computed:{containerClass:function(){return[this.cx("root"),this.class]},rotateClass:function(){return"p-image-preview-rotate-"+this.rotate},imagePreviewStyle:function(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}},isZoomInDisabled:function(){return this.zoomInDisabled||this.scale>=1.5},isZoomOutDisabled:function(){return this.zoomOutDisabled||this.scale<=.5},rightAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateRight:void 0},leftAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.rotateLeft:void 0},zoomInAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomIn:void 0},zoomOutAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomOut:void 0},zoomImageAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.zoomImage:void 0},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},components:{Portal:kl,EyeIcon:il,RefreshIcon:nl,UndoIcon:cl,SearchMinusIcon:rl,SearchPlusIcon:ul,TimesIcon:Cl},directives:{focustrap:Kl}};function ot(i){"@babel/helpers - typeof";return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},ot(i)}function Ht(i,u){var D=Object.keys(i);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(i);u&&(N=N.filter(function(ae){return Object.getOwnPropertyDescriptor(i,ae).enumerable})),D.push.apply(D,N)}return D}function rt(i){for(var u=1;u<arguments.length;u++){var D=arguments[u]!=null?arguments[u]:{};u%2?Ht(Object(D),!0).forEach(function(N){Oa(i,N,D[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(D)):Ht(Object(D)).forEach(function(N){Object.defineProperty(i,N,Object.getOwnPropertyDescriptor(D,N))})}return i}function Oa(i,u,D){return(u=Da(u))in i?Object.defineProperty(i,u,{value:D,enumerable:!0,configurable:!0,writable:!0}):i[u]=D,i}function Da(i){var u=Na(i,"string");return ot(u)=="symbol"?u:u+""}function Na(i,u){if(ot(i)!="object"||!i)return i;var D=i[Symbol.toPrimitive];if(D!==void 0){var N=D.call(i,u);if(ot(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(i)}var za=["aria-label"],Ta=["aria-modal"],Fa=["aria-label"],ja=["aria-label"],Ua=["disabled","aria-label"],Pa=["disabled","aria-label"],Ma=["aria-label"],Aa=["src"];function Ra(i,u,D,N,ae,y){var Y=Ae("RefreshIcon"),me=Ae("UndoIcon"),ee=Ae("SearchMinusIcon"),n=Ae("SearchPlusIcon"),pe=Ae("TimesIcon"),$=Ae("Portal"),ie=xl("focustrap");return o(),c("span",ue({class:y.containerClass,style:i.style},i.ptmi("root")),[Fe(i.$slots,"image",{errorCallback:y.onError},function(){return[e("img",ue({style:i.imageStyle,class:i.imageClass,onError:u[0]||(u[0]=function(){return y.onError&&y.onError.apply(y,arguments)})},rt(rt({},i.$attrs),i.ptm("image"))),null,16)]}),i.preview?(o(),c("button",ue({key:0,ref:"previewButton","aria-label":y.zoomImageAriaLabel,type:"button",class:i.cx("previewMask"),onClick:u[1]||(u[1]=function(){return y.onImageClick&&y.onImageClick.apply(y,arguments)})},rt(rt({},i.previewButtonProps),i.ptm("previewMask"))),[Fe(i.$slots,i.$slots.previewicon?"previewicon":"indicatoricon",{},function(){return[(o(),S(bl(i.previewIcon||i.indicatorIcon?"i":"EyeIcon"),ue({class:[i.cx("previewIcon"),i.previewIcon]},i.ptm("previewIcon")),null,16,["class"]))]})],16,za)):h("",!0),l($,null,{default:b(function(){return[ae.maskVisible?C((o(),c("div",ue({key:0,ref:y.maskRef,role:"dialog",class:i.cx("mask"),"aria-modal":ae.maskVisible,onClick:u[8]||(u[8]=function(){return y.onMaskClick&&y.onMaskClick.apply(y,arguments)}),onKeydown:u[9]||(u[9]=function(){return y.onMaskKeydown&&y.onMaskKeydown.apply(y,arguments)})},i.ptm("mask")),[e("div",ue({class:i.cx("toolbar")},i.ptm("toolbar")),[e("button",ue({class:i.cx("rotateRightButton"),onClick:u[2]||(u[2]=function(){return y.rotateRight&&y.rotateRight.apply(y,arguments)}),type:"button","aria-label":y.rightAriaLabel},i.ptm("rotateRightButton"),{"data-pc-group-section":"action"}),[Fe(i.$slots,"refresh",{},function(){return[l(Y,Re(lt(i.ptm("rotateRightIcon"))),null,16)]})],16,Fa),e("button",ue({class:i.cx("rotateLeftButton"),onClick:u[3]||(u[3]=function(){return y.rotateLeft&&y.rotateLeft.apply(y,arguments)}),type:"button","aria-label":y.leftAriaLabel},i.ptm("rotateLeftButton"),{"data-pc-group-section":"action"}),[Fe(i.$slots,"undo",{},function(){return[l(me,Re(lt(i.ptm("rotateLeftIcon"))),null,16)]})],16,ja),e("button",ue({class:i.cx("zoomOutButton"),onClick:u[4]||(u[4]=function(){return y.zoomOut&&y.zoomOut.apply(y,arguments)}),type:"button",disabled:y.isZoomOutDisabled,"aria-label":y.zoomOutAriaLabel},i.ptm("zoomOutButton"),{"data-pc-group-section":"action"}),[Fe(i.$slots,"zoomout",{},function(){return[l(ee,Re(lt(i.ptm("zoomOutIcon"))),null,16)]})],16,Ua),e("button",ue({class:i.cx("zoomInButton"),onClick:u[5]||(u[5]=function(){return y.zoomIn&&y.zoomIn.apply(y,arguments)}),type:"button",disabled:y.isZoomInDisabled,"aria-label":y.zoomInAriaLabel},i.ptm("zoomInButton"),{"data-pc-group-section":"action"}),[Fe(i.$slots,"zoomin",{},function(){return[l(n,Re(lt(i.ptm("zoomInIcon"))),null,16)]})],16,Pa),e("button",ue({class:i.cx("closeButton"),type:"button",onClick:u[6]||(u[6]=function(){return y.hidePreview&&y.hidePreview.apply(y,arguments)}),"aria-label":y.closeAriaLabel,autofocus:""},i.ptm("closeButton"),{"data-pc-group-section":"action"}),[Fe(i.$slots,"close",{},function(){return[l(pe,Re(lt(i.ptm("closeIcon"))),null,16)]})],16,Ma)],16),l(hl,ue({name:"p-image-original",onBeforeEnter:y.onBeforeEnter,onEnter:y.onEnter,onLeave:y.onLeave,onBeforeLeave:y.onBeforeLeave,onAfterLeave:y.onAfterLeave},i.ptm("transition")),{default:b(function(){return[ae.previewVisible?(o(),c("div",Re(ue({key:0},i.ptm("originalContainer"))),[Fe(i.$slots,i.$slots.original?"original":"preview",{class:He(i.cx("original")),style:wl(y.imagePreviewStyle),previewCallback:y.onPreviewImageClick},function(){return[e("img",ue({src:i.$attrs.src,class:i.cx("original"),style:y.imagePreviewStyle,onClick:u[7]||(u[7]=function(){return y.onPreviewImageClick&&y.onPreviewImageClick.apply(y,arguments)})},i.ptm("original")),null,16,Aa)]})],16)):h("",!0)]}),_:3},16,["onBeforeEnter","onEnter","onLeave","onBeforeLeave","onAfterLeave"])],16,Ta)),[[ie]]):h("",!0)]}),_:3})],16)}dl.render=Ra;const Ea=""+new URL("1-B90_ZQQe.png",import.meta.url).href,Ha=""+new URL("2-C9bQ7K0E.png",import.meta.url).href,Ja=""+new URL("3-bJPqysXB.png",import.meta.url).href,qa=""+new URL("4-DVMhFX4V.png",import.meta.url).href,Za=""+new URL("1-BkkwgdGk.png",import.meta.url).href,Wa=""+new URL("2-CnXqWlHO.png",import.meta.url).href,Ka=""+new URL("3-Bl5Pska0.png",import.meta.url).href,Xa=""+new URL("4-DFvsfMdK.png",import.meta.url).href,Ya=""+new URL("1-BhkoTAkM.png",import.meta.url).href,Ga=""+new URL("2-DxBoEtSY.png",import.meta.url).href,Qa=""+new URL("3-D3ntwjTL.png",import.meta.url).href,es=""+new URL("4-BeYin2Bf.png",import.meta.url).href,ts={class:"space-x-2"},ls={class:"flex gap-x-4 max-h-full"},as={class:"flex-7 min-w-0 max-h-full overflow-y-auto"},ss={class:"w-full flex-1 flex flex-col gap-y-5"},os={class:"flex gap-x-2"},is={class:"flex-1 flex flex-col gap-y-2"},ns={class:"text-sm space-x-1 flex items-center"},rs={class:"pi pi-question-circle cursor-pointer"},us={class:"flex-1 flex flex-col gap-y-2"},cs={class:"flex justify-between items-center"},ds={class:"text-sm space-x-1 flex items-center"},ms={class:"pi pi-question-circle cursor-pointer"},ps={class:"flex-1 flex flex-col gap-y-2"},fs={class:"flex justify-between items-center"},vs={class:"text-sm space-x-1 flex items-center"},gs={class:"pi pi-question-circle cursor-pointer"},_s={key:0,class:"flex flex-wrap gap-2"},ys={key:1},xs={class:"flex flex-col gap-y-2"},bs={class:"flex justify-between items-center"},hs={class:"text-sm space-x-1 flex items-center"},ws={class:"pi pi-question-circle cursor-pointer"},Cs={class:"text-xs text-gray-500 dark:text-gray-300 ml-2"},ks={class:"flex gap-2 items-center"},$s={class:"flex-1 flex flex-col gap-y-2"},Vs={class:"flex justify-between items-center h-[26px]"},Is={class:"text-sm space-x-1 flex items-center"},Ls={class:"pi pi-question-circle cursor-pointer"},Ss={class:"flex-1 flex flex-col gap-y-2"},Bs={class:"flex justify-between items-center h-[26px]"},Os={class:"text-sm space-x-1 flex items-center"},Ds={class:"pi pi-question-circle cursor-pointer"},Ns={class:"flex items-center gap-x-2"},zs={class:"flex-1 flex flex-col gap-y-2"},Ts={class:"flex justify-between items-center"},Fs={class:"text-sm space-x-1 flex items-center"},js={class:"pi pi-question-circle cursor-pointer"},Us={class:"flex-1 flex flex-col gap-y-2"},Ps={class:"flex justify-between items-center"},Ms={class:"text-sm space-x-1 flex items-center"},As={class:"pi pi-question-circle cursor-pointer"},Rs={class:"flex items-center gap-2"},Es={class:"flex flex-col gap-2"},Hs={class:"flex flex-col gap-y-2 flex-1"},Js={class:"flex justify-between items-center"},qs={class:"text-sm space-x-1 flex items-center"},Zs={class:"pi pi-question-circle cursor-pointer"},Ws={class:"flex flex-col gap-y-2 flex-1"},Ks={class:"flex justify-between items-center"},Xs={class:"text-sm space-x-1 flex items-center"},Ys={class:"pi pi-question-circle cursor-pointer"},Gs={class:"flex flex-col gap-y-2"},Qs={class:"flex gap-1 items-center"},eo={key:0,class:"pi pi-question-circle cursor-pointer"},to={key:0,class:"flex flex-col gap-y-2"},lo={class:"flex justify-between items-center gap-x-2"},ao={class:"mt-2"},so={key:1,class:"space-y-2"},oo={class:"flex flex-col gap-y-2"},io={class:"flex items-center gap-1"},no={key:0,class:"pi pi-question-circle cursor-pointer"},ro={key:0,class:"space-y-2"},uo={key:3,class:"space-y-2"},co={key:0,class:"flex flex-col gap-y-2"},mo={class:"text-sm flex items-center gap-1"},po={class:"pi pi-question-circle cursor-pointer"},fo={key:0,class:"space-y-2"},vo={class:"mt-2"},go={key:1,class:"space-y-2"},_o={key:4,class:"flex flex-col gap-y-2"},yo={class:"flex items-center gap-3"},xo={for:"cross-section-toggle",class:"cursor-pointer"},bo={class:"w-full"},ho={class:"space-y-2"},wo={class:"text-sm space-y-1"},Co={class:"flex items-center gap-2"},ko={class:"flex items-center gap-2"},$o={class:"space-y-6"},Vo={key:0,class:"flex-1 flex flex-col gap-y-2"},Io={class:"flex justify-between items-center"},Lo={class:"text-sm space-x-1 flex items-center"},So={class:"pi pi-question-circle cursor-pointer"},Bo={key:1,class:"flex-1 flex flex-col"},Oo={class:"flex justify-between items-center"},Do={class:"text-sm space-x-1 flex items-center"},No={class:"pi pi-question-circle cursor-pointer"},zo={class:"flex flex-col"},To={key:0,class:"flex flex-wrap gap-2"},Fo={key:0,class:"flex-1 flex flex-col gap-y-2"},jo={class:"flex justify-between items-center"},Uo={class:"text-sm space-x-1 flex items-center"},Po={class:"pi pi-question-circle cursor-pointer"},Mo={class:"space-y-1 list-disc pl-4 mt-1"},Ao={class:"text-xs text-gray-500 dark:text-gray-300"},Ro={key:1,class:"flex-1 flex flex-col gap-y-2"},Eo={class:"flex justify-between items-center"},Ho={class:"text-sm space-x-1 flex items-center"},Jo={class:"pi pi-question-circle cursor-pointer"},qo={key:2,class:"flex-1 flex flex-col gap-y-2"},Zo={class:"flex justify-between items-center"},Wo={class:"text-sm space-x-1 flex items-center"},Ko={class:"pi pi-question-circle cursor-pointer"},Xo={key:3,class:"flex-1 flex flex-col gap-y-2"},Yo={class:"flex justify-between items-center"},Go={class:"text-sm space-x-1 flex items-center"},Qo={class:"pi pi-question-circle cursor-pointer"},ei={key:4,class:"flex-1 flex flex-col gap-y-2"},ti={class:"flex justify-between items-center"},li={class:"text-sm space-x-1 flex items-center"},ai={class:"pi pi-question-circle cursor-pointer"},si={key:0,class:"flex flex-col gap-2"},oi={class:"flex flex-col gap-y-2 flex-1"},ii={class:"flex justify-between items-center"},ni={class:"text-sm flex items-center gap-1"},ri={class:"pi pi-question-circle cursor-pointer"},ui={key:1,class:"flex flex-col gap-y-2 flex-1"},ci={class:"flex justify-between items-center"},di={class:"text-sm flex items-center gap-1"},mi={class:"pi pi-question-circle cursor-pointer"},pi={key:0,class:"flex flex-col gap-4"},fi={class:"space-y-4"},vi={class:"text-sm font-medium flex justify-between items-center gap-1 flex-wrap"},gi={class:"flex items-center space-x-1"},_i=["innerHTML"],yi={class:"pi pi-question-circle cursor-pointer text-gray-400 ml-1"},xi={class:"flex items-end gap-2 flex-wrap"},bi={key:1,class:"flex gap-2 flex-wrap"},hi={class:"flex flex-col gap-1"},wi={class:"flex flex-col gap-1"},Ci={class:"flex flex-col gap-1"},ki=ct({__name:"editBatch.tmpl",emits:["refreshConfigInfo"],setup(i,{expose:u,emit:D}){const N=dt(),ae=St(),y=D,Y=d(!1),me=d(!1),ee=d(!1),n=d(Tt),pe=d([]),$=d([]),ie=d(!1);d(!1),d(!1);const ne=d(!1),G=d([{label:"多空统一",value:"factorList"},{label:"多空分离",value:"longOrShort"}]),M=d([{label:"多头",value:"long"},{label:"空头",value:"short"}]),K=d("set"),U=d("factorList"),re=d("factorList"),ve=d("factorList"),ge=d("long"),_e=d("long"),be=d("long"),ye=d(null),te=d([]),we=d([]),se=d(null);d([]);const fe=d(JSON.parse(JSON.stringify(Ee))),k=d(JSON.parse(JSON.stringify(Ee))),g=d(JSON.parse(JSON.stringify(Ee))),B=d(!1),A=d(!1),J=d(!1),s=d(st()),a=d([]),x=d([]),I=d(Yl),H=d([{label:"true",value:!0},{label:"false",value:!1}]),R=d(""),ce=Je(()=>n.value.short_cap_weight===1?[{label:"纯合约（swap_swap）",value:"swap_swap"}]:Mt);d("null"),d(Gl);const z=async _=>{const t=a.value.findIndex(P=>P.id===_);if(t===-1)return;const v=a.value[t];await Bt();const V=v.candidates;Jt(V)?v.error="":v.error="区间不合法：请填写有效的起始、结束与步长（0<步长<结束值，起始<结束）"},Ve=async(_,t,v)=>{R.value="",s.value=JSON.parse(JSON.stringify(t)),ne.value=v||!1,await Ne(),K.value="set",n.value=JSON.parse(JSON.stringify(Tt)),ee.value=!1,_&&(n.value={...JSON.parse(JSON.stringify(n.value)),...JSON.parse(JSON.stringify(_||{}))}),w(),ne.value===!0&&De(n.value.name,ht.strategy),a.value=[],x.value=[],Object.keys(s.value).forEach(V=>{var P;if(V.includes("[")){const E=qe(V);if(!a.value.some($e=>$e.batchName===V)){let $e="number";Ze(s.value[V])==="object"?$e="object":$e=Ze((P=s.value[V])==null?void 0:P[0])||"number",a.value.push({id:V,batchName:V,parsed:E,valueType:$e,candidates:s.value[V]}),x.value.push(V)}}}),Y.value=!0},De=async(_,t,v="timing")=>{t===ht.strategy?(B.value=!0,fe.value=JSON.parse(JSON.stringify(Ee))):v!=="timing"?(J.value=!0,g.value=JSON.parse(JSON.stringify(Ee))):(A.value=!0,k.value=JSON.parse(JSON.stringify(Ee)));const V=await Bl(encodeURIComponent(_),t);t===ht.strategy?(B.value=!1,V.result===!0&&V.data&&(fe.value=V.data)):v!=="timing"?(J.value=!1,V.result===!0&&V.data&&(g.value=V.data)):(A.value=!1,V.result===!0&&V.data&&(k.value=V.data))},Ne=async()=>{const _=await qt();_.result===!0&&(se.value=_.data,te.value=[],we.value=[],_.data!==null&&Object.keys(_.data).length>0&&(Object.keys(_.data).forEach(v=>{const V=_.data;te.value.push({key:v,label:v==="factors"?"时序因子":"截面因子",selectable:!1,children:V[v].map(P=>({key:P.name,label:P.name}))||[]})}),we.value=JSON.parse(JSON.stringify(te.value))))},w=()=>{let _=0,t=[];if(n.value.hold_period){const v=n.value.hold_period;v.includes("D")&&(_=Number(v.split("D")[0]),t=Array.from({length:_},(V,P)=>P)),v.includes("W")&&(v==="1W"||v==="W"?t=[0,1,2,3,4]:v==="W53"?t=[0]:(_=Number(v.split("W")[0]),t=Array.from({length:_},(V,P)=>P))),v==="M"&&(t=[-5,0])}else t=[];return $.value=t.map(v=>({label:v.toString(),value:v})),t},m=_=>!0,Z=_=>{m(_[_.length-1])||Array.isArray(s.value.hold_period)&&s.value.hold_period.pop()},Ce=()=>{Array.isArray(s.value.offset_list)?s.value.offset_list.push([]):s.value.offset_list=[[]]},ze=_=>{Array.isArray(s.value.offset_list)&&s.value.offset_list.splice(_,1)},je=_=>{const t=String(_).trim();if(t.includes(",")){const V=t.split(",");if(V.length!==2)return!1;const P=Number(V[0].trim()),E=Number(V[1].trim());return!(isNaN(P)||isNaN(E)||P<0||E<0||P>E)}const v=Number(t);return!(isNaN(v)||v<0)},We=_=>String(_).trim()==="long_nums"?!0:je(_),Le=(_,t,v=0)=>{var P,E,Te,$e,Ke,Me;if(!_.length)return;const V=_[_.length-1];if(t==="long_select_coin_num")if(je(V)){s.value.long_select_coin_num=_;return}else{(P=s.value.long_select_coin_num)==null||P.pop();return}if(t==="short_select_coin_num")if(We(V)){s.value.short_select_coin_num=_;return}else{(E=s.value.short_select_coin_num)==null||E.pop();return}Ol(V,!(t==="long_cap_weight"||t==="short_cap_weight"||t==="scalein_targets"))?t==="select_num"?s.value.select_num=_.map(Ie=>Number(Ie)):t==="limit"?s.value.limit=_.map(Ie=>Number(Ie)):t==="long_cap_weight"?s.value.long_cap_weight=_.map(Ie=>Number(Ie)):t==="short_cap_weight"&&(s.value.short_cap_weight=_.map(Ie=>Number(Ie))):t==="select_num"?(Te=s.value.select_num)==null||Te.pop():t==="limit"?($e=s.value.limit)==null||$e.pop():t==="long_cap_weight"?(Ke=s.value.long_cap_weight)==null||Ke.pop():t==="short_cap_weight"&&((Me=s.value.short_cap_weight)==null||Me.pop())},de=(_,t,v)=>{if(!_||!_.length)return;const V=a.value.findIndex(P=>P.id===t);if(V!==-1&&v==="number"){const P=[..._],E=P[P.length-1];isNaN(Number(E))?P.pop():P[P.length-1]=Number(E),a.value[V].candidates=P}},T=(_,t)=>{const v=a.value.findIndex(V=>V.id===t);v!==-1&&(_==="object"?a.value[v].candidates={start:null,end:null,step:null}:a.value[v].candidates=[])},F=()=>{let _=0;return Object.keys(s.value).forEach(t=>{t!=="name"&&t!=="search_name"&&t!=="strategy_info"&&!t.includes("[")&&s.value[t]!==null&&_++}),a.value.length>0&&(_+=a.value.length),_},le=_=>{if(F()>=3){N.add({severity:"warn",summary:"每个遍历任务最多只能添加3个参数",life:2e3});return}if(_.includes("[")){const t=qe(_);if(!t){N.add({severity:"error",summary:"参数格式错误",detail:"请检查动态参数格式是否正确",life:2e3});return}if(a.value.some(V=>V.batchName===_)){N.add({severity:"info",summary:"已添加该参数",detail:"该动态参数已存在，无需重复添加",life:2e3});return}a.value.push({id:_,batchName:_,parsed:t,valueType:"number",candidates:[]}),x.value.includes(_)||x.value.push(_)}else s.value[_]==null&&(s.value[_]=_==="hold_period"?{}:[])},oe=_=>{const t=s.value;_ in t&&(t[_]=null)},L=(_,t=!1)=>{a.value=a.value.filter(v=>v.id!==_),t&&(x.value=x.value.filter(v=>v!==_))},ke=()=>{var _;(_=ye.value)==null||_.submit()},j=async()=>{if(a.value.some(E=>E.error)){N.add({severity:"error",summary:"动态参数输入有误",detail:"请修正动态参数中的错误后再提交",life:3e3});return}let t={};Object.keys(s.value).forEach(E=>{E.includes("[")||(t[E]=s.value[E])});let v={...t,...a.value.reduce((E,Te)=>(E[Te.batchName]=Te.candidates,E),{})},V=0;if(Object.keys(v).forEach(E=>{(JSON.stringify(v[E])==="[]"||v[E]===null)&&V++}),V===Object.keys(v).length-3){N.add({severity:"error",summary:"请至少配置一个遍历参数,才能保存！",life:3e3});return}if(R.value)return;(await Zt(v)).result===!0&&(N.add({severity:"success",summary:"保存成功！",life:3e3}),Y.value=!1,y("refreshConfigInfo"))},Oe=()=>{ae.require({group:"editBatch",message:"当前的修改还未保存，确定要关闭吗？",header:"确认关闭",icon:"pi pi-exclamation-triangle text-yellow-500",rejectProps:{label:"取消",outlined:!0},acceptProps:{label:"确定",severity:"secondary"},accept:()=>{Y.value=!1},reject:()=>{}})};return u({openDrawer:Ve}),(_,t)=>{const v=ft,V=Ql,P=Kt,E=Xt,Te=Nt,$e=Dt,Ke=vt,Me=oa,Ie=sa,_t=aa,yt=tl,ml=Yt,pl=Ot,Ue=ll,fl=fa,nt=Gt,zt=gt,vl=pt,gl=el,_l=al,Q=mt;return o(),c(O,null,[l(gl,{visible:Y.value,"onUpdate:visible":t[63]||(t[63]=Xe=>Y.value=Xe),header:"策略遍历配置编辑",dismissable:!1,position:"full",class:"w-[50vw]",pt:{content:{class:"flex flex-col"},header:{class:"py-3"}}},{closebutton:b(()=>[e("div",ts,[l(v,{label:"保存",size:"small",onClick:ke,loading:ee.value},null,8,["loading"]),l(v,{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:Oe})])]),default:b(()=>[e("div",ls,[e("div",as,[l(pl,{ref_key:"refForm",ref:ye,onSubmit:j,class:"flex flex-col space-y-4 pr-1"},{default:b(Xe=>{var Ye,Ge,Qe,et,tt,f;return[e("div",ss,[ne.value&&p(X)==="stock"?(o(),S(V,{key:0,header:`「${n.value.name}」策略教程`,toggleable:"",class:"text-base bg-primary-50 dark:bg-gray-700",pt:{header:{class:"text-primary-600 dark:text-primary-500 px-2 py-0"}}},{default:b(()=>[l(da,{isLoading:B.value,teachInfo:fe.value},null,8,["isLoading","teachInfo"])]),_:1},8,["header"])):h("",!0),e("div",os,[e("div",{class:He(["flex flex-col gap-y-2",me.value?"flex-1":"flex-4"])},[t[64]||(t[64]=e("div",{class:"text-sm space-x-1 flex items-center"},[e("span",{class:"font-bold"},"策略名称")],-1)),p(X)==="coin"&&p(Pe)(n.value)?(o(),S(P,{key:0,modelValue:n.value.strategy,"onUpdate:modelValue":t[0]||(t[0]=r=>n.value.strategy=r),modelModifiers:{trim:!0},name:"strategy",type:"text",placeholder:"请填写策略名称",class:"w-full",size:"small",disabled:!0},null,8,["modelValue"])):p(X)==="stock"&&p(at)(n.value)?(o(),S(P,{key:1,modelValue:n.value.name,"onUpdate:modelValue":t[1]||(t[1]=r=>n.value.name=r),modelModifiers:{trim:!0},name:"name",type:"text",placeholder:"请填写策略名称",class:"w-full",size:"small",disabled:!0},null,8,["modelValue"])):h("",!0)],2),e("div",is,[e("div",ns,[t[65]||(t[65]=e("span",{class:"font-bold"},"资金权重",-1)),C(e("i",rs,null,512),[[Q,{value:p(ea),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(E,{modelValue:n.value.cap_weight,"onUpdate:modelValue":t[2]||(t[2]=r=>n.value.cap_weight=r),name:"cap_weight",minFractionDigits:0,maxFractionDigits:3,step:.1,min:0,max:1,mode:"decimal",showButtons:"",size:"small",disabled:!0},null,8,["modelValue"])])]),e("div",us,[e("div",cs,[e("div",ds,[t[66]||(t[66]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"持仓周期",-1)),C(e("i",ms,null,512),[[Q,{value:p(Vt),autoHide:!1,escape:!1},void 0,{bottom:!0}]])])]),l(P,{value:n.value.hold_period,size:"small",class:"w-full",disabled:!0},null,8,["value"])]),e("div",ps,[e("div",fs,[e("div",vs,[t[67]||(t[67]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"offset_list",-1)),C(e("i",gs,null,512),[[Q,{value:p(It),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),C(l(v,{onClick:t[3]||(t[3]=r=>le("offset_list")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[he,!s.value.offset_list]]),C(l(v,{onClick:t[4]||(t[4]=r=>oe("offset_list")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[he,s.value.offset_list]])]),n.value.offset_list.length>0?(o(),c("div",_s,[(o(!0),c(O,null,xe(n.value.offset_list,(r,xt)=>(o(),S(Te,{key:r,class:"font-medium text-xs",severity:"secondary"},{default:b(()=>[W(q(r),1)]),_:2},1024))),128))])):(o(),c("div",ys,"无"))]),p(X)==="coin"&&p(Pe)(n.value)?(o(),c(O,{key:1},[e("div",xs,[e("div",bs,[e("div",hs,[t[68]||(t[68]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"选币范围(现货/合约)",-1)),C(e("i",ws,null,512),[[Q,{value:p(At),autoHide:!1,escape:!1,class:"min-w-80"},void 0,{bottom:!0}]])]),C(l(v,{onClick:t[5]||(t[5]=r=>le("market")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[he,!s.value.market]]),C(l(v,{onClick:t[6]||(t[6]=r=>oe("market")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[he,s.value.market]])]),l($e,{modelValue:n.value.market,"onUpdate:modelValue":t[7]||(t[7]=r=>n.value.market=r),options:p(Mt),optionLabel:"label",optionValue:"value",placeholder:"请选择选币范围(现货/合约)",class:"w-full",size:"small",disabled:""},null,8,["modelValue","options"]),e("span",Cs,q(n.value.market)+": "+q(p(Ft)[n.value.market]),1)]),e("div",ks,[e("div",$s,[e("div",Vs,[e("div",Is,[t[69]||(t[69]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"多头权重",-1)),C(e("i",Ls,null,512),[[Q,{value:"多头权重：多头在子策略的仓位占比，如1表示纯多策略",autoHide:!1,escape:!1,class:"min-w-90"}]])])]),l(E,{modelValue:n.value.long_cap_weight,"onUpdate:modelValue":t[8]||(t[8]=r=>n.value.long_cap_weight=r),size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])]),e("div",Ss,[e("div",Bs,[e("div",Os,[t[70]||(t[70]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"空头权重",-1)),C(e("i",Ds,null,512),[[Q,{value:"空头权重：空头在子策略的仓位占比，如1表示纯空策略",autoHide:!1,escape:!1,class:"min-w-90"}]])])]),l(E,{modelValue:n.value.short_cap_weight,"onUpdate:modelValue":t[9]||(t[9]=r=>n.value.short_cap_weight=r),size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])])]),e("div",Ns,[e("div",zs,[e("div",Ts,[e("div",Fs,[t[71]||(t[71]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"多头选币数量",-1)),C(e("i",js,null,512),[[Q,{value:p(ta),autoHide:!1},void 0,{bottom:!0}]])]),C(l(v,{onClick:t[10]||(t[10]=r=>le("long_select_coin_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[he,!s.value.long_select_coin_num]]),C(l(v,{onClick:t[11]||(t[11]=r=>oe("long_select_coin_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[he,s.value.long_select_coin_num]])]),l(P,{modelValue:n.value.long_select_coin_num,"onUpdate:modelValue":t[12]||(t[12]=r=>n.value.long_select_coin_num=r),modelModifiers:{trim:!0},name:"long_select_coin_num",placeholder:"支持整数（如10）、小数（如0.5）、区间（如1,5）区间起始值和结束值用英文逗号隔开",class:"w-full",size:"small",disabled:""},null,8,["modelValue"])]),e("div",Us,[e("div",Ps,[e("div",Ms,[t[72]||(t[72]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"空头选币数量",-1)),C(e("i",As,null,512),[[Q,{value:p(la),autoHide:!1},void 0,{bottom:!0}]])]),C(l(v,{onClick:t[13]||(t[13]=r=>le("short_select_coin_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[he,!s.value.short_select_coin_num]]),C(l(v,{onClick:t[14]||(t[14]=r=>oe("short_select_coin_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[he,s.value.short_select_coin_num]])]),e("div",Rs,[l(P,{modelValue:n.value.short_select_coin_num,"onUpdate:modelValue":t[15]||(t[15]=r=>n.value.short_select_coin_num=r),modelModifiers:{trim:!0},name:"short_select_coin_num",placeholder:"支持输入整数， 小数，long_nums(和多头选币数量一致),区间（如1,5）区间起始值和结束值用英文逗号隔开",size:"small",class:"flex-1",disabled:""},null,8,["modelValue"])])])])],64)):p(X)==="stock"&&p(at)(n.value)?(o(),c(O,{key:2},[e("div",Es,[e("div",Hs,[e("div",Js,[e("div",qs,[t[73]||(t[73]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"选股数量",-1)),C(e("i",Zs,null,512),[[Q,{value:p(Rt),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),C(l(v,{onClick:t[16]||(t[16]=r=>le("select_num")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[he,!s.value.select_num]]),C(l(v,{onClick:t[17]||(t[17]=r=>oe("select_num")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[he,s.value.select_num]])]),l(E,{modelValue:n.value.select_num,"onUpdate:modelValue":t[18]||(t[18]=r=>n.value.select_num=r),name:"select_num",min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",class:"w-full",placeholder:"请输入选股数量",size:"small",disabled:!0},null,8,["modelValue"])])]),e("div",Ws,[e("div",Ks,[e("div",Xs,[t[74]||(t[74]=e("span",{class:"font-bold text-primary-500 dark:text-primary-300"},"换仓时间",-1)),C(e("i",Ys,null,512),[[Q,{value:p(Et),autoHide:!1,escape:!1,class:"min-w-85"},void 0,{bottom:!0}]])]),C(l(v,{onClick:t[19]||(t[19]=r=>le("rebalance_time")),label:"遍历",size:"small",rounded:"",class:"py-1 text-xs",icon:"pi pi-plus"},null,512),[[he,!s.value.rebalance_time]]),C(l(v,{onClick:t[20]||(t[20]=r=>oe("rebalance_time")),size:"small",severity:"danger",class:"py-1 text-xs",icon:"pi pi-trash"},null,512),[[he,s.value.rebalance_time]])]),l($e,{modelValue:n.value.rebalance_time,"onUpdate:modelValue":t[21]||(t[21]=r=>n.value.rebalance_time=r),name:"rebalance_time",filter:"",options:p($t),size:"small",class:"w-full",disabled:!0},null,8,["modelValue","options"])])],64)):h("",!0),l(Ke,{align:"center",type:"solid",class:"mb-0"},{default:b(()=>t[75]||(t[75]=[e("b",{class:"text-primary-500"},"因子配置",-1)])),_:1,__:[75]}),e("div",Gs,[e("div",Qs,[t[76]||(t[76]=e("span",{class:"font-bold"},"因子配置",-1)),p(X)==="coin"?C((o(),c("i",eo,null,512)),[[Q,{value:p(kt),autoHide:!1,class:"min-w-85"}]]):h("",!0)]),p(X)==="coin"&&p(Pe)(n.value)?(o(),c(O,{key:0},[l(_t,{value:U.value,"onUpdate:value":t[22]||(t[22]=r=>U.value=r),class:"w-full"},{default:b(()=>[l(Ie,{class:"px-2 py-1"},{default:b(()=>[(o(!0),c(O,null,xe(G.value,r=>(o(),S(Me,{key:r.label,value:r.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[W(q(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),U.value==="longOrShort"?(o(),c("div",to,[e("div",lo,[l(yt,{options:M.value,modelValue:ge.value,"onUpdate:modelValue":t[23]||(t[23]=r=>ge.value=r),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])])):h("",!0)],64)):p(X)==="stock"&&p(at)(n.value)?(o(),c(O,{key:1},[],64)):h("",!0),e("div",ao,[U.value==="factorList"?(o(),S(Be,{key:0,propkey:"1",factorList:n.value.factor_list||[],title:"",factorSelect:"因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[24]||(t[24]=r=>n.value.factor_list=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"factor_list",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):p(X)==="coin"?(o(),c("div",so,[p(Pe)(n.value)?(o(),c(O,{key:0},[ge.value==="long"?(o(),S(Be,{key:0,propkey:"2",factorList:((Ye=n.value)==null?void 0:Ye.long_factor_list)||[],title:"多头选币",factorSelect:"因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[25]||(t[25]=r=>n.value.long_factor_list=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"long_factor_list",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),S(Be,{key:1,propkey:"3",factorList:((Ge=n.value)==null?void 0:Ge.short_factor_list)||[],title:"空头选币",factorSelect:"因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[26]||(t[26]=r=>n.value.short_factor_list=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"short_factor_list",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))],64)):h("",!0)])):h("",!0)])]),e("div",oo,[e("div",io,[t[77]||(t[77]=e("span",{class:"font-bold"},"前置过滤因子配置",-1)),p(X)==="coin"?C((o(),c("i",no,null,512)),[[Q,{value:p(kt),autoHide:!1,class:"min-w-85"}]]):h("",!0)]),p(X)==="coin"&&p(Pe)(n.value)?(o(),c(O,{key:0},[l(_t,{value:re.value,"onUpdate:value":t[27]||(t[27]=r=>re.value=r),class:"w-full"},{default:b(()=>[l(Ie,{class:"px-2 py-1"},{default:b(()=>[(o(!0),c(O,null,xe(G.value,r=>(o(),S(Me,{key:r.label,value:r.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[W(q(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),re.value==="longOrShort"?(o(),c("div",ro,[l(yt,{options:M.value,modelValue:_e.value,"onUpdate:modelValue":t[28]||(t[28]=r=>_e.value=r),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])):h("",!0)],64)):p(X)==="stock"&&p(at)(n.value)?(o(),c(O,{key:1},[],64)):h("",!0),re.value==="factorList"?(o(),S(Be,{key:2,propkey:"4",factorList:n.value.filter_list||[],title:"前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[29]||(t[29]=r=>n.value.filter_list=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"filter_list",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):p(X)==="coin"?(o(),c("div",uo,[p(Pe)(n.value)?(o(),c(O,{key:0},[_e.value==="long"?(o(),S(Be,{key:0,propkey:"5",factorList:((Qe=n.value)==null?void 0:Qe.long_filter_list)||[],title:"多头前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[30]||(t[30]=r=>n.value.long_filter_list=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"long_filter_list",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),S(Be,{key:1,propkey:"6",factorList:((et=n.value)==null?void 0:et.short_filter_list)||[],title:"空头前置过滤",factorSelect:"前置过滤因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[31]||(t[31]=r=>n.value.short_filter_list=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"short_filter_list",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))],64)):h("",!0)])):h("",!0)]),p(X)==="coin"?(o(),c(O,{key:3},[p(Pe)(n.value)?(o(),c("div",co,[e("div",mo,[t[78]||(t[78]=e("span",{class:"font-bold"},"后置过滤因子配置",-1)),C(e("i",po,null,512),[[Q,{value:p(kt),autoHide:!1,class:"min-w-85"}]])]),l(_t,{value:ve.value,"onUpdate:value":t[32]||(t[32]=r=>ve.value=r),class:"w-full"},{default:b(()=>[l(Ie,{class:"px-2 py-1"},{default:b(()=>[(o(!0),c(O,null,xe(G.value,r=>(o(),S(Me,{key:r.label,value:r.value,pt:{root:"px-4 py-2"},disabled:""},{default:b(()=>[W(q(r.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"]),ve.value==="longOrShort"?(o(),c("div",fo,[l(yt,{options:M.value,modelValue:be.value,"onUpdate:modelValue":t[33]||(t[33]=r=>be.value=r),"option-label":"label","option-value":"value",size:"small"},null,8,["options","modelValue"])])):h("",!0),e("div",vo,[ve.value==="factorList"?(o(),S(Be,{key:0,propkey:"7",factorList:n.value.filter_list_post||[],title:"后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[34]||(t[34]=r=>n.value.filter_list_post=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"filter_list_post",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),c("div",go,[be.value==="long"?(o(),S(Be,{key:0,propkey:"8",factorList:((tt=n.value)==null?void 0:tt.long_filter_list_post)||[],title:"多头后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[35]||(t[35]=r=>n.value.long_filter_list_post=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"long_filter_list_post",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"])):(o(),S(Be,{key:1,propkey:"9",factorList:((f=n.value)==null?void 0:f.short_filter_list_post)||[],title:"空头后置过滤",factorSelect:"后置过滤因子",factorNameOpetions:te.value,allFactorInfo:se.value,onSaveData:t[36]||(t[36]=r=>n.value.short_filter_list_post=r),onAddFactorBatchItem:le,onRemoveFactorBatchItem:L,BatchParamsNameList:x.value,paramsName:"short_filter_list_post",isDemoStrategy:ne.value,disabled:!0,isBatchItem:!0,BatchLength:F()},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","isDemoStrategy","BatchLength"]))]))])])):h("",!0)],64)):p(X)==="stock"&&p(at)(n.value)?(o(),c("div",_o,[t[79]||(t[79]=e("div",{class:"flex items-center gap-1"},[e("span",{class:"font-bold"},"截面因子配置"),e("span",{class:"text-primary-500 text-sm"},"(该功能尚未直播，请先保持默认配置)")],-1)),e("div",yo,[l(ml,{modelValue:ie.value,"onUpdate:modelValue":t[37]||(t[37]=r=>ie.value=r),inputId:"cross-section-toggle","aria-label":"截面因子启用开关",disabled:!0},null,8,["modelValue"]),e("div",xo,q(ie.value?"已启用截面因子":"未启用截面因子"),1)]),C(l(ma,{factorList:n.value.cross_sections,factorNameOpetions:we.value,allFactorInfo:se.value,onSaveData:t[38]||(t[38]=r=>n.value.cross_sections=r),isEdit:!1},null,8,["factorList","factorNameOpetions","allFactorInfo"]),[[he,ie.value===!0]])])):h("",!0)])]}),_:1},512)]),l(vl,{class:"flex-3 max-h-full overflow-y-auto min-w-0 h-fit sticky top-2 right-0 border-1 shadow-sm border-primary-200 dark:border-gray-700"},{content:b(()=>{var Xe,Ye,Ge,Qe,et,tt;return[e("div",bo,[e("div",ho,[t[88]||(t[88]=e("h1",{class:"font-bold text-primary-600 dark:text-primary-500"}," 遍历参数 ",-1)),t[89]||(t[89]=e("h2",{class:"text-sm text-gray-500 dark:text-gray-400"}," 在左侧策略信息区域，点击「+ 遍历」按钮即可添加需要遍历参数的候选项 ",-1)),e("ul",wo,[e("li",Co,[F()>=2?(o(),c(O,{key:0},[t[80]||(t[80]=e("i",{class:"pi pi-check-circle text-green-500"},null,-1)),t[81]||(t[81]=e("span",{class:"text-green-500"},"参数遍历分析工具 - 热力图",-1))],64)):(o(),c(O,{key:1},[t[82]||(t[82]=e("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),t[83]||(t[83]=e("span",{class:"text-gray-400"},"参数遍历分析工具 - 热力图",-1))],64))]),e("li",ko,[F()>=1?(o(),c(O,{key:0},[t[84]||(t[84]=e("i",{class:"pi pi-check-circle text-green-500"},null,-1)),t[85]||(t[85]=e("span",{class:"text-green-500"},"参数遍历分析工具 - 参数平原",-1))],64)):(o(),c(O,{key:1},[t[86]||(t[86]=e("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),t[87]||(t[87]=e("span",{class:"text-gray-400"},"参数遍历分析工具 - 参数平原",-1))],64))])])]),e("div",{class:He(a.value.length>0?"space-y-6 mt-4":"space-y-0 mt-4")},[e("div",$o,[s.value.hold_period?(o(),c("div",Vo,[e("div",Io,[e("div",Lo,[t[90]||(t[90]=e("span",{class:"font-bold"},"持仓周期 - 候选项",-1)),t[91]||(t[91]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),C(e("i",So,null,512),[[Q,{value:p(Vt),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(v,{onClick:t[39]||(t[39]=f=>oe("hold_period")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),p(X)==="coin"?(o(),S(Ue,{key:0,modelValue:s.value.hold_period,"onUpdate:modelValue":t[40]||(t[40]=f=>s.value.hold_period=f),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入持仓周期，输入如23H或7D，按回车添加",onValueChange:t[41]||(t[41]=f=>Z(f)),class:"w-full"},null,8,["modelValue"])):(o(),S(fl,{key:1,modelValue:s.value.hold_period,"onUpdate:modelValue":t[42]||(t[42]=f=>s.value.hold_period=f),name:"hold_period",showClear:"",filter:"",filterMode:"lenient",options:p(pa)(),placeholder:"请选择持仓周期（多选）",size:"small",class:"w-full",selectionMode:"multiple"},null,8,["modelValue","options"]))])):h("",!0),s.value.offset_list?(o(),c("div",Bo,[e("div",Oo,[e("div",Do,[t[92]||(t[92]=e("span",{class:"font-bold"},"offset_list - 候选项",-1)),C(e("i",No,null,512),[[Q,{value:p(It),escape:!1},void 0,{bottom:!0}]])]),l(v,{onClick:t[43]||(t[43]=f=>oe("offset_list")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),e("div",zo,[s.value.offset_list.length>0?(o(),c("div",To,[(o(!0),c(O,null,xe(s.value.offset_list,(f,r)=>(o(),c("div",{class:"flex items-center gap-2",key:r},[l(nt,{modelValue:s.value.offset_list[r],"onUpdate:modelValue":xt=>s.value.offset_list[r]=xt,name:`offset_list_${r}`,options:p(X)==="coin"?pe.value:$.value,optionLabel:"label",optionValue:"value",placeholder:"请选择offset（多选）",minSelectedLabels:1,class:"flex-1",size:"small",filter:"",maxSelectedLabels:5,"selected-items-label":f.length===(p(X)==="coin"?pe.value.length:$.value.length)?"全offset覆盖":`${f.length}个offset`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","onUpdate:modelValue","name","options","selected-items-label"]),l(v,{icon:"pi pi-trash",severity:"danger",variant:"outlined",size:"small",rounded:"",onClick:xt=>ze(r)},null,8,["onClick"])]))),128))])):h("",!0),p(Sl)&&R.value?(o(),S(zt,{key:1,severity:"error",size:"small",variant:"simple",class:"mt-1 mb-0"},{default:b(()=>[W(q(R.value),1)]),_:1})):h("",!0),l(v,{label:"添加",icon:"pi pi-plus",size:"small",variant:"outlined",onClick:Ce,class:"w-fit mt-2"})])])):h("",!0),p(X)==="coin"?(o(),c(O,{key:2},[s.value.market?(o(),c("div",Fo,[e("div",jo,[e("div",Uo,[t[93]||(t[93]=e("span",{class:"font-bold"},"选币范围(现货/合约) - 候选项",-1)),C(e("i",Po,null,512),[[Q,{value:p(At),autoHide:!1,escape:!1,class:"min-w-80"},void 0,{bottom:!0}]])]),l(v,{onClick:t[44]||(t[44]=f=>oe("market")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(nt,{modelValue:s.value.market,"onUpdate:modelValue":t[45]||(t[45]=f=>s.value.market=f),name:"market",options:ce.value,optionLabel:"label",optionValue:"value",placeholder:"请选择选币范围(现货/合约)",minSelectedLabels:1,maxSelectedLabels:3,class:"w-full",size:"small",filter:"","selected-items-label":((Ye=(Xe=s.value)==null?void 0:Xe.market)==null?void 0:Ye.length)===ce.value.length?"全选":`选了${(Qe=(Ge=s.value)==null?void 0:Ge.market)==null?void 0:Qe.length}个`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","options","selected-items-label"]),e("ul",Mo,[(o(!0),c(O,null,xe(s.value.market,(f,r)=>(o(),c("li",Ao,q(f)+": "+q(p(Ft)[f])+"。 ",1))),256))])])):h("",!0),s.value.long_cap_weight?(o(),c("div",Ro,[e("div",Eo,[e("div",Ho,[t[94]||(t[94]=e("span",{class:"font-bold"},"多头权重 - 候选项",-1)),t[95]||(t[95]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),C(e("i",Jo,null,512),[[Q,{value:"多头权重：多头在子策略的仓位占比，如1表示纯多策略",autoHide:!1,escape:!1,class:"min-w-90"}]])]),l(v,{onClick:t[46]||(t[46]=f=>oe("long_cap_weight")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Ue,{modelValue:s.value.long_cap_weight,"onUpdate:modelValue":t[47]||(t[47]=f=>s.value.long_cap_weight=f),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入0-1之间的小数(包括0和1)，按回车添加",onValueChange:t[48]||(t[48]=f=>Le(f,"long_cap_weight")),class:"w-full"},null,8,["modelValue"])])):h("",!0),s.value.short_cap_weight?(o(),c("div",qo,[e("div",Zo,[e("div",Wo,[t[96]||(t[96]=e("span",{class:"font-bold"},"空头权重 - 候选项",-1)),t[97]||(t[97]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),C(e("i",Ko,null,512),[[Q,{value:"空头权重：空头在子策略的仓位占比，如1表示纯空策略",autoHide:!1,escape:!1,class:"min-w-90"}]])]),l(v,{onClick:t[49]||(t[49]=f=>oe("short_cap_weight")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Ue,{modelValue:s.value.short_cap_weight,"onUpdate:modelValue":t[50]||(t[50]=f=>s.value.short_cap_weight=f),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入0-1之间的小数(包括0和1)，按回车添加",onValueChange:t[51]||(t[51]=f=>Le(f,"short_cap_weight")),class:"w-full"},null,8,["modelValue"])])):h("",!0),s.value.long_select_coin_num?(o(),c("div",Xo,[e("div",Yo,[e("div",Go,[t[98]||(t[98]=e("span",{class:"font-bold"},"多头选币数量 - 候选项",-1)),t[99]||(t[99]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),C(e("i",Qo,null,512),[[Q,{value:"多头选币数量：支持整数（如10）、小数（如0.5）、区间（如1,5）。整数表示选币数量，小数表示选币比例，区间表示选币数量范围。",autoHide:!1,escape:!1,class:"min-w-90"}]])]),l(v,{onClick:t[52]||(t[52]=f=>oe("long_select_coin_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Ue,{modelValue:s.value.long_select_coin_num,"onUpdate:modelValue":t[53]||(t[53]=f=>s.value.long_select_coin_num=f),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数、小数或区间（如1,5），按回车添加",onValueChange:t[54]||(t[54]=f=>Le(f,"long_select_coin_num")),class:"w-full"},null,8,["modelValue"])])):h("",!0),s.value.short_select_coin_num?(o(),c("div",ei,[e("div",ti,[e("div",li,[t[100]||(t[100]=e("span",{class:"font-bold"},"空头选币数量 - 候选项",-1)),t[101]||(t[101]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),C(e("i",ai,null,512),[[Q,{value:"空头选币数量：支持整数（如10）、小数（如0.5）、long_nums(和多头选币数量一致)、区间（如1,5）。整数表示选币数量，小数表示选币比例，区间表示选币数量范围。",autoHide:!1,escape:!1,class:"min-w-90"}]])]),l(v,{onClick:t[55]||(t[55]=f=>oe("short_select_coin_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Ue,{modelValue:s.value.short_select_coin_num,"onUpdate:modelValue":t[56]||(t[56]=f=>s.value.short_select_coin_num=f),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数、小数、long_nums或区间（如1,5），按回车添加",onValueChange:t[57]||(t[57]=f=>Le(f,"short_select_coin_num")),class:"w-full"},null,8,["modelValue"])])):h("",!0)],64)):h("",!0),p(X)==="stock"?(o(),c(O,{key:3},[s.value.select_num?(o(),c("div",si,[e("div",oi,[e("div",ii,[e("div",ni,[t[102]||(t[102]=e("span",{class:"font-bold"},"选股数量 - 候选项",-1)),t[103]||(t[103]=e("span",{class:"text-gray-600 dark:text-gray-300"},"(按回车添加)",-1)),C(e("i",ri,null,512),[[Q,{value:p(Rt),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(v,{onClick:t[58]||(t[58]=f=>oe("select_num")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(Ue,{modelValue:s.value.select_num,"onUpdate:modelValue":t[59]||(t[59]=f=>s.value.select_num=f),multiple:"",fluid:"",typeahead:!1,size:"small",placeholder:"输入整数或0-1之间的小数，按回车添加",onValueChange:t[60]||(t[60]=f=>Le(f,"select_num")),class:"w-full"},null,8,["modelValue"])])])):h("",!0),s.value.rebalance_time?(o(),c("div",ui,[e("div",ci,[e("div",di,[t[104]||(t[104]=e("span",{class:"font-bold"},"换仓时间 - 候选项",-1)),C(e("i",mi,null,512),[[Q,{value:p(Et),autoHide:!1,escape:!1,class:"min-w-85"},void 0,{bottom:!0}]])]),l(v,{onClick:t[61]||(t[61]=f=>oe("rebalance_time")),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"})]),l(nt,{modelValue:s.value.rebalance_time,"onUpdate:modelValue":t[62]||(t[62]=f=>s.value.rebalance_time=f),name:"rebalance_time",options:p($t),placeholder:"请选择换仓时间（多选）",minSelectedLabels:1,class:"w-full",size:"small",filter:"",maxSelectedLabels:5,"selected-items-label":((et=s.value.rebalance_time)==null?void 0:et.length)===p($t).length?"全部时间":`选择了${(tt=s.value.rebalance_time)==null?void 0:tt.length}个换仓时间`,emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","options","selected-items-label"])])):h("",!0)],64)):h("",!0)]),a.value.length>0?(o(),c("div",pi,[l(Ke,{class:"m-0"}),t[108]||(t[108]=e("span",{class:"font-bold text-primary-600 dark:text-primary-500 mb-2 block"},"因子参数遍历",-1)),e("div",fi,[(o(!0),c(O,null,xe(a.value,f=>(o(),c("div",{key:f.id,class:"flex flex-col gap-y-2 p-3 bg-white dark:bg-neutral-700/50 border-1 border-primary-50 dark:border-0 rounded-md shadow-sm"},[e("div",vi,[e("div",gi,[e("span",{innerHTML:p(ut)(f.parsed,n.value)},null,8,_i),C(e("i",yi,null,512),[[Q,{value:`该参数对应${f.parsed.paramsName}中第${f.parsed.row+1}行第${f.parsed.col+1}列的参数，支持输入多个候选项（数字或字符串类型是按回车添加）`,autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(v,{onClick:r=>L(f.id,!0),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"},null,8,["onClick"])]),e("div",xi,[l($e,{modelValue:f.valueType,"onUpdate:modelValue":r=>f.valueType=r,options:I.value,optionLabel:"label",optionValue:"value",optionDisabled:"disabled",size:"small",class:"min-w-20 h-fit",placeholder:"请选择参数类型",onValueChange:r=>T(r,f.id)},null,8,["modelValue","onUpdate:modelValue","options","onValueChange"]),f.valueType==="boolean"?(o(),S(nt,{key:0,modelValue:f.candidates,"onUpdate:modelValue":r=>f.candidates=r,options:H.value,"option-label":"label","option-value":"value",placeholder:"请选择参数类型（多选）",minSelectedLabels:1,size:"small",emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","onUpdate:modelValue","options"])):f.valueType==="object"&&f.candidates?(o(),c("div",bi,[e("div",hi,[t[105]||(t[105]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"起始值",-1)),l(E,{modelValue:f.candidates.start,"onUpdate:modelValue":r=>f.candidates.start=r,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:r=>z(f.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),e("div",wi,[t[106]||(t[106]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"结束值(包含起始值，不包含结束值)",-1)),l(E,{modelValue:f.candidates.end,"onUpdate:modelValue":r=>f.candidates.end=r,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:r=>z(f.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),e("div",Ci,[t[107]||(t[107]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"步长",-1)),l(E,{modelValue:f.candidates.step,"onUpdate:modelValue":r=>f.candidates.step=r,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:r=>z(f.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])])):(o(),S(Ue,{key:2,modelValue:f.candidates,"onUpdate:modelValue":r=>f.candidates=r,name:`dynamic_${f.id}`,multiple:"",fluid:"",typeahead:!1,size:"small",onValueChange:r=>de(r,f.id,f.valueType),placeholder:"输入参数值,按回车添加"},null,8,["modelValue","onUpdate:modelValue","name","onValueChange"]))]),f.error?(o(),S(zt,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1 mb-0"},{default:b(()=>[W(q(f.error),1)]),_:2},1024)):h("",!0)]))),128))])])):h("",!0)],2)])]}),_:1})])]),_:1},8,["visible"]),l(_l,{group:"editBatch"})],64)}}}),$i={class:"space-x-2"},Vi={class:"flex gap-x-4 max-h-full"},Ii={class:"flex-7 min-w-0 max-h-full overflow-y-auto"},Li={class:"text-center font-bold py-3"},Si={class:"space-y-3 text-sm"},Bi={class:"flex gap-2 flex-wrap"},Oi={class:"flex-1 flex flex-col gap-2"},Di={class:"text-sm space-x-1 flex items-center"},Ni={class:"pi pi-question-circle cursor-pointer"},zi={key:0,class:"flex-1 flex flex-col gap-2"},Ti={class:"text-sm space-x-1 flex items-center"},Fi={class:"pi pi-question-circle cursor-pointer"},ji={key:0,class:"flex-1 flex flex-col gap-2"},Ui={class:"text-sm space-x-1 flex items-center"},Pi={class:"pi pi-question-circle cursor-pointer"},Mi={key:0,class:"flex flex-wrap gap-2"},Ai={key:1},Ri={key:1,class:"flex flex-col gap-2"},Ei={class:"text-sm flex gap-4 items-center"},Hi={class:"flex items-center gap-1"},Ji={class:"pi pi-question-circle cursor-pointer"},qi={key:2,class:"flex flex-col gap-2"},Zi={class:"text-sm space-x-1 flex items-center"},Wi={class:"pi pi-question-circle cursor-pointer"},Ki={class:"flex gap-1 flex-wrap"},Xi={key:0,class:"cursor-pointer text-xs text-primary-500 dark:text-primary-300"},Yi={class:"flex items-center gap-1"},Gi={class:"pi pi-question-circle cursor-pointer"},Qi={class:"flex flex-col gap-3"},en={class:"flex items-center gap-2"},tn={for:"other-section-toggle",class:"cursor-pointer font-semibold"},ln={key:0,class:"flex flex-col gap-2"},an={class:"flex items-center gap-4 flex-wrap"},sn={class:"flex-1 flex flex-col gap-2"},on={class:"text-sm space-x-1 flex items-center"},nn={class:"pi pi-question-circle cursor-pointer"},rn={class:"flex-1 flex flex-col gap-2"},un={class:"text-sm space-x-1 flex items-center"},cn={class:"pi pi-question-circle cursor-pointer"},dn={class:"flex-1 flex flex-col gap-2"},mn={class:"text-sm space-x-1 flex items-center"},pn={class:"pi pi-question-circle cursor-pointer"},fn={class:"flex-1 flex flex-col gap-2"},vn={class:"text-sm space-x-1 flex items-center"},gn={class:"pi pi-question-circle cursor-pointer"},_n={class:"w-full"},yn={class:"space-y-2"},xn={class:"text-sm space-y-1"},bn={class:"flex items-center gap-2"},hn={class:"flex items-center gap-2"},wn={key:0,class:"flex flex-col gap-4"},Cn={class:"space-y-4 -mt-2"},kn={class:"text-sm font-medium flex justify-between items-center gap-1 flex-wrap"},$n={class:"flex items-center space-x-1"},Vn=["innerHTML"],In={class:"pi pi-question-circle cursor-pointer text-gray-400 ml-1"},Ln={class:"flex items-end gap-2 flex-wrap"},Sn={key:1,class:"flex gap-2 flex-wrap"},Bn={class:"flex flex-col gap-1"},On={class:"flex flex-col gap-1"},Dn={class:"flex flex-col gap-1"},Nn=ct({__name:"positionEditBatch.tmpl",emits:["refreshConfigInfo"],setup(i,{expose:u,emit:D}){const N=dt(),ae=St(),y=D,Y=d(!1),me=d(!1),ee=d(!1),n=d({name:"",hold_period:"1H",params:{cap_ratios:[],factor_list:[],rotation_period:"",offset_list:[],rotation_group:null},symbol_ratio_limit:null}),pe=d(null),$=d([]),ie=d([]),ne=d(null),G=d(st()),M=d([]),K=d([]),U=d([{label:"数字",value:"number"},{label:"字符串",value:"string"},{label:"布尔",value:"boolean"},{label:"区间",value:"object"}]),re=d([{label:"true",value:!0},{label:"false",value:!1}]),ve=d([{label:"空仓填充",value:"empty"},{label:"等权填充",value:"combine"}]),ge=async s=>{const a=M.value.findIndex(H=>H.id===s);if(a===-1)return;const x=M.value[a];await Bt();const I=x.candidates;Jt(I)?x.error="":x.error="区间不合法：请填写有效的起始、结束与步长（0<步长<结束值，起始<结束）"},_e=()=>{n.value.params.rotation_group&&(n.value.params.rotation_group=Object.entries(n.value.params.rotation_group).map(([s,a])=>({group:s,...a,override:a.override||{type:"",group_names:[]}})))},be=Je(()=>{var a;const s=[];return(a=n.value.params)!=null&&a.rotation_group&&Array.isArray(n.value.params.rotation_group)&&n.value.params.rotation_group.forEach(x=>{x.group&&x.group.trim()!==""&&s.push({label:x.group,value:x.group})}),s.push(...ye.value),s}),ye=Je(()=>{var s;return((s=G.value.strategy_info)==null?void 0:s.strategy_pool).map((a,x)=>({label:`S${x+1}_${a.name}`,value:a.name}))}),te=async(s,a)=>{var x;G.value=JSON.parse(JSON.stringify(a)),await we(),ee.value=!1,n.value=JSON.parse(JSON.stringify(s)),n.value.symbol_ratio_limit?Y.value=!0:Y.value=!1,(x=n.value.params)!=null&&x.rotation_group&&_e(),n.value.symbol_ratio_limit?(Y.value=!0,n.value.symbol_ratio_limit.long||(n.value.symbol_ratio_limit.long={rate_limit:null,fill_strategy:""}),n.value.symbol_ratio_limit.short||(n.value.symbol_ratio_limit.short={rate_limit:null,fill_strategy:""})):Y.value=!1,M.value=[],K.value=[],Object.keys(G.value).forEach(I=>{var H;if(I.includes("[")){const R=qe(I);if(!M.value.some(z=>z.batchName===I)){let z="number";Ze(G.value[I])==="object"?z="object":z=Ze((H=G.value[I])==null?void 0:H[0])||"number",M.value.push({id:I,batchName:I,parsed:R,valueType:z,candidates:G.value[I]}),K.value.push(I)}}}),me.value=!0},we=async()=>{const s=await qt();s.result===!0&&(ne.value=s.data,$.value=[],ie.value=[],s.data!==null&&Object.keys(s.data).length>0&&(Object.keys(s.data).forEach(x=>{const I=s.data;$.value.push({key:x,label:x==="factors"?"时序因子":"截面因子",selectable:!1,children:I[x].map(H=>({key:H.name,label:H.name}))||[]})}),ie.value=JSON.parse(JSON.stringify($.value))))},se=(s,a,x)=>{if(!s||!s.length)return;const I=M.value.findIndex(H=>H.id===a);if(I!==-1&&x==="number"){const H=[...s],R=H[H.length-1];isNaN(Number(R))?H.pop():H[H.length-1]=Number(R),M.value[I].candidates=H}},fe=(s,a)=>{const x=M.value.findIndex(I=>I.id===a);x!==-1&&(s==="object"?M.value[x].candidates={start:null,end:null,step:null}:M.value[x].candidates=[])},k=()=>{let s=0;return Object.keys(G.value).forEach(a=>{a!=="name"&&a!=="search_name"&&a!=="strategy_info"&&!a.includes("[")&&G.value[a]!==null&&s++}),M.value.length>0&&(s+=M.value.length),s},g=s=>{if(k()>=3){N.add({severity:"warn",summary:"每个遍历任务最多只能添加3个参数",life:2e3});return}if(s.includes("[")){const a=qe(s);if(!a){N.add({severity:"error",summary:"参数格式错误",detail:"请检查动态参数格式是否正确",life:2e3});return}if(M.value.some(I=>I.batchName===s)){N.add({severity:"info",summary:"已添加该参数",detail:"该动态参数已存在，无需重复添加",life:2e3});return}M.value.push({id:s,batchName:s,parsed:a,valueType:"number",candidates:[]}),K.value.includes(s)||K.value.push(s)}else G.value[s]==null&&(G.value[s]=s==="hold_period"?{}:[])},B=(s,a=!1)=>{M.value=M.value.filter(x=>x.id!==s),a&&(K.value=K.value.filter(x=>x!==s))},A=async()=>{if(M.value.some(R=>R.error)){N.add({severity:"error",summary:"动态参数输入有误",detail:"请修正动态参数中的错误后再提交",life:3e3});return}let a={};Object.keys(G.value).forEach(R=>{R.includes("[")||(a[R]=G.value[R])});let x={...a,...M.value.reduce((R,ce)=>(R[ce.batchName]=ce.candidates,R),{})},I=0;if(Object.keys(x).forEach(R=>{(JSON.stringify(x[R])==="[]"||x[R]===null)&&I++}),I===Object.keys(x).length-3){N.add({severity:"error",summary:"请至少配置一个遍历参数,才能保存！",life:3e3});return}(await Zt(x)).result===!0&&(N.add({severity:"success",summary:"保存成功！",life:3e3}),me.value=!1,y("refreshConfigInfo"))},J=()=>{ae.require({group:"editBatch",message:"当前的修改还未保存，确定要关闭吗？",header:"确认关闭",icon:"pi pi-exclamation-triangle text-yellow-500",rejectProps:{label:"取消",outlined:!0},acceptProps:{label:"确定",severity:"secondary"},accept:()=>{me.value=!1},reject:()=>{}})};return u({openDrawer:te}),(s,a)=>{const x=ft,I=Dt,H=Nt,R=ol,ce=Xt,z=Gt,Ve=tl,De=sl,Ne=Kt,w=Yt,m=Ot,Z=pt,Ce=vt,ze=ll,je=gt,We=el,Le=al,de=mt;return o(),c(O,null,[l(We,{visible:me.value,"onUpdate:visible":a[7]||(a[7]=T=>me.value=T),header:"策略遍历配置编辑",dismissable:!1,position:"full",class:"w-[50vw]",pt:{content:{class:"flex flex-col"},header:{class:"py-3"}}},{closebutton:b(()=>[e("div",$i,[l(x,{label:"保存",size:"small",onClick:A,loading:ee.value},null,8,["loading"]),l(x,{icon:"pi pi-times",variant:"text",severity:"secondary",rounded:"",onClick:J})])]),default:b(()=>[e("div",Vi,[e("div",Ii,[l(Z,{class:"border-1 border-gray-200 dark:border-neutral-700",pt:{body:{class:"pt-0"}}},{header:b(()=>[e("div",Li,q(p(Dl)[n.value.name]||n.value.name),1)]),content:b(()=>[l(m,{ref_key:"refForm",ref:pe,class:"space-y-4"},{default:b(T=>{var F,le,oe;return[e("div",Si,[e("div",Bi,[e("div",Oi,[e("label",Di,[a[8]||(a[8]=e("span",{class:"text-red-500"},"*",-1)),a[9]||(a[9]=e("span",{class:"font-bold"},"持仓周期",-1)),C(e("i",Ni,null,512),[[de,{value:p(Vt),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(I,{modelValue:n.value.hold_period,"onUpdate:modelValue":a[0]||(a[0]=L=>n.value.hold_period=L),size:"small",name:"hold_period",editable:"",disabled:!0},null,8,["modelValue"])]),[p(Se).rotationOffset,p(Se).grounpRotation,p(Se).grounpRotationOverride].includes(n.value.name)?(o(),c("div",zi,[e("label",Ti,[a[10]||(a[10]=e("span",{class:"text-red-500"},"*",-1)),a[11]||(a[11]=e("span",{class:"font-bold"},"轮动周期",-1)),C(e("i",Fi,null,512),[[de,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(I,{modelValue:n.value.params.rotation_period,"onUpdate:modelValue":a[1]||(a[1]=L=>n.value.params.rotation_period=L),editable:"",size:"small",disabled:""},null,8,["modelValue"])])):h("",!0)]),[p(Se).rotationOffset,p(Se).grounpRotation,p(Se).grounpRotationOverride].includes(n.value.name)?(o(),c("div",ji,[e("label",Ui,[a[12]||(a[12]=e("span",{class:"text-red-500"},"*",-1)),a[13]||(a[13]=e("span",{class:"font-bold"},"offset_list",-1)),C(e("i",Pi,null,512),[[de,{value:p(It),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),(F=n.value.params)!=null&&F.offset_list&&((oe=(le=n.value.params)==null?void 0:le.offset_list)==null?void 0:oe.length)>0?(o(),c("div",Mi,[(o(!0),c(O,null,xe(n.value.params.offset_list,(L,ke)=>(o(),S(H,{key:L,class:"font-medium text-xs",severity:"secondary"},{default:b(()=>[W(q(L),1)]),_:2},1024))),128))])):(o(),c("div",Ai,"无"))])):h("",!0),n.value.name!==p(Se).fixed?(o(),c("div",Ri,[e("div",Ei,[e("div",Hi,[a[14]||(a[14]=e("span",{class:"text-red-500"},"*",-1)),a[15]||(a[15]=e("span",{class:"font-bold"},"因子配置",-1)),C(e("i",Ji,null,512),[[de,{value:(p(X)==="positionCoin",""),autoHide:!1,escape:!1},void 0,{bottom:!0}]])])]),l(Be,{propkey:"1",factorList:n.value.params.factor_list||[],title:"",factorSelect:"因子",factorNameOpetions:$.value,allFactorInfo:ne.value,isDemoStrategy:!1,BatchParamsNameList:K.value,paramsName:"factor_list",disabled:!0,isBatchItem:!0,BatchLength:k(),onAddFactorBatchItem:g,onRemoveFactorBatchItem:B},null,8,["factorList","factorNameOpetions","allFactorInfo","BatchParamsNameList","BatchLength"])])):h("",!0),[p(Se).grounpRotation,p(Se).grounpRotationOverride].includes(n.value.name)?(o(),c("div",qi,[e("label",Zi,[a[16]||(a[16]=e("span",{class:"text-red-500"},"*",-1)),a[17]||(a[17]=e("span",{class:"font-bold"},"分组配置",-1)),C(e("i",Wi,null,512),[[de,{value:(p(X)==="positionCoin",""),autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(De,{showGridlines:"",value:n.value.params.rotation_group,class:"editable-cells-table text-xs",paginator:"",rows:5},{default:b(()=>[l(R,{field:"group",header:"组名",class:"w-[5%]",pt:{bodyCell:"px-3 py-1",headerCell:"px-3"}}),l(R,{field:"strategy_names",header:"策略列表",class:"w-[40%]",pt:{bodyCell:"px-2 py-1",headerCell:"px-3"}},{body:b(({data:L})=>[e("div",Ki,[(o(!0),c(O,null,xe(L.strategy_names.slice(0,2),(ke,j)=>(o(),S(H,{key:ke,class:"font-medium text-xs",severity:"secondary"},{default:b(()=>[W(q(ke),1)]),_:2},1024))),128)),L.strategy_names.length>2?C((o(),c("span",Xi,a[18]||(a[18]=[W("...")]))),[[de,{value:`全部：${L.strategy_names.join(", ")}`,autoHide:!1},void 0,{bottom:!0}]]):h("",!0)])]),_:1}),l(R,{field:"cap_ratio",header:"权重",class:"w-[5%]",pt:{bodyCell:"px-2 py-1",headerCell:"px-3"}},{body:b(({data:L,index:ke})=>[l(ce,{modelValue:L.cap_ratio,"onUpdate:modelValue":j=>L.cap_ratio=j,mode:"decimal",showButtons:"",min:0,max:1,minFractionDigits:0,maxFractionDigits:3,step:.1,size:"small",disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),n.value.name===p(Se).grounpRotationOverride?(o(),c(O,{key:0},[l(R,{field:"override.group_names",header:"选择填充策略/组",class:"w-[20%]",pt:{bodyCell:"px-2 py-1",headerCell:"px-3"}},{body:b(({data:L,index:ke})=>[l(z,{modelValue:L.override.group_names,"onUpdate:modelValue":j=>L.override.group_names=j,filter:"",options:be.value,placeholder:"选择填充",class:"w-full",size:"small",optionLabel:"label",optionValue:"value",disabled:""},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1}),l(R,{field:"override.type",header:"",class:"w-[30%]",pt:{bodyCell:"px-2 py-1",headerCell:"px-3"}},{header:b(()=>[e("div",Yi,[a[19]||(a[19]=e("span",{class:"font-bold"},"填充方式",-1)),C(e("i",Gi,null,512),[[de,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])])]),body:b(({data:L,index:ke})=>[l(Ve,{options:ve.value,modelValue:L.override.type,"onUpdate:modelValue":j=>L.override.type=j,optionLabel:"label",optionValue:"value",disabled:"",size:"small"},null,8,["options","modelValue","onUpdate:modelValue"])]),_:1})],64)):h("",!0)]),_:1},8,["value"]),l(Ne,{class:"hidden",name:"rotation_group"})])):h("",!0),e("div",Qi,[e("div",en,[l(w,{modelValue:Y.value,"onUpdate:modelValue":a[2]||(a[2]=L=>Y.value=L),inputId:"other-section-toggle","aria-label":"分域配置启用开关",disabled:""},null,8,["modelValue"]),e("label",tn,q(Y.value?"限制单一币种":"不限制单一币种"),1)]),Y.value?(o(),c("div",ln,[e("div",an,[e("div",sn,[e("label",on,[a[20]||(a[20]=e("span",{class:"text-red-500"},"*",-1)),a[21]||(a[21]=e("span",{class:"font-bold"},"多头权重",-1)),C(e("i",nn,null,512),[[de,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(ce,{modelValue:n.value.symbol_ratio_limit.long.rate_limit,"onUpdate:modelValue":a[3]||(a[3]=L=>n.value.symbol_ratio_limit.long.rate_limit=L),name:"long_rate_limit",size:"small",min:0,max:1,step:.1,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",disabled:""},null,8,["modelValue"])]),e("div",rn,[e("label",un,[a[22]||(a[22]=e("span",{class:"text-red-500"},"*",-1)),a[23]||(a[23]=e("span",{class:"font-bold"},"多头策略",-1)),C(e("i",cn,null,512),[[de,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(I,{modelValue:n.value.symbol_ratio_limit.long.fill_strategy,"onUpdate:modelValue":a[4]||(a[4]=L=>n.value.symbol_ratio_limit.long.fill_strategy=L),options:ye.value,size:"small",name:"long_fill_strategy",optionLabel:"label",optionValue:"value",placeholder:"请选择多头策略",disabled:""},null,8,["modelValue","options"])]),e("div",dn,[e("label",mn,[a[24]||(a[24]=e("span",{class:"text-red-500"},"*",-1)),a[25]||(a[25]=e("span",{class:"font-bold"},"空头权重",-1)),C(e("i",pn,null,512),[[de,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(ce,{modelValue:n.value.symbol_ratio_limit.short.rate_limit,"onUpdate:modelValue":a[5]||(a[5]=L=>n.value.symbol_ratio_limit.short.rate_limit=L),name:"short_rate_limit",mode:"decimal",showButtons:"",size:"small",min:0,max:1,step:.1,minFractionDigits:0,maxFractionDigits:3,disabled:""},null,8,["modelValue"])]),e("div",fn,[e("label",vn,[a[26]||(a[26]=e("span",{class:"text-red-500"},"*",-1)),a[27]||(a[27]=e("span",{class:"font-bold"},"空头策略",-1)),C(e("i",gn,null,512),[[de,{value:"",autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(I,{modelValue:n.value.symbol_ratio_limit.short.fill_strategy,"onUpdate:modelValue":a[6]||(a[6]=L=>n.value.symbol_ratio_limit.short.fill_strategy=L),options:ye.value,size:"small",name:"short_fill_strategy",optionLabel:"label",optionValue:"value",placeholder:"请选择空头策略",disabled:""},null,8,["modelValue","options"])])])])):h("",!0)])])]}),_:1},512)]),_:1})]),l(Z,{class:"flex-3 max-h-full overflow-y-auto min-w-0 h-fit sticky top-2 right-0 border-1 shadow-sm border-primary-200 dark:border-gray-700"},{content:b(()=>[e("div",_n,[e("div",yn,[a[36]||(a[36]=e("h1",{class:"font-bold text-primary-600 dark:text-primary-500"}," 遍历参数 ",-1)),a[37]||(a[37]=e("h2",{class:"text-sm text-gray-500 dark:text-gray-400"}," 在左侧策略信息区域，点击「+ 遍历」按钮即可添加需要遍历参数的候选项 ",-1)),e("ul",xn,[e("li",bn,[k()>=2?(o(),c(O,{key:0},[a[28]||(a[28]=e("i",{class:"pi pi-check-circle text-green-500"},null,-1)),a[29]||(a[29]=e("span",{class:"text-green-500"},"参数遍历分析工具 - 热力图",-1))],64)):(o(),c(O,{key:1},[a[30]||(a[30]=e("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),a[31]||(a[31]=e("span",{class:"text-gray-400"},"参数遍历分析工具 - 热力图",-1))],64))]),e("li",hn,[k()>=1?(o(),c(O,{key:0},[a[32]||(a[32]=e("i",{class:"pi pi-check-circle text-green-500"},null,-1)),a[33]||(a[33]=e("span",{class:"text-green-500"},"参数遍历分析工具 - 参数平原",-1))],64)):(o(),c(O,{key:1},[a[34]||(a[34]=e("i",{class:"pi pi-times-circle text-gray-400"},null,-1)),a[35]||(a[35]=e("span",{class:"text-gray-400"},"参数遍历分析工具 - 参数平原",-1))],64))])])]),e("div",{class:He(M.value.length>0?"space-y-6 mt-4":"space-y-0 mt-4")},[M.value.length>0?(o(),c("div",wn,[l(Ce,{class:"m-0"}),a[41]||(a[41]=e("span",{class:"font-bold text-primary-600 dark:text-primary-500 mb-2 block"},"因子参数遍历",-1)),e("div",Cn,[(o(!0),c(O,null,xe(M.value,T=>(o(),c("div",{key:T.id,class:"flex flex-col gap-y-2 p-3 bg-white dark:bg-neutral-700/50 border-1 border-primary-50 dark:border-0 rounded-md shadow-sm"},[e("div",kn,[e("div",$n,[e("span",{innerHTML:p(ut)(T.parsed,n.value)},null,8,Vn),C(e("i",In,null,512),[[de,{value:`该参数对应${T.parsed.paramsName}中第${T.parsed.row+1}行第${T.parsed.col+1}列的参数，支持输入多个候选项（按回车添加）`,autoHide:!1,escape:!1},void 0,{bottom:!0}]])]),l(x,{onClick:F=>B(T.id,!0),size:"small",severity:"danger",text:"",variant:"outlined",class:"py-1 text-xs",icon:"pi pi-trash"},null,8,["onClick"])]),e("div",Ln,[l(I,{modelValue:T.valueType,"onUpdate:modelValue":F=>T.valueType=F,options:U.value,optionLabel:"label",optionValue:"value",optionDisabled:"disabled",size:"small",class:"min-w-20 h-fit",placeholder:"请选择参数类型",onValueChange:F=>fe(F,T.id)},null,8,["modelValue","onUpdate:modelValue","options","onValueChange"]),T.valueType==="boolean"?(o(),S(z,{key:0,modelValue:T.candidates,"onUpdate:modelValue":F=>T.candidates=F,options:re.value,"option-label":"label","option-value":"value",placeholder:"请选择参数类型（多选）",minSelectedLabels:1,size:"small",emptyFilterMessage:"无匹配结果",emptyMessage:"暂无数据"},null,8,["modelValue","onUpdate:modelValue","options"])):T.valueType==="object"&&T.candidates?(o(),c("div",Sn,[e("div",Bn,[a[38]||(a[38]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"起始值",-1)),l(ce,{modelValue:T.candidates.start,"onUpdate:modelValue":F=>T.candidates.start=F,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:F=>ge(T.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),e("div",On,[a[39]||(a[39]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"结束值(包含起始值，不包含结束值)",-1)),l(ce,{modelValue:T.candidates.end,"onUpdate:modelValue":F=>T.candidates.end=F,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:F=>ge(T.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),e("div",Dn,[a[40]||(a[40]=e("label",{class:"text-xs text-gray-700 dark:text-gray-300"},"步长",-1)),l(ce,{modelValue:T.candidates.step,"onUpdate:modelValue":F=>T.candidates.step=F,min:0,minFractionDigits:0,maxFractionDigits:3,mode:"decimal",showButtons:"",size:"small",onBlur:F=>ge(T.id)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])])):(o(),S(ze,{key:2,modelValue:T.candidates,"onUpdate:modelValue":F=>T.candidates=F,name:`dynamic_${T.id}`,multiple:"",fluid:"",typeahead:!1,size:"small",onValueChange:F=>se(F,T.id,T.valueType),placeholder:"输入参数值,按回车添加"},null,8,["modelValue","onUpdate:modelValue","name","onValueChange"]))]),T.error?(o(),S(je,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1 mb-0"},{default:b(()=>[W(q(T.error),1)]),_:2},1024)):h("",!0)]))),128))])])):h("",!0)],2)])]),_:1})])]),_:1},8,["visible"]),l(Le,{group:"editBatch"})],64)}}}),zn={class:"px-5 py-3"},Tn={class:"px-4 py-2 space-y-3"},Fn={class:"font-semibold flex justify-between items-center"},jn={class:"flex items-center gap-2"},Un=["innerHTML"],Pn={class:"space-y-8"},Mn={class:"flex flex-col gap-y-2"},An={class:"text-sm flex items-center gap-1"},Rn={class:"font-bold"},En={key:0,class:"flex flex-col gap-y-2"},Hn={class:"flex flex-col gap-y-2"},Jn={key:1},qn={class:"flex gap-2"},Zn={class:"text-sm flex items-center gap-1"},Wn={class:"font-bold"},Kn={class:"flex justify-between items-center"},Xn={class:"text-xs text-gray-500 dark:text-gray-300"},Yn={class:"space-x-2"},Gn=ct({__name:"traversalConfig",props:{currentTraversalName:{}},emits:["refreshConfigInfo"],setup(i,{expose:u,emit:D}){const N=dt(),ae=d(),y=d(),Y=D,me=d([]),ee=d(st()),n=d(!1),pe=d(!1),$=d({main_factor:"",sub_factor:"",factor_dict:{},filter_list:[],mode:"",strategy_info:{strategy_name:0,start_time:void 0,end_time:void 0,add_factor_main_list:[],add_factor_sub_list:[]},param_search_info:{param_x:"",param_y:"",evaluation_indicator:"",limit_dict:{}},strategy_results:[]}),ie=d([]),ne=d(null),G=d(!1),M=d();Wt(async()=>{const k=await Nl();k.result===!0?me.value=k.data:me.value=[]});const K=k=>{ee.value=JSON.parse(JSON.stringify(k)),n.value=!1,U()},U=()=>{ie.value=[];let k=jt;if(ee.value){let g=ee.value;Object.keys(g).map(B=>{B.includes("[")&&g[B]!==null?ie.value.push({label:ut(qe(B),re(),!1),value:B}):!["name","search_name","strategy_info"].includes(B)&&g[B]!==null&&ie.value.push({label:k[B]||B,value:B})})}},re=()=>{var g;let k;return k=((g=ee.value.strategy_info)==null?void 0:g.strategy_config)||{},k},ve=()=>{var k,g;y.value&&((g=y.value)==null||g.openDrawer((k=ee.value.strategy_info)==null?void 0:k.strategy_config,ee.value))},ge=Je(()=>{const k=Math.max(...Object.values(ee.value).map(A=>Ze(A)==="object"?Array.from({length:Math.ceil((A.end-A.start)/A.step)},(J,s)=>A.start+s*A.step).length:Array.isArray(A)?A.length:0));let g=jt,B=JSON.parse(JSON.stringify(ee.value));return delete B.name,delete B.search_name,delete B.strategy_info,Object.entries(B).map(([A,J])=>{J===null&&delete B[A]}),Object.entries(B).map(([A,J])=>{let s={属性:"",参数:""};return A.includes("[")?s={属性:`${ut(qe(A),re())}`,参数:A}:s={属性:g[A]||A,参数:A},Ze(J)==="object"&&(J=Array.from({length:Math.ceil((J.end-J.start)/J.step)},(a,x)=>J.start+x*J.step)),[...Array(k)].forEach((a,x)=>{const I=J[x];s[`候选项${x+1}`]=Array.isArray(I)?I.map(H=>H.toString()).join(","):(I==null?void 0:I.toString())??""}),s})}),_e=Je(()=>ge.value.length?Object.keys(ge.value[0]).filter(k=>k.startsWith("候选项")):[]),be=async({values:k})=>{const g={};$.value.param_search_info.param_x||(g.param_x=[{message:"分析参数是必选项"}]),$.value.param_search_info.evaluation_indicator||(g.evaluation_indicator=[{message:"分析指标是必选项"}]),pe.value?($.value.param_search_info.param_y||(g.param_y=[{message:"Y轴参数是必选项"}]),$.value.param_search_info.param_x&&$.value.param_search_info.param_y&&$.value.param_search_info.param_x===$.value.param_search_info.param_y&&(g.param_x=[{message:"X轴和Y轴参数不能相同"}],g.param_y=[{message:"X轴和Y轴参数不能相同"}])):$.value.param_search_info.param_y="";const B=$.value.param_search_info.limit_dict;return B&&Object.entries(B).forEach(([A,J])=>{J||(g[`${A}`]=[{message:`请为${wt(A,re())}选择一个固定值`}])}),{values:k,errors:g}},ye=(k,g)=>{k===!1?($.value={...JSON.parse(JSON.stringify($.value)),param_search_info:{param_x:g,param_y:"",evaluation_indicator:"",limit_dict:{}}},fe()):$.value={...JSON.parse(JSON.stringify($.value)),param_search_info:{param_x:"",param_y:"",evaluation_indicator:"",limit_dict:{}}},M.value=Fl(ee.value),pe.value=k,n.value=!0},te=()=>{var k;(k=ne.value)==null||k.submit()};let we={coin:Tl.tool2,stock:zl.tool4,positionCoin:Ut.tool1,positionStock:Ut.tool1};const se=async({valid:k})=>{if(k){G.value=!0;let g=we[X];if((await jl(g,$.value)).result===!0){N.add({severity:"success",summary:"保存成功！",life:3e3});const A=await Ul(g);G.value=!1,A.result===!0&&(N.add({severity:"success",summary:"运行成功！",life:3e3}),n.value=!1)}else G.value=!1}},fe=()=>{const k=Pl(ee.value,$.value);$.value.param_search_info.limit_dict||($.value.param_search_info.limit_dict={}),k&&typeof k=="object"&&Object.keys(k).forEach(g=>{Object.hasOwn($.value.param_search_info.limit_dict,g)&&(Array.isArray($.value.param_search_info.limit_dict[g])?k[g]=$.value.param_search_info.limit_dict[g][0]:k[g]=$.value.param_search_info.limit_dict[g])}),$.value.param_search_info.limit_dict=k};return u({loadData:K}),(k,g)=>{const B=ft,A=vt,J=ol,s=sl,a=pt,x=Dt,I=gt,H=Ot,R=Qt,ce=mt;return o(),c(O,null,[e("div",zn,[l(a,{class:"border-1 border-gray-100 dark:border-neutral-700",pt:{body:{class:"pt-0"}}},{header:b(()=>[e("div",Tn,[e("div",Fn,[g[8]||(g[8]=e("span",{class:"text-primary-600 dark:text-primary-50"},"策略遍历配置",-1)),e("div",jn,[k.currentTraversalName==="config"?C((o(),S(B,{key:0,icon:"pi pi-caret-right",size:"small",variant:"outlined",class:"text-xs px-1.5 py-1 gap-0.5",label:"生成热力图",disabled:ie.value.length<2,onClick:g[0]||(g[0]=z=>ye(!0))},null,8,["disabled"])),[[ce,{value:ie.value.length<2?"至少遍历两个参数才能生成热力图":"",autoHide:!1,escape:!1,class:"min-w-54"}]]):h("",!0),l(B,{icon:"pi pi-cog",size:"small",variant:"outlined",class:"py-1 px-2",label:"设置",onClick:ve})])]),l(A,{class:"m-0"})])]),content:b(()=>[l(s,{value:ge.value,class:"text-xs",responsiveLayout:"scroll",pt:{headerRow:{class:"text-sm"}},scrollable:""},{empty:b(()=>g[9]||(g[9]=[e("div",{class:"flex items-center justify-center h-full"},[e("img",{src:Lt,class:"w-40 h-auto"})],-1)])),default:b(()=>[l(J,{field:"属性",header:"属性",frozen:"",class:"min-w-35 font-semibold z-10"},{body:b(({data:z})=>[e("div",{innerHTML:z.属性,class:"leading-5"},null,8,Un)]),_:1}),k.currentTraversalName==="config"?(o(),S(J,{key:0,field:"操作",header:"操作",class:"min-w-45 font-semibold"},{body:b(({data:z})=>[l(B,{size:"small",icon:"pi pi-caret-right",variant:"outlined",class:"text-xs px-1.5 py-1 gap-0.5",label:"生成参数平原图",onClick:Ve=>ye(!1,z.参数)},null,8,["onClick"])]),_:1})):h("",!0),l(J,{field:"参数",header:"参数"}),(o(!0),c(O,null,xe(_e.value,z=>(o(),S(J,{key:z,field:z,header:z,class:"min-w-30"},null,8,["field","header"]))),128))]),_:1},8,["value"])]),_:1})]),l(ki,{ref_key:"refEditBatchTmpl",ref:ae,onRefreshConfigInfo:g[1]||(g[1]=z=>Y("refreshConfigInfo"))},null,512),l(Nn,{ref_key:"refPositionEditBatchTmpl",ref:y,onRefreshConfigInfo:g[2]||(g[2]=z=>Y("refreshConfigInfo"))},null,512),l(R,{visible:n.value,"onUpdate:visible":g[7]||(g[7]=z=>n.value=z),modal:!0,draggable:!1,header:pe.value?"生成热力图":"生成参数平原图",class:"max-w-[90vw] min-w-[40vw]"},{default:b(()=>[e("div",Pn,[l(H,{resolver:be,ref_key:"refForm",ref:ne,onSubmit:se,class:"flex-1 flex flex-col space-y-3"},{default:b(z=>{var Ve,De,Ne;return[e("div",Mn,[e("label",An,[g[10]||(g[10]=e("span",{class:"text-red-500"},"*",-1)),e("span",Rn,q(pe.value?"X轴参数":"分析参数"),1)]),l(x,{size:"small",name:"param_x",modelValue:$.value.param_search_info.param_x,"onUpdate:modelValue":g[3]||(g[3]=w=>$.value.param_search_info.param_x=w),optionLabel:"label",optionValue:"value",placeholder:"请选择要分析的参数",checkmark:"",highlightOnSelect:!1,class:"w-full",options:ie.value,showClear:"",disabled:!pe.value,onValueChange:fe},null,8,["modelValue","options","disabled"]),(Ve=z.param_x)!=null&&Ve.invalid?(o(),S(I,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var w;return[W(q((w=z.param_x.error)==null?void 0:w.message),1)]}),_:2},1024)):h("",!0)]),pe.value?(o(),c("div",En,[g[11]||(g[11]=e("label",{class:"text-sm space-x-1"},[e("span",{class:"text-red-500"},"*"),e("span",{class:"font-bold"},"Y轴参数"),e("span",{class:"text-xs text-gray-500 dark:text-gray-300"})],-1)),l(x,{size:"small",name:"param_y",modelValue:$.value.param_search_info.param_y,"onUpdate:modelValue":g[4]||(g[4]=w=>$.value.param_search_info.param_y=w),optionLabel:"label",optionValue:"value",placeholder:"请选择要分析的参数",checkmark:"",highlightOnSelect:!1,options:ie.value.filter(w=>w.value!==$.value.param_search_info.param_x),onValueChange:fe,class:"w-full",showClear:""},null,8,["modelValue","options"]),(De=z.param_y)!=null&&De.invalid?(o(),S(I,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var w;return[W(q((w=z.param_y.error)==null?void 0:w.message),1)]}),_:2},1024)):h("",!0)])):h("",!0),e("div",Hn,[g[12]||(g[12]=e("label",{class:"text-sm flex items-center gap-1"},[e("span",{class:"text-red-500"},"*"),e("span",{class:"font-bold"},"分析指标")],-1)),l(x,{size:"small",name:"evaluation_indicator",modelValue:$.value.param_search_info.evaluation_indicator,"onUpdate:modelValue":g[5]||(g[5]=w=>$.value.param_search_info.evaluation_indicator=w),options:p(ia),placeholder:"请选择分析指标",checkmark:"",filter:"",highlightOnSelect:!1,class:"w-full",showClear:""},null,8,["modelValue","options"]),(Ne=z.evaluation_indicator)!=null&&Ne.invalid?(o(),S(I,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var w;return[W(q((w=z.evaluation_indicator.error)==null?void 0:w.message),1)]}),_:2},1024)):h("",!0)]),$.value.param_search_info.limit_dict&&Object.keys($.value.param_search_info.limit_dict).length>0?(o(),c("div",Jn,[l(A),g[14]||(g[14]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"font-semibold text-gray-700 dark:text-gray-300"},"固定参数设置"),e("span",{class:"text-xs text-gray-500"},"(请为其他参数选择固定值)")],-1)),e("div",qn,[(o(!0),c(O,null,xe(Object.keys($.value.param_search_info.limit_dict),w=>{var m;return o(),c("div",{class:"flex flex-col gap-y-2 w-full",key:w},[e("label",Zn,[g[13]||(g[13]=e("span",{class:"text-red-500"},"*",-1)),e("span",Wn,q(p(wt)(w,re())),1)]),l(x,{size:"small",name:w,modelValue:$.value.param_search_info.limit_dict[w],"onUpdate:modelValue":Z=>$.value.param_search_info.limit_dict[w]=Z,options:M.value[w],placeholder:`请选择${p(wt)(w,re())}的固定值`,class:"w-full",showClear:!0},null,8,["name","modelValue","onUpdate:modelValue","options","placeholder"]),(m=z[w])!=null&&m.invalid?(o(),S(I,{key:0,severity:"error",size:"small",variant:"simple",class:"mt-1"},{default:b(()=>{var Z;return[W(q((Z=z[w].error)==null?void 0:Z.message),1)]}),_:2},1024)):h("",!0)])}),128))])])):h("",!0)]}),_:1},512),e("div",Kn,[e("span",Xn,"分析结果可在工具页面「"+q(p(we)[p(X)])+"」中查看",1),e("div",Yn,[l(B,{label:"取消",severity:"secondary",size:"small",onClick:g[6]||(g[6]=z=>n.value=!1)}),l(B,{label:"开始运行",size:"small",onClick:te,loading:G.value},null,8,["loading"])])])])]),_:1},8,["visible","header"])],64)}}}),Qn={class:"flex items-center justify-between py-3 pl-4 pr-1"},er={class:"space-x-1"},tr={class:"flex-1 w-full min-w-0 space-y-1 font-semibold"},lr={class:"text-xs text-gray-500 dark:text-gray-300 truncate"},ar={class:"flex-1 overflow-y-auto px-4 mt-1"},sr={class:"space-y-1"},or=["onMouseenter","onClick"],ir={class:"flex-1 truncate"},nr={key:1,class:"h-full flex flex-col items-center pt-20 gap-4"},rr={key:0,class:"flex-1 min-w-0 h-full flex flex-col relative"},ur={class:"px-4 py-3 flex items-center justify-between sticky left-0 top-0"},cr={class:"space-x-2"},dr={class:"font-semibold"},mr={class:"flex gap-2"},pr={class:"overflow-y-auto overflow-x-hidden"},fr={class:"px-5 py-4 space-y-4"},vr={class:"px-5 py-3 space-y-6"},gr={key:1,class:"flex-1 min-w-0 h-full flex flex-col justify-center items-center gap-4"},_r={class:"flex flex-col gap-2"},yr={class:"flex items-center"},xr={class:"flex flex-col gap-2 pl-2"},br={class:"space-x-3 w-full flex justify-end"},hr={class:"flex items-center justify-between w-full"},wr={class:"text-xs text-gray-500 dark:text-gray-300 flex items-center gap-2"},Cr={class:"space-x-3"},kr={key:0,class:"fixed inset-0 bg-black/20 z-50 flex items-center justify-center"},$r={class:"bg-white dark:bg-neutral-800 p-8 rounded-lg shadow-2xl flex flex-col items-center"},Vr={class:"flex flex-col gap-6 px-8 py-4"},Tr=ct({__name:"traversal.page",setup(i){const u=dt(),D=St(),N=d(null),ae=d(null),y=d(null),Y=d(null),me=d(null),ee=d(null),n=d(null),pe=Object.values([Ea,Ha,Ja,qa]),$=Object.values([Za,Wa,Ka,Xa]),ie=Object.values([Ya,Ga,Qa,es]),G={coin:$,stock:pe,positionCoin:ie}[X],M=d([]),K=d([]),U=d(""),re=d(Ct()),ve=d(""),ge=d(),_e=d(null),be=d(!1),ye=d(!1),te=d(!1),we=d(!1),se=d(null),fe=d(!1);d(!1),d(!1);const k=d(st()),g=d(!1);Wt(()=>{B()});const B=async()=>{var m,Z;const w=await Ml();w.result===!0&&(K.value=((m=w.data)==null?void 0:m.configs)||[],M.value=((Z=w.data)==null?void 0:Z.configs.filter(Ce=>Ce!=="config"))||[]),K.value.length>0&&K.value.includes("config")?J("config"):K.value.length>0&&J(K.value[0])},A=async()=>{const w=await Hl("config");w.result===!0?re.value={...JSON.parse(JSON.stringify(Ct())),...JSON.parse(JSON.stringify(w.data)),name:"config"}:re.value={...JSON.parse(JSON.stringify(Ct())),name:"config"},a()},J=w=>{U.value=w,s(w)},s=async w=>{A();const m=await Al(encodeURIComponent(w));m.result===!0&&(k.value={...JSON.parse(JSON.stringify(st())),...m.data},w==="config"&&(ve.value=k.value.search_name)),a()},a=()=>{var w,m,Z,Ce,ze;y.value&&((w=y.value)==null||w.loadData(k.value)),N.value&&((m=N.value)==null||m.loadData(re.value)),ae.value&&((Z=ae.value)==null||Z.loadData(re.value)),Y.value&&((Ce=Y.value)==null||Ce.loadData(re.value)),me.value&&((ze=me.value)==null||ze.loadData(re.value))},x=Je(()=>[{label:"复制配置",icon:"pi pi-copy",command:()=>{ee.value&&ee.value.openDialog(U.value,k.value.search_name)},class:U.value==="无名称配置"?"hidden":""},{label:"删除",icon:"pi pi-trash",command:()=>{I()},class:U.value==="config"||K.value.length===0?"hidden":""}]),I=async()=>{if(U.value==="config"){u.add({severity:"warn",summary:"当前策略正在使用中不可删除！",life:3e3});return}D.require({group:U.value,header:"删除",message:`你确定要删除「${U.value}」吗?`,icon:"pi pi-info-circle",rejectProps:{label:"取消",severity:"secondary",outlined:!0},acceptProps:{label:"删除",severity:"danger"},accept:async()=>{if(U.value==="无名称配置"){B(),u.add({severity:"success",summary:"删除成功",life:3e3});return}(await Rl(U.value)).result===!0&&(u.add({severity:"success",summary:"删除成功",life:3e3}),B())},reject:()=>{}})},H=w=>{Bt(()=>{ge.value.toggle(w)})},R=async()=>{ye.value=!0,K.value.includes("config")?(await Jl("config",ql([...M.value],ve.value))).result===!0?(u.add({severity:"success",summary:"复制成功",life:3e3}),ce()):ye.value=!1:ce()},ce=async()=>{const w=await Zl(encodeURIComponent(U.value));ye.value=!1,w.result===!0&&(be.value=!1,u.add({severity:"success",summary:`配置 "${U.value}" 已成功启用`,life:3e3}),B())},z=()=>{fe.value=!1,te.value=!0,Ve(),se.value=setTimeout(()=>{fe.value=!0},5e3)},Ve=()=>{se.value&&(clearTimeout(se.value),se.value=null)},De=()=>{Ve(),fe.value=!0},Ne=async()=>{te.value=!1,we.value=!0;try{(await Wl()).result===!0&&u.add({severity:"success",summary:"遍历完成",life:3e3})}finally{we.value=!1}};return El(()=>{Ve()}),(w,m)=>{const Z=ft,Ce=vt,ze=pt,je=ua,We=Nt,Le=ga,de=gt,T=na,F=va,le=Qt,oe=ca,L=dl,ke=mt;return o(),c(O,null,[l(T,{class:"w-full h-screen overflow-hidden flex"},{default:b(()=>[l(je,{size:18,class:"min-w-[232px]"},{default:b(()=>[l(ze,{class:"max-h-full border-0 rounded-none shadow-none",pt:{body:{class:"flex-1 p-0 pb-2 min-h-0"},content:{class:"h-full min-h-0 flex flex-col"}}},{header:b(()=>[e("div",Qn,[m[18]||(m[18]=e("span",{class:"font-semibold"},"策略遍历配置库",-1)),e("div",er,[C(l(Z,{icon:"pi pi-plus",variant:"outlined",size:"small",severity:"secondary",onClick:m[0]||(m[0]=j=>g.value=!0)},null,512),[[ke,"新增遍历配置",void 0,{left:!0}]])])])]),content:b(()=>[l(Ce,{class:"m-0"}),K.value&&K.value.length>0?(o(),c(O,{key:0},[K.value&&K.value.includes("config")?(o(),c("div",{key:0,onMouseenter:m[2]||(m[2]=j=>_e.value="config"),onMouseleave:m[3]||(m[3]=j=>_e.value=null),onClick:m[4]||(m[4]=j=>J("config")),class:He(["pl-7 pr-1 h-14 flex justify-between items-center gap-2 cursor-pointer py-2 bg-gray-50 hover:bg-primary-50 text-gray-700 hover:text-primary-600 dark:bg-neutral-900 dark:hover:bg-primary-900 dark:text-gray-300 dark:hover:text-primary-100",U.value==="config"?"text-primary-600 bg-primary-50 dark:text-primary-100 dark:bg-primary-900":""])},[e("div",tr,[m[19]||(m[19]=e("div",null,"当前配置",-1)),C((o(),c("div",lr,[W(q(ve.value),1)])),[[ke,ve.value]])]),_e.value==="config"||U.value==="config"?(o(),S(Z,{key:0,icon:"pi pi-ellipsis-v",severity:"secondary",text:"","aria-haspopup":"true","aria-controls":"overlay_menu",onClick:m[1]||(m[1]=j=>H(j)),size:"small",class:"w-7 h-7 bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-900"})):h("",!0)],34)):h("",!0),e("div",ar,[e("ul",sr,[(o(!0),c(O,null,xe(M.value,j=>(o(),c("li",{onMouseenter:Oe=>_e.value=j,onMouseleave:m[6]||(m[6]=Oe=>_e.value=null),onClick:Oe=>J(j),key:j,class:He(["h-11 flex justify-between items-center gap-2 font-medium text-sm cursor-pointer pl-3 pr-1 py-2 hover:bg-primary-50 text-gray-700 hover:text-primary-600 dark:bg-neutral-900 dark:hover:bg-primary-900 dark:text-gray-300 dark:hover:text-primary-100 rounded-md",U.value===j?"text-primary-600 bg-primary-50 dark:text-primary-100 dark:bg-primary-900":""])},[C((o(),c("span",ir,[W(q(j),1)])),[[ke,j]]),_e.value===j||U.value===j?(o(),S(Z,{key:0,icon:"pi pi-ellipsis-v",severity:"secondary","aria-haspopup":"true","aria-controls":"overlay_menu",onClick:m[5]||(m[5]=Oe=>H(Oe)),size:"small",class:"w-7 h-7 bg-transparent hover:bg-gray-200 dark:hover:bg-neutral-900"})):h("",!0)],42,or))),128))])])],64)):(o(),c("div",nr,m[20]||(m[20]=[e("img",{src:Lt,class:"w-30 h-auto"},null,-1),e("div",{class:"space-y-1 flex flex-col items-center"},[e("span",{class:"text-gray-500 text-sm"},"暂无配置"),e("span",{class:"text-primary-500 text-xs"},"点击 + 按钮查看新增遍历配置教程")],-1)])))]),_:1})]),_:1}),l(je,{size:82},{default:b(()=>[K.value&&K.value.length>0?(o(),c("div",rr,[e("div",ur,[e("div",cr,[e("span",dr,q(k.value.search_name),1)]),e("div",mr,[U.value==="config"?(o(),S(We,{key:0,size:"small",severity:"success",class:"flex items-center gap-1 font-medium"},{default:b(()=>m[21]||(m[21]=[W(" 已启用")])),_:1,__:[21]})):U.value!=="无名称配置"?(o(),S(Z,{key:1,size:"small",onClick:m[7]||(m[7]=j=>be.value=!0)},{default:b(()=>m[22]||(m[22]=[W("启用")])),_:1,__:[22]})):h("",!0),U.value==="config"?(o(),S(Z,{key:2,size:"small",class:"shadow-lg",onClick:z},{default:b(()=>m[23]||(m[23]=[W("寻找最优参数")])),_:1,__:[23]})):h("",!0),l(Le,{group:"backTest",pt:{root:{class:"max-w-[90vw] sm:max-w-[600px]"}}})])]),l(Ce,{class:"m-0"}),e("div",pr,[U.value==="无名称配置"?(o(),S(de,{key:0,severity:"warn",closable:!1,class:"inline-flex"},{default:b(()=>m[24]||(m[24]=[e("div",{class:"space-y-2"},[e("div",{class:"flex items-center font-semibold gap-2"},[e("i",{class:"pi pi-exclamation-circle"}),W("重要提示 ")]),e("ul",{class:"list-disc space-y-1 text-sm pl-5",role:"list"},[e("li",null," 编辑「策略遍历配置」前，请先确保已填写配置名称，否则保存将失败。 "),e("li",null," 请确保策略遍历配置中至少有一个参数设置了候选值，否则无法保存。 ")])],-1)])),_:1,__:[24]})):h("",!0),l(Gn,{ref_key:"refTraversalConfigTmpl",ref:y,currentTraversalName:U.value,onRefreshConfigInfo:m[8]||(m[8]=j=>s(U.value))},null,8,["currentTraversalName"]),l(Ce,{class:"m-0"}),e("div",fr,[m[25]||(m[25]=e("div",{class:"text-primary-500 font-semibold"}," 当前 config.py 文件的相关配置信息 ",-1)),l(ya,{ref_key:"refStrategyOtherConfigTmpl",ref:ae,onRefreshConfigInfo:m[9]||(m[9]=j=>s(U.value))},null,512)]),e("div",vr,[l(xa,{ref_key:"refDataConfigTmpl",ref:N,onRefreshConfigInfo:m[10]||(m[10]=j=>s(U.value))},null,512),l(ba,{ref_key:"refBackTestSimulationConfigTmpl",ref:Y,onRefreshConfigInfo:m[11]||(m[11]=j=>s(U.value))},null,512),l(ha,{ref_key:"refOtherConfifTmpl",ref:me,onRefreshConfigInfo:m[12]||(m[12]=j=>s(U.value))},null,512)])])])):(o(),c("div",gr,m[26]||(m[26]=[e("img",{src:Lt,class:"w-30 h-auto"},null,-1),e("span",{class:"text-gray-500 text-sm"},"暂无配置信息",-1)])))]),_:1})]),_:1}),l(F,{ref_key:"refMenu",ref:ge,model:x.value,popup:!0,class:"min-w-35"},null,8,["model"]),l(Le,{group:U.value},null,8,["group"]),l(_a,{configNameList:[...M.value,ve.value],title:"遍历",configType:"traversal",ref_key:"refCopyConfigDialogTmpl",ref:ee,onRefreshConfigInfo:B},null,8,["configNameList"]),l(ra,{title:"遍历文件",maxFileSize:1*1024*1024,fileType:".py",ref_key:"refUploadConfigDialogTmpl",ref:n,onRefreshConfigInfo:B},null,512),l(le,{header:"启用确认",visible:be.value,closable:!1,draggable:!1,modal:!0,onHide:m[14]||(m[14]=j=>be.value=!1),class:"max-w-[90vw]",pt:{footer:"justify-between items-center"}},{footer:b(()=>[e("div",br,[l(Z,{label:"取消启用",severity:"secondary",onClick:m[13]||(m[13]=j=>be.value=!1)}),l(Z,{label:"确定启用",class:"p-button-primary",loading:ye.value,onClick:R},null,8,["loading"])])]),default:b(()=>[e("div",_r,[e("div",yr,[m[27]||(m[27]=e("i",{class:"pi pi-question-circle mr-2 text-xl"},null,-1)),W("确定要启用「"+q(k.value.search_name)+"」这个配置吗？ ",1)]),e("div",xr,[m[29]||(m[29]=e("div",{class:"text-sm text-gray-500 dark:text-gray-300"}," 系统会自动为你备份当前已启用的配置文件，以便你随时可以恢复。 ",-1)),l(de,{severity:"warn",icon:"pi pi-exclamation-triangle",variant:"simple",class:"mb-0",pt:{text:"text-sm"}},{default:b(()=>m[28]||(m[28]=[W(" 启用新的遍历配置后，系统将自动清理之前的工具配置信息 ")])),_:1,__:[28]})])])]),_:1},8,["visible"]),l(le,{header:"寻找最优参数提示",visible:te.value,closable:!1,draggable:!1,modal:!0,onHide:m[16]||(m[16]=j=>te.value=!1),class:"w-120",pt:{footer:"justify-between items-center"}},{footer:b(()=>[e("div",hr,[e("div",wr,[fe.value?h("",!0):(o(),c(O,{key:0},[m[30]||(m[30]=W(" 请认真阅读5s后才能点击确定按钮 ")),l(Z,{label:"跳过等待",link:"",class:"p-0 underline",onClick:De})],64))]),e("div",Cr,[l(Z,{label:"取消",severity:"secondary",onClick:m[15]||(m[15]=j=>te.value=!1)}),l(Z,{label:"确定",class:"p-button-primary",disabled:!fe.value,onClick:Ne},null,8,["disabled"])])])]),default:b(()=>[m[31]||(m[31]=e("ul",{class:"list-disc pl-6 leading-relaxed space-y-1"},[e("li",null,[W(" 建议使用 "),e("span",{class:"text-primary-500 font-semibold"}," PyCharm "),W("启动寻找最优参数（体验更优） ")]),e("li",null," 若使用网页版「寻找最优参数」功能，过程中会占用一定时间，屏幕将暂时锁定 "),e("li",null,"寻找最优参数进行时，请不要刷新页面或执行其他操作，以免影响结果")],-1))]),_:1,__:[31]},8,["visible"]),we.value?(o(),c("div",kr,[e("div",$r,[l(oe,{class:"mb-4"}),m[32]||(m[32]=e("p",{class:"text-lg font-medium"},"策略遍历进行中，请耐心等待...",-1)),m[33]||(m[33]=e("p",{class:"text-gray-500 dark:text-neutral-400 text-sm mt-2 flex items-center gap-2"},[e("i",{class:"pi pi-exclamation-triangle text-yellow-600"}),W("策略遍历期间请勿刷新页面或关闭浏览器 ")],-1))])])):h("",!0),l(le,{header:"新增策略遍历配置教程",visible:g.value,"onUpdate:visible":m[17]||(m[17]=j=>g.value=j),closable:!0,draggable:!1,modal:!0,class:"max-w-[80vw]",pt:{footer:"justify-between items-center"}},{default:b(()=>[e("div",Vr,[(o(!0),c(O,null,xe(p(G),(j,Oe)=>(o(),S(L,{key:Oe,src:j,alt:`Image ${Oe+1}`,preview:""},null,8,["src","alt"]))),128))])]),_:1},8,["visible"])],64)}}});export{Tr as default};
